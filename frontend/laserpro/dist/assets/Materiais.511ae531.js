import{_ as $,j as f,k as g,l as b,m as t,A as l,w as n,J as u,a7 as V,a8 as T,r as C,z as k,p as w,x as h,v as M,a4 as x,af as A}from"./index.8e00a179.js";import{D as E}from"./KTDataTable.78ec0e8e.js";import"./assets.de708fd5.js";const O={name:"AddMaterialModal",components:{},data(){return{formInfo:{tipo:"",liga:"",acabamento:"",comprimento:"",largura:"",espessura:""}}},methods:{verifyMaterialData(){return this.formInfo.tipo.length==0||this.formInfo.liga.length==0||this.formInfo.acabamento.length==0||this.formInfo.espessura.length==0||this.formInfo.comprimento.length==0||this.formInfo.largura.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.tipo.length>50?(this.$emit("open-modal","O tipo n\xE3o pode exceder 50 caracteres."),!1):this.formInfo.acabamento.length>50?(this.$emit("open-modal","O acabamento n\xE3o pode exceder 50 caracteres."),!1):this.formInfo.liga.length>200?(this.$emit("open-modal","A liga n\xE3o pode exceder 200 caracteres."),!1):this.formInfo.espessura<=0||this.formInfo.comprimento<=0||this.formInfo.largura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0},createMaterial(){this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.largura+"x"+this.formInfo.espessura,this.verifyMaterialData()&&(this.$emit("create-material",this.formInfo),this.formInfo={tipo:"",liga:"",acabamento:"",comprimento:"",largura:"",espessura:""})}}},_=a=>(V("data-v-45b9bce6"),a=a(),T(),a),F={class:"modal fade",id:"kt_modal_add_material",ref:"addMaterialModalRef",tabindex:"-1","aria-hidden":"true"},U={class:"modal-dialog modal-dialog-centered mw-650px"},L={class:"modal-content"},q={class:"modal-header",id:"kt_modal_add_material_header"},D=_(()=>t("h2",{class:"fw-bold"},"Criar Material",-1)),S={id:"kt_modal_add_material_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},N={class:"modal-body py-10 px-lg-17"},B={class:"scroll-y me-n7 pe-7",id:"kt_modal_add_material_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_customer_header","data-kt-scroll-wrappers":"#kt_modal_add_customer_scroll","data-kt-scroll-offset":"300px"},R={class:"fv-row mb-8"},z=_(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Tipo",-1)),K={class:"fv-row mb-8"},W=_(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Liga",-1)),H={class:"fv-row mb-8"},j=_(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Acabamento",-1)),P={class:"fv-row mb-8"},J=_(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Comprimento (mm)",-1)),G={class:"fv-row mb-8"},Q=_(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Largura (mm)",-1)),X={class:"fv-row mb-8"},Y=_(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Espessura (mm)",-1)),Z={class:"modal-footer flex-center"},ee=_(()=>t("button",{type:"reset",id:"kt_modal_add_customer_cancel",class:"btn btn-light me-3"}," Limpar ",-1));function te(a,e,s,c,i,r){const p=f("KTIcon"),d=f("el-input"),m=f("el-form-item"),I=f("el-form");return g(),b("div",F,[t("div",U,[t("div",L,[t("div",q,[D,t("div",S,[l(p,{"icon-name":"cross","icon-class":"fs-1"})])]),l(I,{model:i.formInfo,ref:"formRef"},{default:n(()=>[t("div",N,[t("div",B,[t("div",R,[z,l(m,{prop:"tipo"},{default:n(()=>[l(d,{modelValue:i.formInfo.tipo,"onUpdate:modelValue":e[0]||(e[0]=o=>i.formInfo.tipo=o),type:"text",placeholder:"Tipo"},null,8,["modelValue"])]),_:1})]),t("div",K,[W,l(m,{prop:"liga"},{default:n(()=>[l(d,{modelValue:i.formInfo.liga,"onUpdate:modelValue":e[1]||(e[1]=o=>i.formInfo.liga=o),type:"text",placeholder:"Liga"},null,8,["modelValue"])]),_:1})]),t("div",H,[j,l(m,{prop:"acabamento"},{default:n(()=>[l(d,{modelValue:i.formInfo.acabamento,"onUpdate:modelValue":e[2]||(e[2]=o=>i.formInfo.acabamento=o),type:"text",placeholder:"Acabamento"},null,8,["modelValue"])]),_:1})]),t("div",P,[J,l(m,{prop:"comprimento"},{default:n(()=>[l(d,{modelValue:i.formInfo.comprimento,"onUpdate:modelValue":e[3]||(e[3]=o=>i.formInfo.comprimento=o),type:"number",placeholder:"Comprimento"},null,8,["modelValue"])]),_:1})]),t("div",G,[Q,l(m,{prop:"largura"},{default:n(()=>[l(d,{modelValue:i.formInfo.largura,"onUpdate:modelValue":e[4]||(e[4]=o=>i.formInfo.largura=o),type:"number",placeholder:"Largura"},null,8,["modelValue"])]),_:1})]),t("div",X,[Y,l(m,{prop:"espessura"},{default:n(()=>[l(d,{modelValue:i.formInfo.espessura,"onUpdate:modelValue":e[5]||(e[5]=o=>i.formInfo.espessura=o),type:"number",placeholder:"Espessura"},null,8,["modelValue"])]),_:1})])])]),t("div",Z,[ee,t("div",{id:"kt_modal_add_customer_cancel",class:"btn btn-lg btn-primary",onClick:e[6]||(e[6]=(...o)=>r.createMaterial&&r.createMaterial(...o))},[u(" Criar "),l(p,{"icon-name":"arrow-right","icon-class":"fs-2 me-2 me-0",class:"override-mr0"})])])]),_:1},8,["model"])])])],512)}const oe=$(O,[["render",te],["__scopeId","data-v-45b9bce6"]]);const ae={name:"AlterMaterialModal",components:{},props:{info:{type:Object,required:!0}},data(){return{formInfo:{tipo:"",liga:"",acabamento:"",comprimento:"",largura:"",espessura:""}}},mounted(){this.formInfo=this.info},methods:{verifyMaterialData(){return this.formInfo.tipo.length==0||this.formInfo.liga.length==0||this.formInfo.acabamento.length==0||this.formInfo.espessura.length==0||this.formInfo.comprimento.length==0||this.formInfo.largura.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.tipo.length>50?(this.$emit("open-modal","O tipo n\xE3o pode exceder 50 caracteres."),!1):this.formInfo.acabamento.length>50?(this.$emit("open-modal","O acabamento n\xE3o pode exceder 50 caracteres."),!1):this.formInfo.liga.length>200?(this.$emit("open-modal","A liga n\xE3o pode exceder 200 caracteres."),!1):this.formInfo.espessura<=0||this.formInfo.comprimento<=0||this.formInfo.largura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0},alterarMaterial(){this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.largura+"x"+this.formInfo.espessura,this.verifyMaterialData()&&this.$emit("alter-material",this.formInfo)},reset(){this.formInfo={...this.info}}},watch:{info:function(a){this.formInfo={...a}}}},v=a=>(V("data-v-bf75e565"),a=a(),T(),a),se={class:"modal fade",id:"kt_modal_alter_material",ref:"alterMaterialModalRef",tabindex:"-1","aria-hidden":"true"},le={class:"modal-dialog modal-dialog-centered mw-650px"},ie={class:"modal-content"},re={class:"modal-header",id:"kt_modal_alter_material_header"},ne=v(()=>t("h2",{class:"fw-bold"},"Alterar Material",-1)),de={id:"kt_modal_alter_material_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},me={class:"modal-body py-10 px-lg-17"},ce={class:"scroll-y me-n7 pe-7",id:"kt_modal_alter_material_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_customer_header","data-kt-scroll-wrappers":"#kt_modal_add_customer_scroll","data-kt-scroll-offset":"300px"},fe={class:"fv-row mb-8"},pe=v(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Tipo",-1)),he={class:"fv-row mb-8"},ue=v(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Liga",-1)),_e={class:"fv-row mb-8"},ge=v(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Acabamento",-1)),be={class:"fv-row mb-8"},ve=v(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Comprimento (mm)",-1)),Ie={class:"fv-row mb-8"},ke=v(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Largura (mm)",-1)),Me={class:"fv-row mb-8"},$e=v(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Espessura (mm)",-1)),ye={class:"modal-footer flex-center"};function we(a,e,s,c,i,r){const p=f("KTIcon"),d=f("el-input"),m=f("el-form-item"),I=f("el-form");return g(),b("div",se,[t("div",le,[t("div",ie,[t("div",re,[ne,t("div",de,[l(p,{"icon-name":"cross","icon-class":"fs-1"})])]),l(I,{model:i.formInfo,ref:"formRef"},{default:n(()=>[t("div",me,[t("div",ce,[t("div",fe,[pe,l(m,{prop:"tipo"},{default:n(()=>[l(d,{modelValue:i.formInfo.tipo,"onUpdate:modelValue":e[0]||(e[0]=o=>i.formInfo.tipo=o),type:"text",placeholder:"Tipo"},null,8,["modelValue"])]),_:1})]),t("div",he,[ue,l(m,{prop:"liga"},{default:n(()=>[l(d,{modelValue:i.formInfo.liga,"onUpdate:modelValue":e[1]||(e[1]=o=>i.formInfo.liga=o),type:"text",placeholder:"Liga"},null,8,["modelValue"])]),_:1})]),t("div",_e,[ge,l(m,{prop:"acabamento"},{default:n(()=>[l(d,{modelValue:i.formInfo.acabamento,"onUpdate:modelValue":e[2]||(e[2]=o=>i.formInfo.acabamento=o),type:"text",placeholder:"Acabamento"},null,8,["modelValue"])]),_:1})]),t("div",be,[ve,l(m,{prop:"comprimento"},{default:n(()=>[l(d,{modelValue:i.formInfo.comprimento,"onUpdate:modelValue":e[3]||(e[3]=o=>i.formInfo.comprimento=o),type:"number",placeholder:"Comprimento"},null,8,["modelValue"])]),_:1})]),t("div",Ie,[ke,l(m,{prop:"largura"},{default:n(()=>[l(d,{modelValue:i.formInfo.largura,"onUpdate:modelValue":e[4]||(e[4]=o=>i.formInfo.largura=o),type:"number",placeholder:"Largura"},null,8,["modelValue"])]),_:1})]),t("div",Me,[$e,l(m,{prop:"espessura"},{default:n(()=>[l(d,{modelValue:i.formInfo.espessura,"onUpdate:modelValue":e[5]||(e[5]=o=>i.formInfo.espessura=o),type:"number",placeholder:"Espessura"},null,8,["modelValue"])]),_:1})])])]),t("div",ye,[t("div",{onClick:e[6]||(e[6]=(...o)=>r.reset&&r.reset(...o)),class:"btn btn-light me-3"}," Repor "),t("div",{id:"kt_modal_add_customer_cancel",class:"btn btn-lg btn-primary",onClick:e[7]||(e[7]=(...o)=>r.alterarMaterial&&r.alterarMaterial(...o))},[u(" Alterar "),l(p,{"icon-name":"arrow-right","icon-class":"fs-2 me-2 me-0",class:"override-mr0"})])])]),_:1},8,["model"])])])],512)}const xe=$(ae,[["render",we],["__scopeId","data-v-bf75e565"]]);const Ae={name:"Materiais",components:{Datatable:E,AddMaterialModal:oe,AlterMaterialModal:xe},data(){return{materiais:[],materiaisFiltered:[],stateOpen:!1,state:"Estado",createModalOpen:!1,alterModalOpen:!1,editMaterial:{id:"",liga:"",dimensoes:"",tipo:"",acabamento:""},tableHeader:[]}},created(){this.$store.getters.getUser.id?this.getAllMateriais():this.$router.push({name:"login"})},mounted(){let a=[{columnName:"Tipo",columnLabel:"tipo",sortEnabled:!0,columnWidth:160},{columnName:"Liga",columnLabel:"liga",sortEnabled:!0,columnWidth:160},{columnName:"Acabamento",columnLabel:"acabamento",sortEnabled:!0,columnWidth:170},{columnName:"Dimens\xF5es",columnLabel:"dimensoes",sortEnabled:!1,columnWidth:170},{columnName:"Estado",columnLabel:"estado",sortEnabled:!0,columnWidth:100}];this.$store.getters.getUser.tipo!="user"&&a.push({columnName:"Actions",columnLabel:"actions",sortEnabled:!1,columnWidth:160}),this.tableHeader=C(a)},methods:{sort(a){switch(a.label){case"tipo":a.order=="asc"?this.materiaisFiltered.sort((e,s)=>e.tipo>s.tipo?1:s.tipo>e.tipo?-1:0):this.materiaisFiltered.sort((e,s)=>e.tipo<s.tipo?1:s.tipo<e.tipo?-1:0);break;case"liga":a.order=="asc"?this.materiaisFiltered.sort((e,s)=>e.liga>s.liga?1:s.liga>e.liga?-1:0):this.materiaisFiltered.sort((e,s)=>e.liga<s.liga?1:s.liga<e.liga?-1:0);break;case"acabamento":a.order=="asc"?this.materiaisFiltered.sort((e,s)=>e.acabamento>s.acabamento?1:s.acabamento>e.acabamento?-1:0):this.materiaisFiltered.sort((e,s)=>e.acabamento<s.acabamento?1:s.acabamento<e.acabamento?-1:0);break;case"estado":a.order=="asc"?this.materiaisFiltered.sort((e,s)=>e.estado>s.estado?1:s.estado>e.estado?-1:0):this.materiaisFiltered.sort((e,s)=>e.estado<s.estado?1:s.estado<e.estado?-1:0);break}},searchFilter(){this.materiaisFiltered=[];let a=this.$refs.searchBar.value.split(" ");a!=""?this.materiais.forEach(e=>{let s=!0;a.forEach(c=>{e.tipo.includes(c)||e.liga.includes(c)||e.acabamento.includes(c)||e.dimensoes.includes(c)||(s=!1)}),s&&this.materiaisFiltered.push(e)}):this.materiais.forEach(e=>this.materiaisFiltered.push(e)),this.state!="Estado"&&(this.materiaisFiltered=this.materiaisFiltered.filter(e=>e.estado==this.state))},selectState(a){this.state=a,this.stateOpen=!1,this.searchFilter()},getMaterialToEdit(a){this.alterModalOpen=!0,this.materiais.forEach(e=>{if(e.id==a){this.editMaterial=e;let s=this.editMaterial.dimensoes.split("x");this.editMaterial.comprimento=s[0],this.editMaterial.largura=s[1],this.editMaterial.espessura=s[2]}})},getAllMateriais(){this.materiais=[],this.materiaisFiltered=[],this.state="Estado",k({method:"get",url:"http://localhost:3000/api/materiais",headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken}}).then(a=>{a.data.access_token&&this.$store.commit("setAccessToken",a.data.access_token),a.data.materiais.forEach(e=>this.materiais.push(e)),a.data.materiais.forEach(e=>this.materiaisFiltered.push(e))}).catch(a=>{a.code?(console.log(a.response.data),this.$emit("open-modal",a.response.data.message),a.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(a)})},createMaterial(a){this.createModalOpen=!1,this.$refs.hidemodal1.click(),k({method:"post",url:"http://localhost:3000/api/materiais",headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken},data:a}).then(e=>{e.data.access_token&&this.$store.commit("setAccessToken",e.data.access_token),this.getAllMateriais(),this.$emit("open-modal","Material criado com sucesso.")}).catch(e=>{e.code?(console.log(e.response.data),this.$emit("open-modal",e.response.data.message),e.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(e)})},toggleMaterial(a,e){k({method:"put",url:`http://localhost:3000/api/materiais/${a}/toggle`,headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken},data:{estado:e}}).then(s=>{s.data.access_token&&this.$store.commit("setAccessToken",s.data.access_token),this.materiais.forEach(c=>{c.id==a&&(c.estado=e)}),this.materiaisFiltered.forEach(c=>{c.id==a&&(c.estado=e)})}).catch(s=>{s.code?(console.log(s.response.data),this.$emit("open-modal",s.response.data.message),s.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(s)})},alterMaterial(a){this.createModalOpen=!1,this.$refs.hidemodal2.click(),k({method:"put",url:`http://localhost:3000/api/materiais/${a.id}`,headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken},data:a}).then(e=>{e.data.access_token&&this.$store.commit("setAccessToken",e.data.access_token),this.getAllMateriais(),this.$emit("open-modal","Material alterado com sucesso.")}).catch(e=>{e.code?(console.log(e.response.data),this.$emit("open-modal",e.response.data.message),e.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(e)})},openModal(a){this.$emit("open-modal",a)}}},Ve={class:"card"},Te={class:"card-header border-0 pt-6"},Ce={class:"card-title"},Ee={class:"d-flex align-items-center position-relative my-1"},Oe={class:"d-flex align-items-center position-relative my-1"},Fe={class:"custom-select"},Ue={key:0,class:"card-toolbar"},Le={class:"d-flex justify-content-end","data-kt-customer-table-toolbar":"base"},qe={class:"card-body pt-0"},De=["onClick"],Se=["onClick"],Ne=["onClick"],Be={ref:"hidemodal1",style:{display:"none"},"data-bs-toggle":"modal","data-bs-target":"#kt_modal_add_material"},Re={ref:"hidemodal2",style:{display:"none"},"data-bs-toggle":"modal","data-bs-target":"#kt_modal_alter_material"};function ze(a,e,s,c,i,r){const p=f("KTIcon"),d=f("Datatable"),m=f("AddMaterialModal"),I=f("AlterMaterialModal");return g(),b("div",Ve,[t("div",Te,[t("div",Ce,[t("div",Ee,[l(p,{"icon-name":"magnifier","icon-class":"fs-1 position-absolute ms-6"}),t("input",{type:"text",onInput:e[0]||(e[0]=(...o)=>r.searchFilter&&r.searchFilter(...o)),ref:"searchBar",class:"form-control form-control-solid w-250px ps-15",placeholder:"Procurar materiais"},null,544)]),t("div",Oe,[t("div",Fe,[t("div",{class:w(["selected",{open:i.stateOpen}]),onClick:e[1]||(e[1]=o=>i.stateOpen=!i.stateOpen)},h(this.state),3),t("div",{class:w(["items",{selectHide:!i.stateOpen}])},[t("div",{onClick:e[2]||(e[2]=o=>r.selectState("Ativo"))},h("Ativo")),t("div",{onClick:e[3]||(e[3]=o=>r.selectState("Inativo"))},h("Inativo"))],2)])])]),this.$store.getters.getUser.tipo!="user"?(g(),b("div",Ue,[t("div",Le,[t("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#kt_modal_add_material","data-backdrop":"false",onClick:e[4]||(e[4]=o=>this.createModalOpen=!0)},[l(p,{"icon-name":"plus","icon-class":"fs-2"}),u(" Adicionar Material ")])])])):M("",!0)]),t("div",qe,[l(d,{onOnSort:r.sort,data:this.materiaisFiltered,header:i.tableHeader,"enable-items-per-page-dropdown":!0,class:"datatable"},{tipo:n(({row:o})=>[u(h(o.tipo),1)]),liga:n(({row:o})=>[u(h(o.liga),1)]),acabamento:n(({row:o})=>[u(h(o.acabamento),1)]),dimensoes:n(({row:o})=>[u(h(o.dimensoes)+"mm ",1)]),estado:n(({row:o})=>[u(h(o.estado),1)]),actions:n(({row:o})=>[this.$store.getters.getUser.tipo!="user"?(g(),b("span",{key:0,title:"Alterar Material",onClick:y=>r.getMaterialToEdit(o.id),"data-bs-toggle":"modal","data-bs-target":"#kt_modal_alter_material",class:"material-icons"},"edit",8,De)):M("",!0),o.estado=="Inativo"&&this.$store.getters.getUser.tipo!="user"?(g(),b("span",{key:1,title:"Ativar Material",onClick:y=>r.toggleMaterial(o.id,"Ativo"),class:"material-icons"},"check_circle",8,Se)):M("",!0),o.estado=="Ativo"&&this.$store.getters.getUser.tipo!="user"?(g(),b("span",{key:2,title:"Desativar Material",onClick:y=>r.toggleMaterial(o.id,"Inativo"),class:"material-icons"},"cancel",8,Ne)):M("",!0)]),_:1},8,["onOnSort","data","header"])]),x(l(m,{onCreateMaterial:r.createMaterial,onOpenModal:r.openModal},null,8,["onCreateMaterial","onOpenModal"]),[[A,this.createModalOpen]]),x(l(I,{info:this.editMaterial,onAlterMaterial:r.alterMaterial,onOpenModal:r.openModal},null,8,["info","onAlterMaterial","onOpenModal"]),[[A,this.alterModalOpen]]),t("button",Be,null,512),t("button",Re,null,512)])}const je=$(Ae,[["render",ze],["__scopeId","data-v-90921057"]]);export{je as default};
