import{_ as E,j as _,k as r,l,m as s,A as n,w as p,a6 as S,x as d,p as g,F as R,n as U,v as h,J as A,a7 as C,a8 as $,r as L,z as T,a4 as N,af as M}from"./index.7a69f642.js";import{D as y}from"./KTDataTable.cf817d7d.js";import"./assets.4d6ed440.js";const w={name:"AddMaterialModal",components:{},data(){return{formInfo:{produto:"CHAPA",material:"",tipo:"",tipoOutro:"",subtipo:"",subtipoOutro:"",liga:"",ligaOutro:"",comprimento:"",largura:"",espessura:"",altura:"",dimensaoA:"",dimensaoB:""},produtosSearchOpen:!1,materiaisSearchOpen:!1,tiposSearchOpen:!1,subtiposSearchOpen:!1,ligasSearchOpen:!1,materialInfo:[{produto:"CHAPA",materiais:[{material:"A\xC7O",tipos:[{tipo:"BRUTO",ligas:["S235","S275","S355","OUTRO","N/A"]},{tipo:"ZINCOR",ligas:["N/A"]},{tipo:"CORTEN",ligas:["N/A"]},{tipo:"GALVA",ligas:["N/A"]},{tipo:"LACADO",ligas:["N/A"]},{tipo:"ANTIDERRAPANTE",ligas:["N/A"]},{tipo:"OUTRO",ligas:["N/A"]}]},{material:"INOX",tipos:[{tipo:"2B",ligas:["304","316","OUTRO","N/A"]},{tipo:"L\xC2MINA A QUENTE",ligas:["304","316","OUTRO","N/A"]},{tipo:"ESCOVADO",ligas:["304","316","OUTRO","N/A"]},{tipo:"POLIDO",ligas:["304","316","OUTRO","N/A"]}]},{material:"ALUM\xCDNIO",tipos:[{tipo:"BRUTO",ligas:["1050","1754","N/A"]},{tipo:"LACADO",ligas:["N/A"]},{tipo:"ANTIDERRAPANTE",ligas:["N/A"]}]}]},{produto:"PERFIL",materiais:[{material:"A\xC7O",tipos:[{tipo:"IPE",ligas:["S235","S275","S355","OUTRO","N/A"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]},{tipo:"HEA",ligas:["S235","S275","S355","OUTRO","N/A"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]},{tipo:"HEB",ligas:["S235","S275","S355","OUTRO","N/A"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]},{tipo:"HEM",ligas:["S235","S275","S355","OUTRO","N/A"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]},{tipo:"UPN",ligas:["S235","S275","S355","OUTRO","N/A"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]}]}]},{produto:"CANTONEIRA",materiais:[{material:"A\xC7O",tipos:[{tipo:"ABAS IGUAIS",ligas:["S235","S275","S355","OUTRO","N/A"]},{tipo:"ABAS DESIGUAIS",ligas:["S235","S275","S355","OUTRO","N/A"]}]}]},{produto:"TUBULAR",materiais:[{material:"A\xC7O",tipos:[{tipo:"BRUTO",ligas:["S235","S275","S355","OUTRO","N/A"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]},{tipo:"GALVA",ligas:["N/A"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]}]},{material:"INOX",tipos:[{tipo:"BRUTO",ligas:["304","316","OUTRO","N/A"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]},{tipo:"ESCOVADO",ligas:["304","316","OUTRO","N/A"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]},{tipo:"POLIDO",ligas:["304","316","OUTRO","N/A"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]}]}]}]}},computed:{getProdutos(){let e=[];return this.materialInfo.forEach(o=>e.push(o.produto)),e},getMateriais(){let e=[];return this.materialInfo.forEach(o=>{o.produto==this.formInfo.produto&&o.materiais.forEach(i=>e.push(i.material))}),e},getTipos(){let e=[];return this.materialInfo.forEach(o=>{o.produto==this.formInfo.produto&&o.materiais.forEach(i=>{i.material==this.formInfo.material&&i.tipos.forEach(m=>e.push(m.tipo))})}),e},getLigas(){let e=[];return this.materialInfo.forEach(o=>{o.produto==this.formInfo.produto&&o.materiais.forEach(i=>{i.material==this.formInfo.material&&i.tipos.forEach(m=>{m.tipo==this.formInfo.tipo&&m.ligas.forEach(a=>e.push(a))})})}),e},getSubtipos(){let e=[];return this.materialInfo.forEach(o=>{o.produto==this.formInfo.produto&&(this.formInfo.produto=="TUBULAR"||this.formInfo.produto=="PERFIL")&&o.materiais.forEach(i=>{i.material==this.formInfo.material&&i.tipos.forEach(m=>{m.tipo==this.formInfo.tipo&&m.subtipos.forEach(a=>e.push(a))})})}),e}},methods:{verifyMaterialData(){if(this.formInfo.produto.length==0||this.formInfo.material.length==0||this.formInfo.tipo.length==0||this.formInfo.liga.length==0||this.formInfo.liga=="OUTRO"&&this.formInfo.ligaOutro==""||this.formInfo.subtipo=="OUTRO"&&this.formInfo.subtipoOutro==""||this.formInfo.tipo=="OUTRO"&&this.formInfo.tipoOutro=="")return this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1;switch(this.formInfo.produto){case"CANTONEIRA":return this.formInfo.comprimento.length==0||this.formInfo.dimensaoA.length==0||this.formInfo.espessura.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.dimensaoA<=0||this.formInfo.dimensaoB<=0&&this.formInfo.dimensaoB!=""||this.formInfo.espessura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0;case"PERFIL":return this.formInfo.comprimento.length==0||this.formInfo.altura.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.altura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0;case"CHAPA":return this.formInfo.comprimento.length==0||this.formInfo.espessura.length==0||this.formInfo.largura.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.largura<=0||this.formInfo.espessura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0;case"TUBULAR":return this.formInfo.comprimento.length==0||this.formInfo.dimensaoA.length==0||this.formInfo.espessura.length==0||this.formInfo.subtipo.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.dimensaoA<=0||this.formInfo.dimensaoB<=0&&this.formInfo.dimensaoB!=""||this.formInfo.espessura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0}},createMaterial(){switch(this.formInfo.produto){case"CANTONEIRA":this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.dimensaoA,this.formInfo.dimensaoB!=""&&(this.formInfo.dimensoes+="x"+this.formInfo.dimensaoB),this.formInfo.dimensoes+="x"+this.formInfo.espessura;break;case"TUBULAR":this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.dimensaoA,this.formInfo.dimensaoB!=""&&(this.formInfo.dimensoes+="x"+this.formInfo.dimensaoB),this.formInfo.dimensoes+="x"+this.formInfo.espessura;break;case"CHAPA":this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.largura+"x"+this.formInfo.espessura;break;case"PERFIL":this.formInfo.altura=this.formInfo.subtipo,this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.altura;break}this.verifyMaterialData()&&(this.formInfo.liga=="OUTRO"&&(this.formInfo.liga=this.formInfo.ligaOutro),this.formInfo.subtipo=="OUTRO"&&(this.formInfo.subtipo=this.formInfo.subtipoOutro),this.formInfo.tipo=="OUTRO"&&(this.formInfo.tipo=this.formInfo.tipoOutro),this.formInfo.produto=="PERFIL"&&(this.formInfo.altura=this.formInfo.subtipo,this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.altura),this.$emit("create-material",this.formInfo),this.formInfo={produto:"CHAPA",material:"",tipo:"",tipoOutro:"",subtipo:"",subtipoOutro:"",liga:"",ligaOutro:"",comprimento:"",largura:"",espessura:"",altura:"",dimensaoA:"",dimensaoB:""},this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.ligasSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1)},chooseProduto(e){this.formInfo.produto=e,this.produtosSearchOpen=!1,this.formInfo.material="",this.formInfo.tipo="",this.formInfo.tipoOutro="",this.formInfo.subtipo="",this.formInfo.subtipoOutro="",this.formInfo.liga="",this.formInfo.ligaOutro="",this.formInfo.espessura="",this.formInfo.largura="",this.formInfo.comprimento="",this.formInfo.altura="",this.formInfo.dimensaoA="",this.formInfo.dimensaoB=""},chooseMaterial(e){this.formInfo.material=e,this.materiaisSearchOpen=!1,this.formInfo.tipo="",this.formInfo.tipoOutro="",this.formInfo.subtipo="",this.formInfo.subtipoOutro="",this.formInfo.liga="",this.formInfo.ligaOutro=""},chooseTipo(e){this.formInfo.tipo=e,this.tiposSearchOpen=!1,this.formInfo.subtipo="",this.formInfo.subtipoOutro="",this.formInfo.liga="",this.formInfo.ligaOutro="",(e!="ABAS DESIGUAIS"||e!="RETANGULO"||e!="OUTRO")&&(this.formInfo.dimensaoB=""),e!="OUTRO"&&(this.formInfo.tipoOutro="")},chooseSubtipo(e){this.formInfo.subtipo=e,this.subtiposSearchOpen=!1,e!="OUTRO"&&(this.formInfo.subtipoOutro="")},chooseLiga(e){this.formInfo.liga=e,this.ligasSearchOpen=!1,e!="OUTRO"&&(this.formInfo.ligaOutro="")},reset(e){(e.target.id=="kt_modal_add_material"||e.target.id=="kt_modal_add_material_close"||e.target.id=="kt_modal_add_material_close_btn"||e.target.parentElement.id=="kt_modal_add_material_close_btn")&&(this.formInfo={produto:"CHAPA",material:"",tipo:"",tipoOutro:"",subtipo:"",liga:"",comprimento:"",largura:"",espessura:"",altura:"",dimensaoA:"",dimensaoB:""},this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.ligasSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1)},openProdutos(){this.produtosSearchOpen=!0,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!1},openMateriais(){this.produtosSearchOpen=!1,this.materiaisSearchOpen=!0,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!1},openTipos(){this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!0,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!1},openSubtipos(){this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!0,this.ligasSearchOpen=!1},openLigas(){this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!0}}},O=e=>(C("data-v-edc52eda"),e=e(),$(),e),B={class:"modal-dialog modal-dialog-centered mw-650px"},D={class:"modal-header",id:"kt_modal_add_material_header"},P=O(()=>s("h2",{class:"fw-bold"},"Criar Material",-1)),x={class:"modal-body py-10 px-lg-17"},V={class:"scroll-y me-n7 pe-7",id:"kt_modal_add_material_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_customer_header","data-kt-scroll-wrappers":"#kt_modal_add_customer_scroll","data-kt-scroll-offset":"300px"},F={class:"fv-row mb-8"},q=O(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Produto",-1)),G={class:"searchbar"},H=["onClick"],z={class:"fv-row mb-8"},Q=O(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Material",-1)),W={class:"searchbar"},K=["onClick"],X={class:"fv-row mb-8"},j=O(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Tipo",-1)),Z={class:"searchbar"},J=["onClick"],Y={key:0,class:"fv-row mb-8"},oo=O(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Tipo",-1)),to={key:1,class:"fv-row mb-8"},eo=O(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Subtipo",-1)),so={class:"searchbar"},io=["onClick"],ao={key:2,class:"fv-row mb-8"},ro=O(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Subtipo",-1)),lo={key:3,class:"fv-row mb-8"},no=O(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Liga",-1)),fo={class:"searchbar"},mo=["onClick"],po={key:4,class:"fv-row mb-8"},ho=O(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Liga",-1)),uo={class:"fv-row mb-8"},co=O(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Comprimento (mm)",-1)),Oo={key:5,class:"fv-row mb-8"},Io=O(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Largura (mm)",-1)),bo={key:6,class:"fv-row mb-8"},go=O(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Dimens\xE3o A (mm)",-1)),_o={key:7,class:"fv-row mb-8"},Ao=O(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Dimens\xE3o B (mm)",-1)),So={key:8,class:"fv-row mb-8"},Ro=O(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Espessura (mm)",-1)),Uo={class:"modal-footer flex-center"},ko=O(()=>s("button",{type:"reset",id:"kt_modal_add_customer_cancel",class:"btn btn-light me-3"}," Limpar ",-1));function vo(e,o,i,m,a,f){const k=_("KTIcon"),u=_("el-input"),c=_("el-form-item"),v=_("el-form");return r(),l("div",{class:"modal fade",id:"kt_modal_add_material",ref:"addMaterialModalRef",tabindex:"-1","aria-hidden":"true",onClick:o[24]||(o[24]=(...t)=>f.reset&&f.reset(...t))},[s("div",B,[s("div",{class:"modal-content",onClick:o[23]||(o[23]=t=>{this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!1})},[s("div",D,[P,s("div",{id:"kt_modal_add_material_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary",onClick:o[0]||(o[0]=(...t)=>f.reset&&f.reset(...t))},[n(k,{id:"kt_modal_add_material_close_btn","icon-name":"cross","icon-class":"fs-1"})])]),n(v,{model:a.formInfo,ref:"formRef"},{default:p(()=>[s("div",x,[s("div",V,[s("div",F,[q,s("div",{class:"searchbar-container",onClick:o[2]||(o[2]=S(()=>{},["stop"]))},[s("div",G,[s("p",{type:"text",ref:"produtosSearchbar",onClick:o[1]||(o[1]=(...t)=>this.openProdutos&&this.openProdutos(...t))},d(this.formInfo.produto),513)]),s("div",{ref:"produtosResults",class:g(["searchbar-results",{"d-none":!a.produtosSearchOpen}])},[(r(!0),l(R,null,U(this.getProdutos,t=>(r(),l("div",{key:t,onClick:b=>f.chooseProduto(t)},d(t),9,H))),128))],2)])]),s("div",z,[Q,s("div",{class:"searchbar-container",onClick:o[4]||(o[4]=S(()=>{},["stop"]))},[s("div",W,[s("p",{type:"text",ref:"materiaisSearchbar",onClick:o[3]||(o[3]=(...t)=>this.openMateriais&&this.openMateriais(...t))},d(this.formInfo.material),513)]),s("div",{ref:"materiaisResults",class:g(["searchbar-results",{"d-none":!a.materiaisSearchOpen}])},[(r(!0),l(R,null,U(this.getMateriais,t=>(r(),l("div",{key:t,onClick:b=>f.chooseMaterial(t)},d(t),9,K))),128))],2)])]),s("div",X,[j,s("div",{class:"searchbar-container",onClick:o[6]||(o[6]=S(()=>{},["stop"]))},[s("div",Z,[s("p",{type:"text",ref:"tiposSearchbar",onClick:o[5]||(o[5]=(...t)=>this.openTipos&&this.openTipos(...t))},d(this.formInfo.tipo),513)]),s("div",{ref:"tiposResults",class:g(["searchbar-results",{"d-none":!a.tiposSearchOpen}])},[(r(!0),l(R,null,U(this.getTipos,t=>(r(),l("div",{key:t,onClick:b=>f.chooseTipo(t)},d(t),9,J))),128))],2)])]),this.formInfo.tipo=="OUTRO"?(r(),l("div",Y,[oo,n(c,{prop:"tipo"},{default:p(()=>[n(u,{type:"text",placeholder:"Tipo",modelValue:this.formInfo.tipoOutro,"onUpdate:modelValue":o[7]||(o[7]=t=>this.formInfo.tipoOutro=t),onInput:o[8]||(o[8]=t=>this.formInfo.tipoOutro=this.formInfo.tipoOutro.toUpperCase())},null,8,["modelValue"])]),_:1})])):h("",!0),this.formInfo.produto=="TUBULAR"||this.formInfo.produto=="PERFIL"?(r(),l("div",to,[eo,s("div",{class:"searchbar-container",onClick:o[10]||(o[10]=S(()=>{},["stop"]))},[s("div",so,[s("p",{type:"text",ref:"subtiposSearchbar",onClick:o[9]||(o[9]=(...t)=>this.openSubtipos&&this.openSubtipos(...t))},d(this.formInfo.subtipo),513)]),s("div",{ref:"subtiposResults",class:g(["searchbar-results",{"d-none":!a.subtiposSearchOpen}])},[(r(!0),l(R,null,U(this.getSubtipos,t=>(r(),l("div",{key:t,onClick:b=>f.chooseSubtipo(t)},d(t),9,io))),128))],2)])])):h("",!0),this.formInfo.subtipo=="OUTRO"?(r(),l("div",ao,[ro,n(c,{prop:"subtipo"},{default:p(()=>[n(u,{type:"text",placeholder:"Subtipo",modelValue:this.formInfo.subtipoOutro,"onUpdate:modelValue":o[11]||(o[11]=t=>this.formInfo.subtipoOutro=t),onInput:o[12]||(o[12]=t=>this.formInfo.subtipoOutro=this.formInfo.subtipoOutro.toUpperCase())},null,8,["modelValue"])]),_:1})])):h("",!0),this.getLigas.length>0||this.formInfo.tipo==""?(r(),l("div",lo,[no,s("div",{class:"searchbar-container",onClick:o[14]||(o[14]=S(()=>{},["stop"]))},[s("div",fo,[s("p",{type:"text",ref:"ligasSearchbar",onClick:o[13]||(o[13]=(...t)=>this.openLigas&&this.openLigas(...t))},d(this.formInfo.liga),513)]),s("div",{ref:"ligasResults",class:g(["searchbar-results",{"d-none":!a.ligasSearchOpen}])},[(r(!0),l(R,null,U(this.getLigas,t=>(r(),l("div",{key:t,onClick:b=>f.chooseLiga(t)},d(t),9,mo))),128))],2)])])):h("",!0),this.formInfo.liga=="OUTRO"?(r(),l("div",po,[ho,n(c,{prop:"liga"},{default:p(()=>[n(u,{type:"text",placeholder:"Liga",modelValue:this.formInfo.ligaOutro,"onUpdate:modelValue":o[15]||(o[15]=t=>this.formInfo.ligaOutro=t),onInput:o[16]||(o[16]=t=>this.formInfo.ligaOutro=this.formInfo.ligaOutro.toUpperCase())},null,8,["modelValue"])]),_:1})])):h("",!0),s("div",uo,[co,n(c,{prop:"comprimento"},{default:p(()=>[n(u,{modelValue:a.formInfo.comprimento,"onUpdate:modelValue":o[17]||(o[17]=t=>a.formInfo.comprimento=t),type:"number",placeholder:"Comprimento"},null,8,["modelValue"])]),_:1})]),this.formInfo.produto=="CHAPA"?(r(),l("div",Oo,[Io,n(c,{prop:"largura"},{default:p(()=>[n(u,{modelValue:a.formInfo.largura,"onUpdate:modelValue":o[18]||(o[18]=t=>a.formInfo.largura=t),type:"number",placeholder:"Largura"},null,8,["modelValue"])]),_:1})])):h("",!0),this.formInfo.produto=="TUBULAR"||this.formInfo.produto=="CANTONEIRA"?(r(),l("div",bo,[go,n(c,{prop:"dimensaoA"},{default:p(()=>[n(u,{modelValue:a.formInfo.dimensaoA,"onUpdate:modelValue":o[19]||(o[19]=t=>a.formInfo.dimensaoA=t),type:"number",placeholder:"Dimens\xE3o A"},null,8,["modelValue"])]),_:1})])):h("",!0),this.formInfo.produto=="TUBULAR"&&this.formInfo.subtipo=="RETANGULO"||this.formInfo.produto=="TUBULAR"&&this.formInfo.subtipo=="OUTRO"||this.formInfo.produto=="CANTONEIRA"&&this.formInfo.tipo=="ABAS DESIGUAIS"?(r(),l("div",_o,[Ao,n(c,{prop:"dimensaoB"},{default:p(()=>[n(u,{modelValue:a.formInfo.dimensaoB,"onUpdate:modelValue":o[20]||(o[20]=t=>a.formInfo.dimensaoB=t),type:"number",placeholder:"Dimens\xE3o B"},null,8,["modelValue"])]),_:1})])):h("",!0),this.formInfo.produto!="PERFIL"?(r(),l("div",So,[Ro,n(c,{prop:"espessura"},{default:p(()=>[n(u,{modelValue:a.formInfo.espessura,"onUpdate:modelValue":o[21]||(o[21]=t=>a.formInfo.espessura=t),type:"number",placeholder:"Espessura"},null,8,["modelValue"])]),_:1})])):h("",!0)])]),s("div",Uo,[ko,s("div",{id:"kt_modal_add_customer_cancel",class:"btn btn-lg btn-primary",onClick:o[22]||(o[22]=(...t)=>f.createMaterial&&f.createMaterial(...t))},[A(" Criar "),n(k,{"icon-name":"arrow-right","icon-class":"fs-2 me-2 me-0",class:"override-mr0"})])])]),_:1},8,["model"])])])],512)}const To=E(w,[["render",vo],["__scopeId","data-v-edc52eda"]]);const Eo={name:"AlterMaterialModal",components:{},props:{info:{type:Object,required:!0}},data(){return{formInfo:{produto:"",material:"",tipo:"",tipoOutro:"",subtipo:"",subtipoOutro:"",liga:"",ligaOutro:"",comprimento:"",largura:"",espessura:"",altura:"",dimensaoA:"",dimensaoB:""},produtosSearchOpen:!1,materiaisSearchOpen:!1,tiposSearchOpen:!1,subtiposSearchOpen:!1,ligasSearchOpen:!1,materialInfo:[{produto:"CHAPA",materiais:[{material:"A\xC7O",tipos:[{tipo:"BRUTO",ligas:["S235","S275","S355","OUTRO","N/A"]},{tipo:"ZINCOR",ligas:["N/A"]},{tipo:"CORTEN",ligas:["N/A"]},{tipo:"GALVA",ligas:["N/A"]},{tipo:"LACADO",ligas:["N/A"]},{tipo:"ANTIDERRAPANTE",ligas:["N/A"]},{tipo:"OUTRO",ligas:["N/A"]}]},{material:"INOX",tipos:[{tipo:"2B",ligas:["304","316","OUTRO","N/A"]},{tipo:"L\xC2MINA A QUENTE",ligas:["304","316","OUTRO","N/A"]},{tipo:"ESCOVADO",ligas:["304","316","OUTRO","N/A"]},{tipo:"POLIDO",ligas:["304","316","OUTRO","N/A"]}]},{material:"ALUM\xCDNIO",tipos:[{tipo:"BRUTO",ligas:["1050","1754","N/A"]},{tipo:"LACADO",ligas:["N/A"]},{tipo:"ANTIDERRAPANTE",ligas:["N/A"]}]}]},{produto:"PERFIL",materiais:[{material:"A\xC7O",tipos:[{tipo:"IPE",ligas:["S235","S275","S355","OUTRO","N/A"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]},{tipo:"HEA",ligas:["S235","S275","S355","OUTRO","N/A"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]},{tipo:"HEB",ligas:["S235","S275","S355","OUTRO","N/A"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]},{tipo:"HEM",ligas:["S235","S275","S355","OUTRO","N/A"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]},{tipo:"UPN",ligas:["S235","S275","S355","OUTRO","N/A"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]}]}]},{produto:"CANTONEIRA",materiais:[{material:"A\xC7O",tipos:[{tipo:"ABAS IGUAIS",ligas:["S235","S275","S355","OUTRO","N/A"]},{tipo:"ABAS DESIGUAIS",ligas:["S235","S275","S355","OUTRO","N/A"]}]}]},{produto:"TUBULAR",materiais:[{material:"A\xC7O",tipos:[{tipo:"BRUTO",ligas:["S235","S275","S355","OUTRO","N/A"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]},{tipo:"GALVA",ligas:["N/A"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]}]},{material:"INOX",tipos:[{tipo:"BRUTO",ligas:["304","316","OUTRO","N/A"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]},{tipo:"ESCOVADO",ligas:["304","316","OUTRO","N/A"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]},{tipo:"POLIDO",ligas:["304","316","OUTRO","N/A"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]}]}]}]}},mounted(){this.formInfo=this.info},computed:{getProdutos(){let e=[];return this.materialInfo.forEach(o=>e.push(o.produto)),e},getMateriais(){let e=[];return this.materialInfo.forEach(o=>{o.produto==this.formInfo.produto&&o.materiais.forEach(i=>e.push(i.material))}),e},getTipos(){let e=[];return this.materialInfo.forEach(o=>{o.produto==this.formInfo.produto&&o.materiais.forEach(i=>{i.material==this.formInfo.material&&i.tipos.forEach(m=>e.push(m.tipo))})}),e},getLigas(){let e=[];return this.materialInfo.forEach(o=>{o.produto==this.formInfo.produto&&o.materiais.forEach(i=>{i.material==this.formInfo.material&&i.tipos.forEach(m=>{m.tipo==this.formInfo.tipo&&m.ligas.forEach(a=>e.push(a))})})}),e},getSubtipos(){let e=[];return this.materialInfo.forEach(o=>{o.produto==this.formInfo.produto&&(this.formInfo.produto=="TUBULAR"||this.formInfo.produto=="PERFIL")&&o.materiais.forEach(i=>{i.material==this.formInfo.material&&i.tipos.forEach(m=>{m.tipo==this.formInfo.tipo&&m.subtipos.forEach(a=>e.push(a))})})}),e}},methods:{verifyMaterialData(){if(this.formInfo.produto.length==0||this.formInfo.material.length==0||this.formInfo.tipo.length==0||this.formInfo.liga.length==0||this.formInfo.liga=="OUTRO"&&this.formInfo.ligaOutro==""||this.formInfo.subtipo=="OUTRO"&&this.formInfo.subtipoOutro==""||this.formInfo.tipo=="OUTRO"&&this.formInfo.tipoOutro=="")return this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1;switch(this.formInfo.produto){case"CANTONEIRA":return this.formInfo.comprimento.length==0||this.formInfo.dimensaoA.length==0||this.formInfo.espessura.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.dimensaoA<=0||this.formInfo.dimensaoB<=0&&this.formInfo.dimensaoB!=""||this.formInfo.espessura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0;case"PERFIL":return this.formInfo.comprimento.length==0||this.formInfo.altura.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.altura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0;case"CHAPA":return this.formInfo.comprimento.length==0||this.formInfo.espessura.length==0||this.formInfo.largura.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.largura<=0||this.formInfo.espessura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0;case"TUBULAR":return this.formInfo.comprimento.length==0||this.formInfo.dimensaoA.length==0||this.formInfo.espessura.length==0||this.formInfo.subtipo.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.dimensaoA<=0||this.formInfo.dimensaoB<=0&&this.formInfo.dimensaoB!=""||this.formInfo.espessura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0}},alterarMaterial(){switch(this.formInfo.produto){case"CANTONEIRA":this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.dimensaoA,this.formInfo.dimensaoB!=""&&(this.formInfo.dimensoes+="x"+this.formInfo.dimensaoB),this.formInfo.dimensoes+="x"+this.formInfo.espessura;break;case"TUBULAR":this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.dimensaoA,this.formInfo.dimensaoB!=""&&(this.formInfo.dimensoes+="x"+this.formInfo.dimensaoB),this.formInfo.dimensoes+="x"+this.formInfo.espessura;break;case"CHAPA":this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.largura+"x"+this.formInfo.espessura;break;case"PERFIL":this.formInfo.altura=this.formInfo.subtipo,this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.altura;break}this.verifyMaterialData()&&(this.formInfo.liga=="OUTRO"&&(this.formInfo.liga=this.formInfo.ligaOutro),this.formInfo.subtipo=="OUTRO"&&(this.formInfo.subtipo=this.formInfo.subtipoOutro),this.formInfo.tipo=="OUTRO"&&(this.formInfo.tipo=this.formInfo.tipoOutro),this.formInfo.produto=="PERFIL"&&(this.formInfo.altura=this.formInfo.subtipo,this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.altura),this.$emit("alter-material",this.formInfo),this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.ligasSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1)},chooseProduto(e){this.formInfo.produto=e,this.produtosSearchOpen=!1,this.formInfo.material="",this.formInfo.tipo="",this.formInfo.tipoOutro="",this.formInfo.subtipo="",this.formInfo.subtipoOutro="",this.formInfo.liga="",this.formInfo.ligaOutro="",this.formInfo.espessura="",this.formInfo.largura="",this.formInfo.comprimento="",this.formInfo.altura="",this.formInfo.dimensaoA="",this.formInfo.dimensaoB=""},chooseMaterial(e){this.formInfo.material=e,this.materiaisSearchOpen=!1,this.formInfo.tipo="",this.formInfo.tipoOutro="",this.formInfo.subtipo="",this.formInfo.subtipoOutro="",this.formInfo.liga="",this.formInfo.ligaOutro=""},chooseTipo(e){this.formInfo.tipo=e,this.tiposSearchOpen=!1,this.formInfo.subtipo="",this.formInfo.subtipoOutro="",this.formInfo.liga="",this.formInfo.ligaOutro="",(e!="ABAS DESIGUAIS"||e!="RETANGULO"||e!="OUTRO")&&(this.formInfo.dimensaoB=""),e!="OUTRO"&&(this.formInfo.tipoOutro="")},chooseSubtipo(e){this.formInfo.subtipo=e,this.subtiposSearchOpen=!1,e!="OUTRO"&&(this.formInfo.subtipoOutro="")},chooseLiga(e){this.formInfo.liga=e,this.ligasSearchOpen=!1,e!="OUTRO"&&(this.formInfo.ligaOutro="")},reset(e){(e.target.id=="kt_modal_alter_material"||e.target.id=="kt_modal_alter_material_close"||e.target.id=="kt_modal_alter_material_close_btn"||e.target.parentElement.id=="kt_modal_alter_material_close_btn"||e.target.id=="alter_material_reset_btn")&&(this.formInfo={...this.info},this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.ligasSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1)},openProdutos(){this.produtosSearchOpen=!0,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!1},openMateriais(){this.produtosSearchOpen=!1,this.materiaisSearchOpen=!0,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!1},openTipos(){this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!0,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!1},openSubtipos(){this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!0,this.ligasSearchOpen=!1},openLigas(){this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!0}},watch:{info:function(e){this.formInfo={...e}}}},I=e=>(C("data-v-95d2dfc4"),e=e(),$(),e),No={class:"modal-dialog modal-dialog-centered mw-650px"},Mo={class:"modal-header",id:"kt_modal_alter_material_header"},Co=I(()=>s("h2",{class:"fw-bold"},"Alterar Material",-1)),$o={class:"modal-body py-10 px-lg-17"},Lo={class:"scroll-y me-n7 pe-7",id:"kt_modal_alter_material_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_customer_header","data-kt-scroll-wrappers":"#kt_modal_add_customer_scroll","data-kt-scroll-offset":"300px"},yo={class:"fv-row mb-8"},wo=I(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Produto",-1)),Bo={class:"searchbar"},Do=["onClick"],Po={class:"fv-row mb-8"},xo=I(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Material",-1)),Vo={class:"searchbar"},Fo=["onClick"],qo={class:"fv-row mb-8"},Go=I(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Tipo",-1)),Ho={class:"searchbar"},zo=["onClick"],Qo={key:0,class:"fv-row mb-8"},Wo=I(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Tipo",-1)),Ko={key:1,class:"fv-row mb-8"},Xo=I(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Subtipo",-1)),jo={class:"searchbar"},Zo=["onClick"],Jo={key:2,class:"fv-row mb-8"},Yo=I(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Subtipo",-1)),ot={key:3,class:"fv-row mb-8"},tt=I(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Liga",-1)),et={class:"searchbar"},st=["onClick"],it={key:4,class:"fv-row mb-8"},at=I(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Liga",-1)),rt={class:"fv-row mb-8"},lt=I(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Comprimento (mm)",-1)),nt={key:5,class:"fv-row mb-8"},ft=I(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Largura (mm)",-1)),mt={key:6,class:"fv-row mb-8"},dt=I(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Dimens\xE3o A (mm)",-1)),pt={key:7,class:"fv-row mb-8"},ht=I(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Dimens\xE3o B (mm)",-1)),ut={key:8,class:"fv-row mb-8"},ct=I(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Espessura (mm)",-1)),Ot={class:"modal-footer flex-center"};function It(e,o,i,m,a,f){const k=_("KTIcon"),u=_("el-input"),c=_("el-form-item"),v=_("el-form");return r(),l("div",{class:"modal fade",id:"kt_modal_alter_material",ref:"alterMaterialModalRef",tabindex:"-1","aria-hidden":"true",onClick:o[25]||(o[25]=(...t)=>f.reset&&f.reset(...t))},[s("div",No,[s("div",{class:"modal-content",onClick:o[24]||(o[24]=t=>{this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!1})},[s("div",Mo,[Co,s("div",{id:"kt_modal_alter_material_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary",onClick:o[0]||(o[0]=(...t)=>f.reset&&f.reset(...t))},[n(k,{"icon-name":"cross","icon-class":"fs-1"})])]),n(v,{model:a.formInfo,ref:"formRef"},{default:p(()=>[s("div",$o,[s("div",Lo,[s("div",yo,[wo,s("div",{class:"searchbar-container",onClick:o[2]||(o[2]=S(()=>{},["stop"]))},[s("div",Bo,[s("p",{type:"text",ref:"produtosSearchbar",onClick:o[1]||(o[1]=(...t)=>this.openProdutos&&this.openProdutos(...t))},d(this.formInfo.produto),513)]),s("div",{ref:"produtosResults",class:g(["searchbar-results",{"d-none":!a.produtosSearchOpen}])},[(r(!0),l(R,null,U(this.getProdutos,t=>(r(),l("div",{key:t,onClick:b=>f.chooseProduto(t)},d(t),9,Do))),128))],2)])]),s("div",Po,[xo,s("div",{class:"searchbar-container",onClick:o[4]||(o[4]=S(()=>{},["stop"]))},[s("div",Vo,[s("p",{type:"text",ref:"materiaisSearchbar",onClick:o[3]||(o[3]=(...t)=>this.openMateriais&&this.openMateriais(...t))},d(this.formInfo.material),513)]),s("div",{ref:"materiaisResults",class:g(["searchbar-results",{"d-none":!a.materiaisSearchOpen}])},[(r(!0),l(R,null,U(this.getMateriais,t=>(r(),l("div",{key:t,onClick:b=>f.chooseMaterial(t)},d(t),9,Fo))),128))],2)])]),s("div",qo,[Go,s("div",{class:"searchbar-container",onClick:o[6]||(o[6]=S(()=>{},["stop"]))},[s("div",Ho,[s("p",{type:"text",ref:"tiposSearchbar",onClick:o[5]||(o[5]=(...t)=>this.openTipos&&this.openTipos(...t))},d(this.formInfo.tipo),513)]),s("div",{ref:"tiposResults",class:g(["searchbar-results",{"d-none":!a.tiposSearchOpen}])},[(r(!0),l(R,null,U(this.getTipos,t=>(r(),l("div",{key:t,onClick:b=>f.chooseTipo(t)},d(t),9,zo))),128))],2)])]),this.formInfo.tipo=="OUTRO"?(r(),l("div",Qo,[Wo,n(c,{prop:"tipo"},{default:p(()=>[n(u,{type:"text",placeholder:"Tipo",modelValue:this.formInfo.tipoOutro,"onUpdate:modelValue":o[7]||(o[7]=t=>this.formInfo.tipoOutro=t),onInput:o[8]||(o[8]=t=>this.formInfo.tipoOutro=this.formInfo.tipoOutro.toUpperCase())},null,8,["modelValue"])]),_:1})])):h("",!0),this.formInfo.produto=="TUBULAR"||this.formInfo.produto=="PERFIL"?(r(),l("div",Ko,[Xo,s("div",{class:"searchbar-container",onClick:o[10]||(o[10]=S(()=>{},["stop"]))},[s("div",jo,[s("p",{type:"text",ref:"subtiposSearchbar",onClick:o[9]||(o[9]=(...t)=>this.openSubtipos&&this.openSubtipos(...t))},d(this.formInfo.subtipo),513)]),s("div",{ref:"subtiposResults",class:g(["searchbar-results",{"d-none":!a.subtiposSearchOpen}])},[(r(!0),l(R,null,U(this.getSubtipos,t=>(r(),l("div",{key:t,onClick:b=>f.chooseSubtipo(t)},d(t),9,Zo))),128))],2)])])):h("",!0),this.formInfo.subtipo=="OUTRO"?(r(),l("div",Jo,[Yo,n(c,{prop:"subtipo"},{default:p(()=>[n(u,{type:"text",placeholder:"Subtipo",modelValue:this.formInfo.subtipoOutro,"onUpdate:modelValue":o[11]||(o[11]=t=>this.formInfo.subtipoOutro=t),onInput:o[12]||(o[12]=t=>this.formInfo.subtipoOutro=this.formInfo.subtipoOutro.toUpperCase())},null,8,["modelValue"])]),_:1})])):h("",!0),this.getLigas.length>0||this.formInfo.tipo==""?(r(),l("div",ot,[tt,s("div",{class:"searchbar-container",onClick:o[14]||(o[14]=S(()=>{},["stop"]))},[s("div",et,[s("p",{type:"text",ref:"ligasSearchbar",onClick:o[13]||(o[13]=(...t)=>this.openLigas&&this.openLigas(...t))},d(this.formInfo.liga),513)]),s("div",{ref:"ligasResults",class:g(["searchbar-results",{"d-none":!a.ligasSearchOpen}])},[(r(!0),l(R,null,U(this.getLigas,t=>(r(),l("div",{key:t,onClick:b=>f.chooseLiga(t)},d(t),9,st))),128))],2)])])):h("",!0),this.formInfo.liga=="OUTRO"?(r(),l("div",it,[at,n(c,{prop:"liga"},{default:p(()=>[n(u,{type:"text",placeholder:"Liga",modelValue:this.formInfo.ligaOutro,"onUpdate:modelValue":o[15]||(o[15]=t=>this.formInfo.ligaOutro=t),onInput:o[16]||(o[16]=t=>this.formInfo.ligaOutro=this.formInfo.ligaOutro.toUpperCase())},null,8,["modelValue"])]),_:1})])):h("",!0),s("div",rt,[lt,n(c,{prop:"comprimento"},{default:p(()=>[n(u,{modelValue:a.formInfo.comprimento,"onUpdate:modelValue":o[17]||(o[17]=t=>a.formInfo.comprimento=t),type:"number",placeholder:"Comprimento"},null,8,["modelValue"])]),_:1})]),this.formInfo.produto=="CHAPA"?(r(),l("div",nt,[ft,n(c,{prop:"largura"},{default:p(()=>[n(u,{modelValue:a.formInfo.largura,"onUpdate:modelValue":o[18]||(o[18]=t=>a.formInfo.largura=t),type:"number",placeholder:"Largura"},null,8,["modelValue"])]),_:1})])):h("",!0),this.formInfo.produto=="TUBULAR"||this.formInfo.produto=="CANTONEIRA"?(r(),l("div",mt,[dt,n(c,{prop:"dimensaoA"},{default:p(()=>[n(u,{modelValue:a.formInfo.dimensaoA,"onUpdate:modelValue":o[19]||(o[19]=t=>a.formInfo.dimensaoA=t),type:"number",placeholder:"Dimens\xE3o A"},null,8,["modelValue"])]),_:1})])):h("",!0),this.formInfo.produto=="TUBULAR"&&this.formInfo.subtipo=="RETANGULO"||this.formInfo.produto=="TUBULAR"&&this.formInfo.subtipo=="OUTRO"||this.formInfo.produto=="CANTONEIRA"&&this.formInfo.tipo=="ABAS DESIGUAIS"?(r(),l("div",pt,[ht,n(c,{prop:"dimensaoB"},{default:p(()=>[n(u,{modelValue:a.formInfo.dimensaoB,"onUpdate:modelValue":o[20]||(o[20]=t=>a.formInfo.dimensaoB=t),type:"number",placeholder:"Dimens\xE3o B"},null,8,["modelValue"])]),_:1})])):h("",!0),this.formInfo.produto!="PERFIL"?(r(),l("div",ut,[ct,n(c,{prop:"espessura"},{default:p(()=>[n(u,{modelValue:a.formInfo.espessura,"onUpdate:modelValue":o[21]||(o[21]=t=>a.formInfo.espessura=t),type:"number",placeholder:"Espessura"},null,8,["modelValue"])]),_:1})])):h("",!0)])]),s("div",Ot,[s("div",{id:"alter_material_reset_btn",onClick:o[22]||(o[22]=(...t)=>f.reset&&f.reset(...t)),class:"btn btn-light me-3"}," Repor "),s("div",{id:"kt_modal_add_customer_cancel",class:"btn btn-lg btn-primary",onClick:o[23]||(o[23]=(...t)=>f.alterarMaterial&&f.alterarMaterial(...t))},[A(" Alterar "),n(k,{"icon-name":"arrow-right","icon-class":"fs-2 me-2 me-0",class:"override-mr0"})])])]),_:1},8,["model"])])])],512)}const bt=E(Eo,[["render",It],["__scopeId","data-v-95d2dfc4"]]);const gt={name:"Materiais",components:{Datatable:y,AddMaterialModal:To,AlterMaterialModal:bt},data(){return{materiais:[],materiaisFiltered:[],stateOpen:!1,state:"Estado",createModalOpen:!1,alterModalOpen:!1,editMaterial:{id:"",liga:"",dimensoes:"",tipo:"",subtipo:"",material:"",produto:""},tableHeader:[]}},created(){this.$store.getters.getUser.id?this.getAllMateriais():this.$router.push({name:"login"})},mounted(){let e=[{columnName:"Produto",columnLabel:"produto",sortEnabled:!0,columnWidth:140},{columnName:"Material",columnLabel:"material",sortEnabled:!0,columnWidth:140},{columnName:"Tipo",columnLabel:"tipo",sortEnabled:!0,columnWidth:140},{columnName:"Subtipo",columnLabel:"subtipo",sortEnabled:!0,columnWidth:140},{columnName:"Liga",columnLabel:"liga",sortEnabled:!0,columnWidth:140},{columnName:"Dimens\xF5es",columnLabel:"dimensoes",sortEnabled:!1,columnWidth:170},{columnName:"Estado",columnLabel:"estado",sortEnabled:!0,columnWidth:80}];this.$store.getters.getUser.tipo!="user"&&e.push({columnName:"Actions",columnLabel:"actions",sortEnabled:!1,columnWidth:160}),this.tableHeader=L(e)},methods:{sort(e){switch(e.label){case"produto":e.order=="asc"?this.materiaisFiltered.sort((o,i)=>o.produto>i.produto?1:i.produto>o.produto?-1:0):this.materiaisFiltered.sort((o,i)=>o.produto<i.produto?1:i.produto<o.produto?-1:0);break;case"material":e.order=="asc"?this.materiaisFiltered.sort((o,i)=>o.material>i.material?1:i.material>o.material?-1:0):this.materiaisFiltered.sort((o,i)=>o.material<i.material?1:i.material<o.material?-1:0);break;case"tipo":e.order=="asc"?this.materiaisFiltered.sort((o,i)=>o.tipo>i.tipo?1:i.tipo>o.tipo?-1:0):this.materiaisFiltered.sort((o,i)=>o.tipo<i.tipo?1:i.tipo<o.tipo?-1:0);break;case"liga":e.order=="asc"?this.materiaisFiltered.sort((o,i)=>o.liga>i.liga?1:i.liga>o.liga?-1:0):this.materiaisFiltered.sort((o,i)=>o.liga<i.liga?1:i.liga<o.liga?-1:0);break;case"subtipo":e.order=="asc"?this.materiaisFiltered.sort((o,i)=>o.subtipo>i.subtipo?1:i.subtipo>o.subtipo?-1:0):this.materiaisFiltered.sort((o,i)=>o.subtipo<i.subtipo?1:i.subtipo<o.subtipo?-1:0);break;case"estado":e.order=="asc"?this.materiaisFiltered.sort((o,i)=>o.estado>i.estado?1:i.estado>o.estado?-1:0):this.materiaisFiltered.sort((o,i)=>o.estado<i.estado?1:i.estado<o.estado?-1:0);break}},searchFilter(){this.materiaisFiltered=[];let e=this.$refs.searchBar.value.split(" ");e!=""?this.materiais.forEach(o=>{let i=!1;e.forEach(m=>{(o.tipo.includes(m)||o.liga.includes(m)||o.subtipo.includes(m)||o.dimensoes.includes(m)||o.material.includes(m)||o.produto.includes(m))&&(i=!0)}),i&&this.materiaisFiltered.push(o)}):this.materiais.forEach(o=>this.materiaisFiltered.push(o)),this.state!="Estado"&&this.state!="Todos"&&(this.materiaisFiltered=this.materiaisFiltered.filter(o=>o.estado==this.state))},selectState(e){this.state=e,this.stateOpen=!1,this.searchFilter()},getMaterialToEdit(e){this.alterModalOpen=!0,this.materiais.forEach(o=>{if(o.id==e){this.editMaterial=o;let i=this.editMaterial.dimensoes.split("x");switch(this.editMaterial.produto){case"TUBULAR":i.length==3?(this.editMaterial.comprimento=i[0],this.editMaterial.dimensaoA=i[1],this.editMaterial.espessura=i[2]):(this.editMaterial.comprimento=i[0],this.editMaterial.dimensaoA=i[1],this.editMaterial.dimensaoB=i[2],this.editMaterial.espessura=i[3]);break;case"CHAPA":this.editMaterial.comprimento=i[0],this.editMaterial.largura=i[1],this.editMaterial.espessura=i[2];break;case"CANTONEIRA":i.length==3?(this.editMaterial.comprimento=i[0],this.editMaterial.dimensaoA=i[1],this.editMaterial.espessura=i[2]):(this.editMaterial.comprimento=i[0],this.editMaterial.dimensaoA=i[1],this.editMaterial.dimensaoB=i[2],this.editMaterial.espessura=i[3]);break;case"PERFIL":this.editMaterial.comprimento=i[0],this.editMaterial.altura=i[1];break}}})},getAllMateriais(){this.materiais=[],this.materiaisFiltered=[],this.state="Estado",T({method:"get",url:"http://64.225.109.57:4000/api/materiais",headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken}}).then(e=>{e.data.access_token&&this.$store.commit("setAccessToken",e.data.access_token),e.data.materiais.forEach(o=>this.materiais.push(o)),e.data.materiais.forEach(o=>this.materiaisFiltered.push(o))}).catch(e=>{e.code?(console.log(e.response.data),this.$emit("open-modal",e.response.data.message),e.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(e)})},createMaterial(e){this.createModalOpen=!1,this.$refs.hidemodal1.click(),T({method:"post",url:"http://64.225.109.57:4000/api/materiais",headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken},data:e}).then(o=>{o.data.access_token&&this.$store.commit("setAccessToken",o.data.access_token),this.getAllMateriais(),this.$emit("open-modal","Material criado com sucesso.")}).catch(o=>{o.code?(console.log(o.response.data),this.$emit("open-modal",o.response.data.message),o.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(o)})},toggleMaterial(e,o){T({method:"put",url:`http://64.225.109.57:4000/api/materiais/${e}/toggle`,headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken},data:{estado:o}}).then(i=>{i.data.access_token&&this.$store.commit("setAccessToken",i.data.access_token),this.materiais.forEach(m=>{m.id==e&&(m.estado=o)}),this.materiaisFiltered.forEach(m=>{m.id==e&&(m.estado=o)})}).catch(i=>{i.code?(console.log(i.response.data),this.$emit("open-modal",i.response.data.message),i.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(i)})},alterMaterial(e){this.createModalOpen=!1,this.$refs.hidemodal2.click(),T({method:"put",url:`http://64.225.109.57:4000/api/materiais/${e.id}`,headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken},data:e}).then(o=>{o.data.access_token&&this.$store.commit("setAccessToken",o.data.access_token),this.getAllMateriais(),this.$emit("open-modal","Material alterado com sucesso.")}).catch(o=>{o.code?(console.log(o.response.data),this.$emit("open-modal",o.response.data.message),o.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(o)})},deleteMaterial(e){T({method:"delete",url:`http://64.225.109.57:4000/api/materiais/${e}`,headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken}}).then(o=>{o.data.access_token&&this.$store.commit("setAccessToken",o.data.access_token),this.getAllMateriais(),this.$emit("open-modal","Material eliminado com sucesso.")}).catch(o=>{o.code?(console.log(o.response.data),this.$emit("open-modal",o.response.data.message),o.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(o)})},openModal(e){this.$emit("open-modal",e)}}},_t={class:"card"},At={class:"card-header border-0 pt-6"},St={class:"card-title"},Rt={class:"d-flex align-items-center position-relative my-1"},Ut={class:"d-flex align-items-center position-relative my-1"},kt={class:"custom-select"},vt={key:0,class:"card-toolbar"},Tt={class:"d-flex justify-content-end","data-kt-customer-table-toolbar":"base"},Et={class:"card-body pt-0"},Nt=["onClick"],Mt=["onClick"],Ct=["onClick"],$t=["onClick"],Lt={ref:"hidemodal1",style:{display:"none"},"data-bs-toggle":"modal","data-bs-target":"#kt_modal_add_material"},yt={ref:"hidemodal2",style:{display:"none"},"data-bs-toggle":"modal","data-bs-target":"#kt_modal_alter_material"};function wt(e,o,i,m,a,f){const k=_("KTIcon"),u=_("Datatable"),c=_("AddMaterialModal"),v=_("AlterMaterialModal");return r(),l("div",_t,[s("div",At,[s("div",St,[s("div",Rt,[n(k,{"icon-name":"magnifier","icon-class":"fs-1 position-absolute ms-6"}),s("input",{type:"text",onInput:o[0]||(o[0]=(...t)=>f.searchFilter&&f.searchFilter(...t)),ref:"searchBar",class:"form-control form-control-solid w-250px ps-15",placeholder:"Procurar materiais"},null,544)]),s("div",Ut,[s("div",kt,[s("div",{class:g(["selected",{open:a.stateOpen}]),onClick:o[1]||(o[1]=t=>a.stateOpen=!a.stateOpen)},d(this.state),3),s("div",{class:g(["items",{selectHide:!a.stateOpen}])},[s("div",{onClick:o[2]||(o[2]=t=>f.selectState("Todos"))},d("Todos")),s("div",{onClick:o[3]||(o[3]=t=>f.selectState("Ativo"))},d("Ativo")),s("div",{onClick:o[4]||(o[4]=t=>f.selectState("Inativo"))},d("Inativo"))],2),a.stateOpen?(r(),l("div",{key:0,class:"select-closer",onClick:o[5]||(o[5]=t=>a.stateOpen=!1)})):h("",!0)])])]),this.$store.getters.getUser.tipo!="user"?(r(),l("div",vt,[s("div",Tt,[s("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#kt_modal_add_material","data-backdrop":"false",onClick:o[6]||(o[6]=t=>this.createModalOpen=!0)},[n(k,{"icon-name":"plus","icon-class":"fs-2"}),A(" Adicionar Material ")])])])):h("",!0)]),s("div",Et,[n(u,{onOnSort:f.sort,data:this.materiaisFiltered,header:a.tableHeader,"enable-items-per-page-dropdown":!0,class:"datatable"},{produto:p(({row:t})=>[A(d(t.produto),1)]),material:p(({row:t})=>[A(d(t.material),1)]),tipo:p(({row:t})=>[A(d(t.tipo),1)]),subtipo:p(({row:t})=>[A(d(t.subtipo),1)]),liga:p(({row:t})=>[A(d(t.liga),1)]),dimensoes:p(({row:t})=>[A(d(t.dimensoes)+"mm ",1)]),estado:p(({row:t})=>[A(d(t.estado),1)]),actions:p(({row:t})=>[this.$store.getters.getUser.tipo!="user"?(r(),l("span",{key:0,title:"Alterar Material",onClick:b=>f.getMaterialToEdit(t.id),"data-bs-toggle":"modal","data-bs-target":"#kt_modal_alter_material",class:"material-icons"},"edit",8,Nt)):h("",!0),t.estado=="Inativo"&&this.$store.getters.getUser.tipo!="user"?(r(),l("span",{key:1,title:"Ativar Material",onClick:b=>f.toggleMaterial(t.id,"Ativo"),class:"material-icons"},"check_circle",8,Mt)):h("",!0),t.estado=="Ativo"&&this.$store.getters.getUser.tipo!="user"?(r(),l("span",{key:2,title:"Desativar Material",onClick:b=>f.toggleMaterial(t.id,"Inativo"),class:"material-icons"},"cancel",8,Ct)):h("",!0),this.$store.getters.getUser.tipo=="superadm"&&t.delete?(r(),l("span",{key:3,title:"Eliminar Material",onClick:b=>f.deleteMaterial(t.id),class:"material-icons"},"delete",8,$t)):h("",!0)]),_:1},8,["onOnSort","data","header"])]),N(n(c,{onCreateMaterial:f.createMaterial,onOpenModal:f.openModal},null,8,["onCreateMaterial","onOpenModal"]),[[M,this.createModalOpen]]),N(n(v,{info:this.editMaterial,onAlterMaterial:f.alterMaterial,onOpenModal:f.openModal},null,8,["info","onAlterMaterial","onOpenModal"]),[[M,this.alterModalOpen]]),s("button",Lt,null,512),s("button",yt,null,512)])}const xt=E(gt,[["render",wt],["__scopeId","data-v-1c3f33b4"]]);export{xt as default};
