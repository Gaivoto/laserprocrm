import{_ as E,j as _,k as r,l,m as s,A as n,w as p,a6 as S,x as d,p as g,F as R,n as U,v as h,J as A,a7 as C,a8 as $,r as L,z as T,a4 as N,af as M}from"./index.7e4e3585.js";import{D as y}from"./KTDataTable.618d61fe.js";import"./assets.7a37e15c.js";const w={name:"AddMaterialModal",components:{},data(){return{formInfo:{produto:"CHAPA",material:"",tipo:"",tipoOutro:"",subtipo:"",subtipoOutro:"",liga:"",ligaOutro:"",comprimento:"",largura:"",espessura:"",altura:"",dimensaoA:"",dimensaoB:""},produtosSearchOpen:!1,materiaisSearchOpen:!1,tiposSearchOpen:!1,subtiposSearchOpen:!1,ligasSearchOpen:!1,materialInfo:[{produto:"CHAPA",materiais:[{material:"A\xC7O",tipos:[{tipo:"BRUTO",ligas:["S235","S275","S355","OUTRO","N/A"]},{tipo:"ZINCOR",ligas:["N/A"]},{tipo:"CORTEN",ligas:["N/A"]},{tipo:"GALVA",ligas:["N/A"]},{tipo:"LACADO",ligas:["N/A"]},{tipo:"ANTIDERRAPANTE",ligas:["N/A"]},{tipo:"OUTRO",ligas:["N/A"]}]},{material:"INOX",tipos:[{tipo:"2B",ligas:["304","316","OUTRO","N/A"]},{tipo:"L\xC2MINA A QUENTE",ligas:["304","316","OUTRO","N/A"]},{tipo:"ESCOVADO",ligas:["304","316","OUTRO","N/A"]},{tipo:"POLIDO",ligas:["304","316","OUTRO","N/A"]}]},{material:"ALUM\xCDNIO",tipos:[{tipo:"BRUTO",ligas:["1050","1754","N/A"]},{tipo:"LACADO",ligas:["N/A"]},{tipo:"ANTIDERRAPANTE",ligas:["N/A"]}]}]},{produto:"PERFIL",materiais:[{material:"A\xC7O",tipos:[{tipo:"IPE",ligas:["S235","S275","S355","OUTRO","N/A"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]},{tipo:"HEA",ligas:["S235","S275","S355","OUTRO","N/A"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]},{tipo:"HEB",ligas:["S235","S275","S355","OUTRO","N/A"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]},{tipo:"HEM",ligas:["S235","S275","S355","OUTRO","N/A"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]},{tipo:"UPN",ligas:["S235","S275","S355","OUTRO","N/A"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]}]}]},{produto:"CANTONEIRA",materiais:[{material:"A\xC7O",tipos:[{tipo:"ABAS IGUAIS",ligas:["S235","S275","S355","OUTRO","N/A"]},{tipo:"ABAS DESIGUAIS",ligas:["S235","S275","S355","OUTRO","N/A"]}]}]},{produto:"TUBULAR",materiais:[{material:"A\xC7O",tipos:[{tipo:"BRUTO",ligas:["S235","S275","S355","OUTRO","N/A"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]},{tipo:"GALVA",ligas:["N/A"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]}]},{material:"INOX",tipos:[{tipo:"BRUTO",ligas:["304","316","OUTRO","N/A"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]},{tipo:"ESCOVADO",ligas:["304","316","OUTRO","N/A"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]},{tipo:"POLIDO",ligas:["304","316","OUTRO","N/A"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]}]}]}]}},computed:{getProdutos(){let e=[];return this.materialInfo.forEach(t=>e.push(t.produto)),e},getMateriais(){let e=[];return this.materialInfo.forEach(t=>{t.produto==this.formInfo.produto&&t.materiais.forEach(i=>e.push(i.material))}),e},getTipos(){let e=[];return this.materialInfo.forEach(t=>{t.produto==this.formInfo.produto&&t.materiais.forEach(i=>{i.material==this.formInfo.material&&i.tipos.forEach(f=>e.push(f.tipo))})}),e},getLigas(){let e=[];return this.materialInfo.forEach(t=>{t.produto==this.formInfo.produto&&t.materiais.forEach(i=>{i.material==this.formInfo.material&&i.tipos.forEach(f=>{f.tipo==this.formInfo.tipo&&f.ligas.forEach(a=>e.push(a))})})}),e},getSubtipos(){let e=[];return this.materialInfo.forEach(t=>{t.produto==this.formInfo.produto&&(this.formInfo.produto=="TUBULAR"||this.formInfo.produto=="PERFIL")&&t.materiais.forEach(i=>{i.material==this.formInfo.material&&i.tipos.forEach(f=>{f.tipo==this.formInfo.tipo&&f.subtipos.forEach(a=>e.push(a))})})}),e}},methods:{verifyMaterialData(){if(this.formInfo.produto.length==0||this.formInfo.material.length==0||this.formInfo.tipo.length==0||this.formInfo.liga.length==0||this.formInfo.liga=="OUTRO"&&this.formInfo.ligaOutro==""||this.formInfo.subtipo=="OUTRO"&&this.formInfo.subtipoOutro==""||this.formInfo.tipo=="OUTRO"&&this.formInfo.tipoOutro=="")return this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1;switch(this.formInfo.produto){case"CANTONEIRA":return this.formInfo.comprimento.length==0||this.formInfo.dimensaoA.length==0||this.formInfo.espessura.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.dimensaoA<=0||this.formInfo.dimensaoB<=0&&this.formInfo.dimensaoB!=""||this.formInfo.espessura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0;case"PERFIL":return this.formInfo.comprimento.length==0||this.formInfo.altura.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.altura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0;case"CHAPA":return this.formInfo.comprimento.length==0||this.formInfo.espessura.length==0||this.formInfo.largura.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.largura<=0||this.formInfo.espessura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0;case"TUBULAR":return this.formInfo.comprimento.length==0||this.formInfo.dimensaoA.length==0||this.formInfo.espessura.length==0||this.formInfo.subtipo.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.dimensaoA<=0||this.formInfo.dimensaoB<=0&&this.formInfo.dimensaoB!=""||this.formInfo.espessura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0}},createMaterial(){switch(this.formInfo.produto){case"CANTONEIRA":this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.dimensaoA,this.formInfo.dimensaoB!=""&&(this.formInfo.dimensoes+="x"+this.formInfo.dimensaoB),this.formInfo.dimensoes+="x"+this.formInfo.espessura;break;case"TUBULAR":this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.dimensaoA,this.formInfo.dimensaoB!=""&&(this.formInfo.dimensoes+="x"+this.formInfo.dimensaoB),this.formInfo.dimensoes+="x"+this.formInfo.espessura;break;case"CHAPA":this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.largura+"x"+this.formInfo.espessura;break;case"PERFIL":this.formInfo.altura=this.formInfo.subtipo,this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.altura;break}this.verifyMaterialData()&&(this.formInfo.liga=="OUTRO"&&(this.formInfo.liga=this.formInfo.ligaOutro),this.formInfo.subtipo=="OUTRO"&&(this.formInfo.subtipo=this.formInfo.subtipoOutro),this.formInfo.tipo=="OUTRO"&&(this.formInfo.tipo=this.formInfo.tipoOutro),this.$emit("create-material",this.formInfo),this.formInfo={produto:"CHAPA",material:"",tipo:"",tipoOutro:"",subtipo:"",subtipoOutro:"",liga:"",ligaOutro:"",comprimento:"",largura:"",espessura:"",altura:"",dimensaoA:"",dimensaoB:""},this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.ligasSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1)},chooseProduto(e){this.formInfo.produto=e,this.produtosSearchOpen=!1,this.formInfo.material="",this.formInfo.tipo="",this.formInfo.tipoOutro="",this.formInfo.subtipo="",this.formInfo.subtipoOutro="",this.formInfo.liga="",this.formInfo.ligaOutro="",this.formInfo.espessura="",this.formInfo.largura="",this.formInfo.comprimento="",this.formInfo.altura="",this.formInfo.dimensaoA="",this.formInfo.dimensaoB=""},chooseMaterial(e){this.formInfo.material=e,this.materiaisSearchOpen=!1,this.formInfo.tipo="",this.formInfo.tipoOutro="",this.formInfo.subtipo="",this.formInfo.subtipoOutro="",this.formInfo.liga="",this.formInfo.ligaOutro=""},chooseTipo(e){this.formInfo.tipo=e,this.tiposSearchOpen=!1,this.formInfo.subtipo="",this.formInfo.subtipoOutro="",this.formInfo.liga="",this.formInfo.ligaOutro="",(e!="ABAS DESIGUAIS"||e!="RETANGULO"||e!="OUTRO")&&(this.formInfo.dimensaoB=""),e!="OUTRO"&&(this.formInfo.tipoOutro="")},chooseSubtipo(e){this.formInfo.subtipo=e,this.subtiposSearchOpen=!1,e!="OUTRO"&&(this.formInfo.subtipoOutro="")},chooseLiga(e){this.formInfo.liga=e,this.ligasSearchOpen=!1,e!="OUTRO"&&(this.formInfo.ligaOutro="")},reset(e){(e.target.id=="kt_modal_add_material"||e.target.id=="kt_modal_add_material_close"||e.target.id=="kt_modal_add_material_close_btn"||e.target.parentElement.id=="kt_modal_add_material_close_btn")&&(this.formInfo={produto:"CHAPA",material:"",tipo:"",tipoOutro:"",subtipo:"",liga:"",comprimento:"",largura:"",espessura:"",altura:"",dimensaoA:"",dimensaoB:""},this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.ligasSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1)},openProdutos(){this.produtosSearchOpen=!0,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!1},openMateriais(){this.produtosSearchOpen=!1,this.materiaisSearchOpen=!0,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!1},openTipos(){this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!0,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!1},openSubtipos(){this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!0,this.ligasSearchOpen=!1},openLigas(){this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!0}}},O=e=>(C("data-v-7255c102"),e=e(),$(),e),B={class:"modal-dialog modal-dialog-centered mw-650px"},D={class:"modal-header",id:"kt_modal_add_material_header"},P=O(()=>s("h2",{class:"fw-bold"},"Criar Material",-1)),x={class:"modal-body py-10 px-lg-17"},V={class:"scroll-y me-n7 pe-7",id:"kt_modal_add_material_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_customer_header","data-kt-scroll-wrappers":"#kt_modal_add_customer_scroll","data-kt-scroll-offset":"300px"},F={class:"fv-row mb-8"},q=O(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Produto",-1)),G={class:"searchbar"},H=["onClick"],z={class:"fv-row mb-8"},Q=O(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Material",-1)),W={class:"searchbar"},K=["onClick"],X={class:"fv-row mb-8"},j=O(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Tipo",-1)),Z={class:"searchbar"},J=["onClick"],Y={key:0,class:"fv-row mb-8"},tt=O(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Tipo",-1)),ot={key:1,class:"fv-row mb-8"},et=O(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Subtipo",-1)),st={class:"searchbar"},it=["onClick"],at={key:2,class:"fv-row mb-8"},rt=O(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Subtipo",-1)),lt={key:3,class:"fv-row mb-8"},nt=O(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Liga",-1)),mt={class:"searchbar"},ft=["onClick"],dt={key:4,class:"fv-row mb-8"},pt=O(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Liga",-1)),ht={class:"fv-row mb-8"},ut=O(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Comprimento (mm)",-1)),ct={key:5,class:"fv-row mb-8"},Ot=O(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Largura (mm)",-1)),It={key:6,class:"fv-row mb-8"},bt=O(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Dimens\xE3o A (mm)",-1)),gt={key:7,class:"fv-row mb-8"},_t=O(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Dimens\xE3o B (mm)",-1)),At={key:8,class:"fv-row mb-8"},St=O(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Espessura (mm)",-1)),Rt={class:"modal-footer flex-center"},Ut=O(()=>s("button",{type:"reset",id:"kt_modal_add_customer_cancel",class:"btn btn-light me-3"}," Limpar ",-1));function kt(e,t,i,f,a,m){const k=_("KTIcon"),u=_("el-input"),c=_("el-form-item"),v=_("el-form");return r(),l("div",{class:"modal fade",id:"kt_modal_add_material",ref:"addMaterialModalRef",tabindex:"-1","aria-hidden":"true",onClick:t[24]||(t[24]=(...o)=>m.reset&&m.reset(...o))},[s("div",B,[s("div",{class:"modal-content",onClick:t[23]||(t[23]=o=>{this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!1})},[s("div",D,[P,s("div",{id:"kt_modal_add_material_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary",onClick:t[0]||(t[0]=(...o)=>m.reset&&m.reset(...o))},[n(k,{id:"kt_modal_add_material_close_btn","icon-name":"cross","icon-class":"fs-1"})])]),n(v,{model:a.formInfo,ref:"formRef"},{default:p(()=>[s("div",x,[s("div",V,[s("div",F,[q,s("div",{class:"searchbar-container",onClick:t[2]||(t[2]=S(()=>{},["stop"]))},[s("div",G,[s("p",{type:"text",ref:"produtosSearchbar",onClick:t[1]||(t[1]=(...o)=>this.openProdutos&&this.openProdutos(...o))},d(this.formInfo.produto),513)]),s("div",{ref:"produtosResults",class:g(["searchbar-results",{"d-none":!a.produtosSearchOpen}])},[(r(!0),l(R,null,U(this.getProdutos,o=>(r(),l("div",{key:o,onClick:b=>m.chooseProduto(o)},d(o),9,H))),128))],2)])]),s("div",z,[Q,s("div",{class:"searchbar-container",onClick:t[4]||(t[4]=S(()=>{},["stop"]))},[s("div",W,[s("p",{type:"text",ref:"materiaisSearchbar",onClick:t[3]||(t[3]=(...o)=>this.openMateriais&&this.openMateriais(...o))},d(this.formInfo.material),513)]),s("div",{ref:"materiaisResults",class:g(["searchbar-results",{"d-none":!a.materiaisSearchOpen}])},[(r(!0),l(R,null,U(this.getMateriais,o=>(r(),l("div",{key:o,onClick:b=>m.chooseMaterial(o)},d(o),9,K))),128))],2)])]),s("div",X,[j,s("div",{class:"searchbar-container",onClick:t[6]||(t[6]=S(()=>{},["stop"]))},[s("div",Z,[s("p",{type:"text",ref:"tiposSearchbar",onClick:t[5]||(t[5]=(...o)=>this.openTipos&&this.openTipos(...o))},d(this.formInfo.tipo),513)]),s("div",{ref:"tiposResults",class:g(["searchbar-results",{"d-none":!a.tiposSearchOpen}])},[(r(!0),l(R,null,U(this.getTipos,o=>(r(),l("div",{key:o,onClick:b=>m.chooseTipo(o)},d(o),9,J))),128))],2)])]),this.formInfo.tipo=="OUTRO"?(r(),l("div",Y,[tt,n(c,{prop:"tipo"},{default:p(()=>[n(u,{type:"text",placeholder:"Tipo",modelValue:this.formInfo.tipoOutro,"onUpdate:modelValue":t[7]||(t[7]=o=>this.formInfo.tipoOutro=o),onInput:t[8]||(t[8]=o=>this.formInfo.tipoOutro=this.formInfo.tipoOutro.toUpperCase())},null,8,["modelValue"])]),_:1})])):h("",!0),this.formInfo.produto=="TUBULAR"||this.formInfo.produto=="PERFIL"?(r(),l("div",ot,[et,s("div",{class:"searchbar-container",onClick:t[10]||(t[10]=S(()=>{},["stop"]))},[s("div",st,[s("p",{type:"text",ref:"subtiposSearchbar",onClick:t[9]||(t[9]=(...o)=>this.openSubtipos&&this.openSubtipos(...o))},d(this.formInfo.subtipo),513)]),s("div",{ref:"subtiposResults",class:g(["searchbar-results",{"d-none":!a.subtiposSearchOpen}])},[(r(!0),l(R,null,U(this.getSubtipos,o=>(r(),l("div",{key:o,onClick:b=>m.chooseSubtipo(o)},d(o),9,it))),128))],2)])])):h("",!0),this.formInfo.subtipo=="OUTRO"?(r(),l("div",at,[rt,n(c,{prop:"subtipo"},{default:p(()=>[n(u,{type:"text",placeholder:"Subtipo",modelValue:this.formInfo.subtipoOutro,"onUpdate:modelValue":t[11]||(t[11]=o=>this.formInfo.subtipoOutro=o),onInput:t[12]||(t[12]=o=>this.formInfo.subtipoOutro=this.formInfo.subtipoOutro.toUpperCase())},null,8,["modelValue"])]),_:1})])):h("",!0),this.getLigas.length>0||this.formInfo.tipo==""?(r(),l("div",lt,[nt,s("div",{class:"searchbar-container",onClick:t[14]||(t[14]=S(()=>{},["stop"]))},[s("div",mt,[s("p",{type:"text",ref:"ligasSearchbar",onClick:t[13]||(t[13]=(...o)=>this.openLigas&&this.openLigas(...o))},d(this.formInfo.liga),513)]),s("div",{ref:"ligasResults",class:g(["searchbar-results",{"d-none":!a.ligasSearchOpen}])},[(r(!0),l(R,null,U(this.getLigas,o=>(r(),l("div",{key:o,onClick:b=>m.chooseLiga(o)},d(o),9,ft))),128))],2)])])):h("",!0),this.formInfo.liga=="OUTRO"?(r(),l("div",dt,[pt,n(c,{prop:"liga"},{default:p(()=>[n(u,{type:"text",placeholder:"Liga",modelValue:this.formInfo.ligaOutro,"onUpdate:modelValue":t[15]||(t[15]=o=>this.formInfo.ligaOutro=o),onInput:t[16]||(t[16]=o=>this.formInfo.ligaOutro=this.formInfo.ligaOutro.toUpperCase())},null,8,["modelValue"])]),_:1})])):h("",!0),s("div",ht,[ut,n(c,{prop:"comprimento"},{default:p(()=>[n(u,{modelValue:a.formInfo.comprimento,"onUpdate:modelValue":t[17]||(t[17]=o=>a.formInfo.comprimento=o),type:"number",placeholder:"Comprimento"},null,8,["modelValue"])]),_:1})]),this.formInfo.produto=="CHAPA"?(r(),l("div",ct,[Ot,n(c,{prop:"largura"},{default:p(()=>[n(u,{modelValue:a.formInfo.largura,"onUpdate:modelValue":t[18]||(t[18]=o=>a.formInfo.largura=o),type:"number",placeholder:"Largura"},null,8,["modelValue"])]),_:1})])):h("",!0),this.formInfo.produto=="TUBULAR"||this.formInfo.produto=="CANTONEIRA"?(r(),l("div",It,[bt,n(c,{prop:"dimensaoA"},{default:p(()=>[n(u,{modelValue:a.formInfo.dimensaoA,"onUpdate:modelValue":t[19]||(t[19]=o=>a.formInfo.dimensaoA=o),type:"number",placeholder:"Dimens\xE3o A"},null,8,["modelValue"])]),_:1})])):h("",!0),this.formInfo.produto=="TUBULAR"&&this.formInfo.subtipo=="RETANGULO"||this.formInfo.produto=="TUBULAR"&&this.formInfo.subtipo=="OUTRO"||this.formInfo.produto=="CANTONEIRA"&&this.formInfo.tipo=="ABAS DESIGUAIS"?(r(),l("div",gt,[_t,n(c,{prop:"dimensaoB"},{default:p(()=>[n(u,{modelValue:a.formInfo.dimensaoB,"onUpdate:modelValue":t[20]||(t[20]=o=>a.formInfo.dimensaoB=o),type:"number",placeholder:"Dimens\xE3o B"},null,8,["modelValue"])]),_:1})])):h("",!0),this.formInfo.produto!="PERFIL"?(r(),l("div",At,[St,n(c,{prop:"espessura"},{default:p(()=>[n(u,{modelValue:a.formInfo.espessura,"onUpdate:modelValue":t[21]||(t[21]=o=>a.formInfo.espessura=o),type:"number",placeholder:"Espessura"},null,8,["modelValue"])]),_:1})])):h("",!0)])]),s("div",Rt,[Ut,s("div",{id:"kt_modal_add_customer_cancel",class:"btn btn-lg btn-primary",onClick:t[22]||(t[22]=(...o)=>m.createMaterial&&m.createMaterial(...o))},[A(" Criar "),n(k,{"icon-name":"arrow-right","icon-class":"fs-2 me-2 me-0",class:"override-mr0"})])])]),_:1},8,["model"])])])],512)}const vt=E(w,[["render",kt],["__scopeId","data-v-7255c102"]]);const Tt={name:"AlterMaterialModal",components:{},props:{info:{type:Object,required:!0}},data(){return{formInfo:{produto:"",material:"",tipo:"",tipoOutro:"",subtipo:"",subtipoOutro:"",liga:"",ligaOutro:"",comprimento:"",largura:"",espessura:"",altura:"",dimensaoA:"",dimensaoB:""},produtosSearchOpen:!1,materiaisSearchOpen:!1,tiposSearchOpen:!1,subtiposSearchOpen:!1,ligasSearchOpen:!1,materialInfo:[{produto:"CHAPA",materiais:[{material:"A\xC7O",tipos:[{tipo:"BRUTO",ligas:["S235","S275","S355","OUTRO","N/A"]},{tipo:"ZINCOR",ligas:["N/A"]},{tipo:"CORTEN",ligas:["N/A"]},{tipo:"GALVA",ligas:["N/A"]},{tipo:"LACADO",ligas:["N/A"]},{tipo:"ANTIDERRAPANTE",ligas:["N/A"]},{tipo:"OUTRO",ligas:["N/A"]}]},{material:"INOX",tipos:[{tipo:"2B",ligas:["304","316","OUTRO","N/A"]},{tipo:"L\xC2MINA A QUENTE",ligas:["304","316","OUTRO","N/A"]},{tipo:"ESCOVADO",ligas:["304","316","OUTRO","N/A"]},{tipo:"POLIDO",ligas:["304","316","OUTRO","N/A"]}]},{material:"ALUM\xCDNIO",tipos:[{tipo:"BRUTO",ligas:["1050","1754","N/A"]},{tipo:"LACADO",ligas:["N/A"]},{tipo:"ANTIDERRAPANTE",ligas:["N/A"]}]}]},{produto:"PERFIL",materiais:[{material:"A\xC7O",tipos:[{tipo:"IPE",ligas:["S235","S275","S355","OUTRO","N/A"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]},{tipo:"HEA",ligas:["S235","S275","S355","OUTRO","N/A"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]},{tipo:"HEB",ligas:["S235","S275","S355","OUTRO","N/A"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]},{tipo:"HEM",ligas:["S235","S275","S355","OUTRO","N/A"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]},{tipo:"UPN",ligas:["S235","S275","S355","OUTRO","N/A"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]}]}]},{produto:"CANTONEIRA",materiais:[{material:"A\xC7O",tipos:[{tipo:"ABAS IGUAIS",ligas:["S235","S275","S355","OUTRO","N/A"]},{tipo:"ABAS DESIGUAIS",ligas:["S235","S275","S355","OUTRO","N/A"]}]}]},{produto:"TUBULAR",materiais:[{material:"A\xC7O",tipos:[{tipo:"BRUTO",ligas:["S235","S275","S355","OUTRO","N/A"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]},{tipo:"GALVA",ligas:["N/A"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]}]},{material:"INOX",tipos:[{tipo:"BRUTO",ligas:["304","316","OUTRO","N/A"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]},{tipo:"ESCOVADO",ligas:["304","316","OUTRO","N/A"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]},{tipo:"POLIDO",ligas:["304","316","OUTRO","N/A"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]}]}]}]}},mounted(){this.formInfo=this.info},computed:{getProdutos(){let e=[];return this.materialInfo.forEach(t=>e.push(t.produto)),e},getMateriais(){let e=[];return this.materialInfo.forEach(t=>{t.produto==this.formInfo.produto&&t.materiais.forEach(i=>e.push(i.material))}),e},getTipos(){let e=[];return this.materialInfo.forEach(t=>{t.produto==this.formInfo.produto&&t.materiais.forEach(i=>{i.material==this.formInfo.material&&i.tipos.forEach(f=>e.push(f.tipo))})}),e},getLigas(){let e=[];return this.materialInfo.forEach(t=>{t.produto==this.formInfo.produto&&t.materiais.forEach(i=>{i.material==this.formInfo.material&&i.tipos.forEach(f=>{f.tipo==this.formInfo.tipo&&f.ligas.forEach(a=>e.push(a))})})}),e},getSubtipos(){let e=[];return this.materialInfo.forEach(t=>{t.produto==this.formInfo.produto&&(this.formInfo.produto=="TUBULAR"||this.formInfo.produto=="PERFIL")&&t.materiais.forEach(i=>{i.material==this.formInfo.material&&i.tipos.forEach(f=>{f.tipo==this.formInfo.tipo&&f.subtipos.forEach(a=>e.push(a))})})}),e}},methods:{verifyMaterialData(){if(this.formInfo.produto.length==0||this.formInfo.material.length==0||this.formInfo.tipo.length==0||this.formInfo.liga.length==0||this.formInfo.liga=="OUTRO"&&this.formInfo.ligaOutro==""||this.formInfo.subtipo=="OUTRO"&&this.formInfo.subtipoOutro==""||this.formInfo.tipo=="OUTRO"&&this.formInfo.tipoOutro=="")return this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1;switch(this.formInfo.produto){case"CANTONEIRA":return this.formInfo.comprimento.length==0||this.formInfo.dimensaoA.length==0||this.formInfo.espessura.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.dimensaoA<=0||this.formInfo.dimensaoB<=0&&this.formInfo.dimensaoB!=""||this.formInfo.espessura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0;case"PERFIL":return this.formInfo.comprimento.length==0||this.formInfo.altura.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.altura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0;case"CHAPA":return this.formInfo.comprimento.length==0||this.formInfo.espessura.length==0||this.formInfo.largura.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.largura<=0||this.formInfo.espessura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0;case"TUBULAR":return this.formInfo.comprimento.length==0||this.formInfo.dimensaoA.length==0||this.formInfo.espessura.length==0||this.formInfo.subtipo.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.dimensaoA<=0||this.formInfo.dimensaoB<=0&&this.formInfo.dimensaoB!=""||this.formInfo.espessura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0}},alterarMaterial(){switch(this.formInfo.produto){case"CANTONEIRA":this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.dimensaoA,this.formInfo.dimensaoB!=""&&(this.formInfo.dimensoes+="x"+this.formInfo.dimensaoB),this.formInfo.dimensoes+="x"+this.formInfo.espessura;break;case"TUBULAR":this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.dimensaoA,this.formInfo.dimensaoB!=""&&(this.formInfo.dimensoes+="x"+this.formInfo.dimensaoB),this.formInfo.dimensoes+="x"+this.formInfo.espessura;break;case"CHAPA":this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.largura+"x"+this.formInfo.espessura;break;case"PERFIL":this.formInfo.altura=this.formInfo.subtipo,this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.altura;break}this.verifyMaterialData()&&(this.formInfo.liga=="OUTRO"&&(this.formInfo.liga=this.formInfo.ligaOutro),this.formInfo.subtipo=="OUTRO"&&(this.formInfo.subtipo=this.formInfo.subtipoOutro),this.formInfo.tipo=="OUTRO"&&(this.formInfo.tipo=this.formInfo.tipoOutro),this.$emit("alter-material",this.formInfo),this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.ligasSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1)},chooseProduto(e){this.formInfo.produto=e,this.produtosSearchOpen=!1,this.formInfo.material="",this.formInfo.tipo="",this.formInfo.tipoOutro="",this.formInfo.subtipo="",this.formInfo.subtipoOutro="",this.formInfo.liga="",this.formInfo.ligaOutro="",this.formInfo.espessura="",this.formInfo.largura="",this.formInfo.comprimento="",this.formInfo.altura="",this.formInfo.dimensaoA="",this.formInfo.dimensaoB=""},chooseMaterial(e){this.formInfo.material=e,this.materiaisSearchOpen=!1,this.formInfo.tipo="",this.formInfo.tipoOutro="",this.formInfo.subtipo="",this.formInfo.subtipoOutro="",this.formInfo.liga="",this.formInfo.ligaOutro=""},chooseTipo(e){this.formInfo.tipo=e,this.tiposSearchOpen=!1,this.formInfo.subtipo="",this.formInfo.subtipoOutro="",this.formInfo.liga="",this.formInfo.ligaOutro="",(e!="ABAS DESIGUAIS"||e!="RETANGULO"||e!="OUTRO")&&(this.formInfo.dimensaoB=""),e!="OUTRO"&&(this.formInfo.tipoOutro="")},chooseSubtipo(e){this.formInfo.subtipo=e,this.subtiposSearchOpen=!1,e!="OUTRO"&&(this.formInfo.subtipoOutro="")},chooseLiga(e){this.formInfo.liga=e,this.ligasSearchOpen=!1,e!="OUTRO"&&(this.formInfo.ligaOutro="")},reset(e){(e.target.id=="kt_modal_alter_material"||e.target.id=="kt_modal_alter_material_close"||e.target.id=="kt_modal_alter_material_close_btn"||e.target.parentElement.id=="kt_modal_alter_material_close_btn"||e.target.id=="alter_material_reset_btn")&&(this.formInfo={...this.info},this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.ligasSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1)},openProdutos(){this.produtosSearchOpen=!0,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!1},openMateriais(){this.produtosSearchOpen=!1,this.materiaisSearchOpen=!0,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!1},openTipos(){this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!0,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!1},openSubtipos(){this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!0,this.ligasSearchOpen=!1},openLigas(){this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!0}},watch:{info:function(e){this.formInfo={...e}}}},I=e=>(C("data-v-9ba44930"),e=e(),$(),e),Et={class:"modal-dialog modal-dialog-centered mw-650px"},Nt={class:"modal-header",id:"kt_modal_alter_material_header"},Mt=I(()=>s("h2",{class:"fw-bold"},"Alterar Material",-1)),Ct={class:"modal-body py-10 px-lg-17"},$t={class:"scroll-y me-n7 pe-7",id:"kt_modal_alter_material_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_customer_header","data-kt-scroll-wrappers":"#kt_modal_add_customer_scroll","data-kt-scroll-offset":"300px"},Lt={class:"fv-row mb-8"},yt=I(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Produto",-1)),wt={class:"searchbar"},Bt=["onClick"],Dt={class:"fv-row mb-8"},Pt=I(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Material",-1)),xt={class:"searchbar"},Vt=["onClick"],Ft={class:"fv-row mb-8"},qt=I(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Tipo",-1)),Gt={class:"searchbar"},Ht=["onClick"],zt={key:0,class:"fv-row mb-8"},Qt=I(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Tipo",-1)),Wt={key:1,class:"fv-row mb-8"},Kt=I(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Subtipo",-1)),Xt={class:"searchbar"},jt=["onClick"],Zt={key:2,class:"fv-row mb-8"},Jt=I(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Subtipo",-1)),Yt={key:3,class:"fv-row mb-8"},to=I(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Liga",-1)),oo={class:"searchbar"},eo=["onClick"],so={key:4,class:"fv-row mb-8"},io=I(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Liga",-1)),ao={class:"fv-row mb-8"},ro=I(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Comprimento (mm)",-1)),lo={key:5,class:"fv-row mb-8"},no=I(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Largura (mm)",-1)),mo={key:6,class:"fv-row mb-8"},fo=I(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Dimens\xE3o A (mm)",-1)),po={key:7,class:"fv-row mb-8"},ho=I(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Dimens\xE3o B (mm)",-1)),uo={key:8,class:"fv-row mb-8"},co=I(()=>s("label",{class:"required fs-6 fw-semobold mb-2"},"Espessura (mm)",-1)),Oo={class:"modal-footer flex-center"};function Io(e,t,i,f,a,m){const k=_("KTIcon"),u=_("el-input"),c=_("el-form-item"),v=_("el-form");return r(),l("div",{class:"modal fade",id:"kt_modal_alter_material",ref:"alterMaterialModalRef",tabindex:"-1","aria-hidden":"true",onClick:t[25]||(t[25]=(...o)=>m.reset&&m.reset(...o))},[s("div",Et,[s("div",{class:"modal-content",onClick:t[24]||(t[24]=o=>{this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!1})},[s("div",Nt,[Mt,s("div",{id:"kt_modal_alter_material_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary",onClick:t[0]||(t[0]=(...o)=>m.reset&&m.reset(...o))},[n(k,{"icon-name":"cross","icon-class":"fs-1"})])]),n(v,{model:a.formInfo,ref:"formRef"},{default:p(()=>[s("div",Ct,[s("div",$t,[s("div",Lt,[yt,s("div",{class:"searchbar-container",onClick:t[2]||(t[2]=S(()=>{},["stop"]))},[s("div",wt,[s("p",{type:"text",ref:"produtosSearchbar",onClick:t[1]||(t[1]=(...o)=>this.openProdutos&&this.openProdutos(...o))},d(this.formInfo.produto),513)]),s("div",{ref:"produtosResults",class:g(["searchbar-results",{"d-none":!a.produtosSearchOpen}])},[(r(!0),l(R,null,U(this.getProdutos,o=>(r(),l("div",{key:o,onClick:b=>m.chooseProduto(o)},d(o),9,Bt))),128))],2)])]),s("div",Dt,[Pt,s("div",{class:"searchbar-container",onClick:t[4]||(t[4]=S(()=>{},["stop"]))},[s("div",xt,[s("p",{type:"text",ref:"materiaisSearchbar",onClick:t[3]||(t[3]=(...o)=>this.openMateriais&&this.openMateriais(...o))},d(this.formInfo.material),513)]),s("div",{ref:"materiaisResults",class:g(["searchbar-results",{"d-none":!a.materiaisSearchOpen}])},[(r(!0),l(R,null,U(this.getMateriais,o=>(r(),l("div",{key:o,onClick:b=>m.chooseMaterial(o)},d(o),9,Vt))),128))],2)])]),s("div",Ft,[qt,s("div",{class:"searchbar-container",onClick:t[6]||(t[6]=S(()=>{},["stop"]))},[s("div",Gt,[s("p",{type:"text",ref:"tiposSearchbar",onClick:t[5]||(t[5]=(...o)=>this.openTipos&&this.openTipos(...o))},d(this.formInfo.tipo),513)]),s("div",{ref:"tiposResults",class:g(["searchbar-results",{"d-none":!a.tiposSearchOpen}])},[(r(!0),l(R,null,U(this.getTipos,o=>(r(),l("div",{key:o,onClick:b=>m.chooseTipo(o)},d(o),9,Ht))),128))],2)])]),this.formInfo.tipo=="OUTRO"?(r(),l("div",zt,[Qt,n(c,{prop:"tipo"},{default:p(()=>[n(u,{type:"text",placeholder:"Tipo",modelValue:this.formInfo.tipoOutro,"onUpdate:modelValue":t[7]||(t[7]=o=>this.formInfo.tipoOutro=o),onInput:t[8]||(t[8]=o=>this.formInfo.tipoOutro=this.formInfo.tipoOutro.toUpperCase())},null,8,["modelValue"])]),_:1})])):h("",!0),this.formInfo.produto=="TUBULAR"||this.formInfo.produto=="PERFIL"?(r(),l("div",Wt,[Kt,s("div",{class:"searchbar-container",onClick:t[10]||(t[10]=S(()=>{},["stop"]))},[s("div",Xt,[s("p",{type:"text",ref:"subtiposSearchbar",onClick:t[9]||(t[9]=(...o)=>this.openSubtipos&&this.openSubtipos(...o))},d(this.formInfo.subtipo),513)]),s("div",{ref:"subtiposResults",class:g(["searchbar-results",{"d-none":!a.subtiposSearchOpen}])},[(r(!0),l(R,null,U(this.getSubtipos,o=>(r(),l("div",{key:o,onClick:b=>m.chooseSubtipo(o)},d(o),9,jt))),128))],2)])])):h("",!0),this.formInfo.subtipo=="OUTRO"?(r(),l("div",Zt,[Jt,n(c,{prop:"subtipo"},{default:p(()=>[n(u,{type:"text",placeholder:"Subtipo",modelValue:this.formInfo.subtipoOutro,"onUpdate:modelValue":t[11]||(t[11]=o=>this.formInfo.subtipoOutro=o),onInput:t[12]||(t[12]=o=>this.formInfo.subtipoOutro=this.formInfo.subtipoOutro.toUpperCase())},null,8,["modelValue"])]),_:1})])):h("",!0),this.getLigas.length>0||this.formInfo.tipo==""?(r(),l("div",Yt,[to,s("div",{class:"searchbar-container",onClick:t[14]||(t[14]=S(()=>{},["stop"]))},[s("div",oo,[s("p",{type:"text",ref:"ligasSearchbar",onClick:t[13]||(t[13]=(...o)=>this.openLigas&&this.openLigas(...o))},d(this.formInfo.liga),513)]),s("div",{ref:"ligasResults",class:g(["searchbar-results",{"d-none":!a.ligasSearchOpen}])},[(r(!0),l(R,null,U(this.getLigas,o=>(r(),l("div",{key:o,onClick:b=>m.chooseLiga(o)},d(o),9,eo))),128))],2)])])):h("",!0),this.formInfo.liga=="OUTRO"?(r(),l("div",so,[io,n(c,{prop:"liga"},{default:p(()=>[n(u,{type:"text",placeholder:"Liga",modelValue:this.formInfo.ligaOutro,"onUpdate:modelValue":t[15]||(t[15]=o=>this.formInfo.ligaOutro=o),onInput:t[16]||(t[16]=o=>this.formInfo.ligaOutro=this.formInfo.ligaOutro.toUpperCase())},null,8,["modelValue"])]),_:1})])):h("",!0),s("div",ao,[ro,n(c,{prop:"comprimento"},{default:p(()=>[n(u,{modelValue:a.formInfo.comprimento,"onUpdate:modelValue":t[17]||(t[17]=o=>a.formInfo.comprimento=o),type:"number",placeholder:"Comprimento"},null,8,["modelValue"])]),_:1})]),this.formInfo.produto=="CHAPA"?(r(),l("div",lo,[no,n(c,{prop:"largura"},{default:p(()=>[n(u,{modelValue:a.formInfo.largura,"onUpdate:modelValue":t[18]||(t[18]=o=>a.formInfo.largura=o),type:"number",placeholder:"Largura"},null,8,["modelValue"])]),_:1})])):h("",!0),this.formInfo.produto=="TUBULAR"||this.formInfo.produto=="CANTONEIRA"?(r(),l("div",mo,[fo,n(c,{prop:"dimensaoA"},{default:p(()=>[n(u,{modelValue:a.formInfo.dimensaoA,"onUpdate:modelValue":t[19]||(t[19]=o=>a.formInfo.dimensaoA=o),type:"number",placeholder:"Dimens\xE3o A"},null,8,["modelValue"])]),_:1})])):h("",!0),this.formInfo.produto=="TUBULAR"&&this.formInfo.subtipo=="RETANGULO"||this.formInfo.produto=="TUBULAR"&&this.formInfo.subtipo=="OUTRO"||this.formInfo.produto=="CANTONEIRA"&&this.formInfo.tipo=="ABAS DESIGUAIS"?(r(),l("div",po,[ho,n(c,{prop:"dimensaoB"},{default:p(()=>[n(u,{modelValue:a.formInfo.dimensaoB,"onUpdate:modelValue":t[20]||(t[20]=o=>a.formInfo.dimensaoB=o),type:"number",placeholder:"Dimens\xE3o B"},null,8,["modelValue"])]),_:1})])):h("",!0),this.formInfo.produto!="PERFIL"?(r(),l("div",uo,[co,n(c,{prop:"espessura"},{default:p(()=>[n(u,{modelValue:a.formInfo.espessura,"onUpdate:modelValue":t[21]||(t[21]=o=>a.formInfo.espessura=o),type:"number",placeholder:"Espessura"},null,8,["modelValue"])]),_:1})])):h("",!0)])]),s("div",Oo,[s("div",{id:"alter_material_reset_btn",onClick:t[22]||(t[22]=(...o)=>m.reset&&m.reset(...o)),class:"btn btn-light me-3"}," Repor "),s("div",{id:"kt_modal_add_customer_cancel",class:"btn btn-lg btn-primary",onClick:t[23]||(t[23]=(...o)=>m.alterarMaterial&&m.alterarMaterial(...o))},[A(" Alterar "),n(k,{"icon-name":"arrow-right","icon-class":"fs-2 me-2 me-0",class:"override-mr0"})])])]),_:1},8,["model"])])])],512)}const bo=E(Tt,[["render",Io],["__scopeId","data-v-9ba44930"]]);const go={name:"Materiais",components:{Datatable:y,AddMaterialModal:vt,AlterMaterialModal:bo},data(){return{materiais:[],materiaisFiltered:[],stateOpen:!1,state:"Estado",createModalOpen:!1,alterModalOpen:!1,editMaterial:{id:"",liga:"",dimensoes:"",tipo:"",subtipo:"",material:"",produto:""},tableHeader:[]}},created(){this.$store.getters.getUser.id?this.getAllMateriais():this.$router.push({name:"login"})},mounted(){let e=[{columnName:"Produto",columnLabel:"produto",sortEnabled:!0,columnWidth:140},{columnName:"Material",columnLabel:"material",sortEnabled:!0,columnWidth:140},{columnName:"Tipo",columnLabel:"tipo",sortEnabled:!0,columnWidth:140},{columnName:"Subtipo",columnLabel:"subtipo",sortEnabled:!0,columnWidth:140},{columnName:"Liga",columnLabel:"liga",sortEnabled:!0,columnWidth:140},{columnName:"Dimens\xF5es",columnLabel:"dimensoes",sortEnabled:!1,columnWidth:170},{columnName:"Estado",columnLabel:"estado",sortEnabled:!0,columnWidth:80}];this.$store.getters.getUser.tipo!="user"&&e.push({columnName:"Actions",columnLabel:"actions",sortEnabled:!1,columnWidth:160}),this.tableHeader=L(e)},methods:{sort(e){switch(e.label){case"produto":e.order=="asc"?this.materiaisFiltered.sort((t,i)=>t.produto>i.produto?1:i.produto>t.produto?-1:0):this.materiaisFiltered.sort((t,i)=>t.produto<i.produto?1:i.produto<t.produto?-1:0);break;case"material":e.order=="asc"?this.materiaisFiltered.sort((t,i)=>t.material>i.material?1:i.material>t.material?-1:0):this.materiaisFiltered.sort((t,i)=>t.material<i.material?1:i.material<t.material?-1:0);break;case"tipo":e.order=="asc"?this.materiaisFiltered.sort((t,i)=>t.tipo>i.tipo?1:i.tipo>t.tipo?-1:0):this.materiaisFiltered.sort((t,i)=>t.tipo<i.tipo?1:i.tipo<t.tipo?-1:0);break;case"liga":e.order=="asc"?this.materiaisFiltered.sort((t,i)=>t.liga>i.liga?1:i.liga>t.liga?-1:0):this.materiaisFiltered.sort((t,i)=>t.liga<i.liga?1:i.liga<t.liga?-1:0);break;case"subtipo":e.order=="asc"?this.materiaisFiltered.sort((t,i)=>t.subtipo>i.subtipo?1:i.subtipo>t.subtipo?-1:0):this.materiaisFiltered.sort((t,i)=>t.subtipo<i.subtipo?1:i.subtipo<t.subtipo?-1:0);break;case"estado":e.order=="asc"?this.materiaisFiltered.sort((t,i)=>t.estado>i.estado?1:i.estado>t.estado?-1:0):this.materiaisFiltered.sort((t,i)=>t.estado<i.estado?1:i.estado<t.estado?-1:0);break}},searchFilter(){this.materiaisFiltered=[];let e=this.$refs.searchBar.value.split(" ");e!=""?this.materiais.forEach(t=>{let i=!1;e.forEach(f=>{(t.tipo.includes(f)||t.liga.includes(f)||t.subtipo.includes(f)||t.dimensoes.includes(f)||t.material.includes(f)||t.produto.includes(f))&&(i=!0)}),i&&this.materiaisFiltered.push(t)}):this.materiais.forEach(t=>this.materiaisFiltered.push(t)),this.state!="Estado"&&this.state!="Todos"&&(this.materiaisFiltered=this.materiaisFiltered.filter(t=>t.estado==this.state))},selectState(e){this.state=e,this.stateOpen=!1,this.searchFilter()},getMaterialToEdit(e){this.alterModalOpen=!0,this.materiais.forEach(t=>{if(t.id==e){this.editMaterial=t;let i=this.editMaterial.dimensoes.split("x");switch(this.editMaterial.produto){case"TUBULAR":i.length==3?(this.editMaterial.comprimento=i[0],this.editMaterial.dimensaoA=i[1],this.editMaterial.espessura=i[2]):(this.editMaterial.comprimento=i[0],this.editMaterial.dimensaoA=i[1],this.editMaterial.dimensaoB=i[2],this.editMaterial.espessura=i[3]);break;case"CHAPA":this.editMaterial.comprimento=i[0],this.editMaterial.largura=i[1],this.editMaterial.espessura=i[2];break;case"CANTONEIRA":i.length==3?(this.editMaterial.comprimento=i[0],this.editMaterial.dimensaoA=i[1],this.editMaterial.espessura=i[2]):(this.editMaterial.comprimento=i[0],this.editMaterial.dimensaoA=i[1],this.editMaterial.dimensaoB=i[2],this.editMaterial.espessura=i[3]);break;case"PERFIL":this.editMaterial.comprimento=i[0],this.editMaterial.altura=i[1];break}}})},getAllMateriais(){this.materiais=[],this.materiaisFiltered=[],this.state="Estado",T({method:"get",url:"http://64.225.109.57:4000/api/materiais",headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken}}).then(e=>{e.data.access_token&&this.$store.commit("setAccessToken",e.data.access_token),e.data.materiais.forEach(t=>this.materiais.push(t)),e.data.materiais.forEach(t=>this.materiaisFiltered.push(t))}).catch(e=>{e.code?(console.log(e.response.data),this.$emit("open-modal",e.response.data.message),e.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(e)})},createMaterial(e){this.createModalOpen=!1,this.$refs.hidemodal1.click(),T({method:"post",url:"http://64.225.109.57:4000/api/materiais",headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken},data:e}).then(t=>{t.data.access_token&&this.$store.commit("setAccessToken",t.data.access_token),this.getAllMateriais(),this.$emit("open-modal","Material criado com sucesso.")}).catch(t=>{t.code?(console.log(t.response.data),this.$emit("open-modal",t.response.data.message),t.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(t)})},toggleMaterial(e,t){T({method:"put",url:`http://64.225.109.57:4000/api/materiais/${e}/toggle`,headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken},data:{estado:t}}).then(i=>{i.data.access_token&&this.$store.commit("setAccessToken",i.data.access_token),this.materiais.forEach(f=>{f.id==e&&(f.estado=t)}),this.materiaisFiltered.forEach(f=>{f.id==e&&(f.estado=t)})}).catch(i=>{i.code?(console.log(i.response.data),this.$emit("open-modal",i.response.data.message),i.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(i)})},alterMaterial(e){this.createModalOpen=!1,this.$refs.hidemodal2.click(),T({method:"put",url:`http://64.225.109.57:4000/api/materiais/${e.id}`,headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken},data:e}).then(t=>{t.data.access_token&&this.$store.commit("setAccessToken",t.data.access_token),this.getAllMateriais(),this.$emit("open-modal","Material alterado com sucesso.")}).catch(t=>{t.code?(console.log(t.response.data),this.$emit("open-modal",t.response.data.message),t.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(t)})},deleteMaterial(e){T({method:"delete",url:`http://64.225.109.57:4000/api/materiais/${e}`,headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken}}).then(t=>{t.data.access_token&&this.$store.commit("setAccessToken",t.data.access_token),this.getAllMateriais(),this.$emit("open-modal","Material eliminado com sucesso.")}).catch(t=>{t.code?(console.log(t.response.data),this.$emit("open-modal",t.response.data.message),t.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(t)})},openModal(e){this.$emit("open-modal",e)}}},_o={class:"card"},Ao={class:"card-header border-0 pt-6"},So={class:"card-title"},Ro={class:"d-flex align-items-center position-relative my-1"},Uo={class:"d-flex align-items-center position-relative my-1"},ko={class:"custom-select"},vo={key:0,class:"card-toolbar"},To={class:"d-flex justify-content-end","data-kt-customer-table-toolbar":"base"},Eo={class:"card-body pt-0"},No=["onClick"],Mo=["onClick"],Co=["onClick"],$o=["onClick"],Lo={ref:"hidemodal1",style:{display:"none"},"data-bs-toggle":"modal","data-bs-target":"#kt_modal_add_material"},yo={ref:"hidemodal2",style:{display:"none"},"data-bs-toggle":"modal","data-bs-target":"#kt_modal_alter_material"};function wo(e,t,i,f,a,m){const k=_("KTIcon"),u=_("Datatable"),c=_("AddMaterialModal"),v=_("AlterMaterialModal");return r(),l("div",_o,[s("div",Ao,[s("div",So,[s("div",Ro,[n(k,{"icon-name":"magnifier","icon-class":"fs-1 position-absolute ms-6"}),s("input",{type:"text",onInput:t[0]||(t[0]=(...o)=>m.searchFilter&&m.searchFilter(...o)),ref:"searchBar",class:"form-control form-control-solid w-250px ps-15",placeholder:"Procurar materiais"},null,544)]),s("div",Uo,[s("div",ko,[s("div",{class:g(["selected",{open:a.stateOpen}]),onClick:t[1]||(t[1]=o=>a.stateOpen=!a.stateOpen)},d(this.state),3),s("div",{class:g(["items",{selectHide:!a.stateOpen}])},[s("div",{onClick:t[2]||(t[2]=o=>m.selectState("Todos"))},d("Todos")),s("div",{onClick:t[3]||(t[3]=o=>m.selectState("Ativo"))},d("Ativo")),s("div",{onClick:t[4]||(t[4]=o=>m.selectState("Inativo"))},d("Inativo"))],2),a.stateOpen?(r(),l("div",{key:0,class:"select-closer",onClick:t[5]||(t[5]=o=>a.stateOpen=!1)})):h("",!0)])])]),this.$store.getters.getUser.tipo!="user"?(r(),l("div",vo,[s("div",To,[s("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#kt_modal_add_material","data-backdrop":"false",onClick:t[6]||(t[6]=o=>this.createModalOpen=!0)},[n(k,{"icon-name":"plus","icon-class":"fs-2"}),A(" Adicionar Material ")])])])):h("",!0)]),s("div",Eo,[n(u,{onOnSort:m.sort,data:this.materiaisFiltered,header:a.tableHeader,"enable-items-per-page-dropdown":!0,class:"datatable"},{produto:p(({row:o})=>[A(d(o.produto),1)]),material:p(({row:o})=>[A(d(o.material),1)]),tipo:p(({row:o})=>[A(d(o.tipo),1)]),subtipo:p(({row:o})=>[A(d(o.subtipo),1)]),liga:p(({row:o})=>[A(d(o.liga),1)]),dimensoes:p(({row:o})=>[A(d(o.dimensoes)+"mm ",1)]),estado:p(({row:o})=>[A(d(o.estado),1)]),actions:p(({row:o})=>[this.$store.getters.getUser.tipo!="user"?(r(),l("span",{key:0,title:"Alterar Material",onClick:b=>m.getMaterialToEdit(o.id),"data-bs-toggle":"modal","data-bs-target":"#kt_modal_alter_material",class:"material-icons"},"edit",8,No)):h("",!0),o.estado=="Inativo"&&this.$store.getters.getUser.tipo!="user"?(r(),l("span",{key:1,title:"Ativar Material",onClick:b=>m.toggleMaterial(o.id,"Ativo"),class:"material-icons"},"check_circle",8,Mo)):h("",!0),o.estado=="Ativo"&&this.$store.getters.getUser.tipo!="user"?(r(),l("span",{key:2,title:"Desativar Material",onClick:b=>m.toggleMaterial(o.id,"Inativo"),class:"material-icons"},"cancel",8,Co)):h("",!0),this.$store.getters.getUser.tipo=="superadm"&&o.delete?(r(),l("span",{key:3,title:"Eliminar Material",onClick:b=>m.deleteMaterial(o.id),class:"material-icons"},"delete",8,$o)):h("",!0)]),_:1},8,["onOnSort","data","header"])]),N(n(c,{onCreateMaterial:m.createMaterial,onOpenModal:m.openModal},null,8,["onCreateMaterial","onOpenModal"]),[[M,this.createModalOpen]]),N(n(v,{info:this.editMaterial,onAlterMaterial:m.alterMaterial,onOpenModal:m.openModal},null,8,["info","onAlterMaterial","onOpenModal"]),[[M,this.alterModalOpen]]),s("button",Lo,null,512),s("button",yo,null,512)])}const xo=E(go,[["render",wo],["__scopeId","data-v-1c3f33b4"]]);export{xo as default};
