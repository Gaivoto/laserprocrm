import{_ as F,j as c,k as g,l as b,m as t,A as a,w as i,J as _,a7 as C,a8 as M,r as E,z as $,v as k,x as u,p as P,a4 as V,af as O}from"./index.4fbcc6f6.js";import{D as T}from"./KTDataTable.613d3960.js";import"./assets.521dff05.js";const U={name:"AddFornecedorModal",components:{},data(){return{formInfo:{nome:"",email:"",contacto:"",nif:"",morada:""}}},methods:{verifyFornecedorData(){return this.formInfo.nome.length==0||this.formInfo.email.length==0||this.formInfo.contacto.length==0||this.formInfo.nif.length==0||this.formInfo.morada.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.nome.length>50?(this.$emit("open-modal","O nome n\xE3o pode exceder 50 caracteres."),!1):this.formInfo.email.length>50?(this.$emit("open-modal","O email n\xE3o pode exceder 50 caracteres."),!1):this.formInfo.morada.length>200?(this.$emit("open-modal","A morada n\xE3o pode exceder 200 caracteres."),!1):this.formInfo.contacto.length>13||this.formInfo.contacto.length<9?(this.$emit("open-modal","Introduza um contacto v\xE1lido."),!1):!(this.formInfo.email.includes("@")&&this.formInfo.email.includes("."))||this.formInfo.email.length<8?(this.$emit("open-modal","Introduza um email v\xE1lido."),!1):this.formInfo.nif.length!=9?(this.$emit("open-modal","Introduza um NIF v\xE1lido."),!1):!0},createFornecedor(){this.verifyFornecedorData()&&(this.$emit("create-fornecedor",this.formInfo),this.formInfo={nome:"",email:"",contacto:"",nif:"",morada:""})}}},I=o=>(C("data-v-63582432"),o=o(),M(),o),N={class:"modal fade",id:"kt_modal_add_fornecedor",ref:"addFornecedorModalRef",tabindex:"-1","aria-hidden":"true"},L={class:"modal-dialog modal-dialog-centered mw-650px"},q={class:"modal-content"},z={class:"modal-header",id:"kt_modal_add_fornecedor_header"},R=I(()=>t("h2",{class:"fw-bold"},"Criar Fornecedor",-1)),D={id:"kt_modal_add_fornecedor_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},S={class:"modal-body py-10 px-lg-17"},W={class:"scroll-y me-n7 pe-7",id:"kt_modal_add_fornecedor_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_customer_header","data-kt-scroll-wrappers":"#kt_modal_add_customer_scroll","data-kt-scroll-offset":"300px"},B={class:"fv-row mb-8"},K=I(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Nome",-1)),H={class:"fv-row mb-8"},j=I(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Email",-1)),J={class:"fv-row mb-8"},G=I(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Contacto",-1)),Q={class:"fv-row mb-8"},X=I(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Morada",-1)),Y={class:"fv-row mb-8"},Z=I(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"NIF",-1)),ee={class:"modal-footer flex-center"},oe=I(()=>t("button",{type:"reset",id:"kt_modal_add_customer_cancel",class:"btn btn-light me-3"}," Limpar ",-1));function te(o,e,s,p,l,n){const h=c("KTIcon"),m=c("el-input"),f=c("el-form-item"),v=c("el-form");return g(),b("div",N,[t("div",L,[t("div",q,[t("div",z,[R,t("div",D,[a(h,{"icon-name":"cross","icon-class":"fs-1"})])]),a(v,{model:l.formInfo,ref:"formRef"},{default:i(()=>[t("div",S,[t("div",W,[t("div",B,[K,a(f,{prop:"nome"},{default:i(()=>[a(m,{modelValue:l.formInfo.nome,"onUpdate:modelValue":e[0]||(e[0]=r=>l.formInfo.nome=r),type:"text",placeholder:"Nome"},null,8,["modelValue"])]),_:1})]),t("div",H,[j,a(f,{prop:"email"},{default:i(()=>[a(m,{modelValue:l.formInfo.email,"onUpdate:modelValue":e[1]||(e[1]=r=>l.formInfo.email=r),type:"email",placeholder:"Email"},null,8,["modelValue"])]),_:1})]),t("div",J,[G,a(f,{prop:"contacto"},{default:i(()=>[a(m,{modelValue:l.formInfo.contacto,"onUpdate:modelValue":e[2]||(e[2]=r=>l.formInfo.contacto=r),type:"number",placeholder:"Contacto"},null,8,["modelValue"])]),_:1})]),t("div",Q,[X,a(f,{prop:"morada"},{default:i(()=>[a(m,{modelValue:l.formInfo.morada,"onUpdate:modelValue":e[3]||(e[3]=r=>l.formInfo.morada=r),type:"text",placeholder:"Morada"},null,8,["modelValue"])]),_:1})]),t("div",Y,[Z,a(f,{prop:"nif"},{default:i(()=>[a(m,{modelValue:l.formInfo.nif,"onUpdate:modelValue":e[4]||(e[4]=r=>l.formInfo.nif=r),type:"number",placeholder:"NIF"},null,8,["modelValue"])]),_:1})])])]),t("div",ee,[oe,t("div",{id:"kt_modal_add_customer_cancel",class:"btn btn-lg btn-primary",onClick:e[5]||(e[5]=(...r)=>n.createFornecedor&&n.createFornecedor(...r))},[_(" Criar "),a(h,{"icon-name":"arrow-right","icon-class":"fs-2 me-2 me-0",class:"override-mr0"})])])]),_:1},8,["model"])])])],512)}const se=F(U,[["render",te],["__scopeId","data-v-63582432"]]);const ae={name:"AlterFornecedorModal",components:{},props:{info:{type:Object,required:!0}},data(){return{formInfo:{nome:"",email:"",contacto:"",nif:"",morada:""}}},mounted(){this.formInfo=this.info},methods:{verifyFornecedorData(){return this.formInfo.nome.length==0||this.formInfo.email.length==0||this.formInfo.contacto.length==0||this.formInfo.nif.length==0||this.formInfo.morada.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.nome.length>50?(this.$emit("open-modal","O nome n\xE3o pode exceder 50 caracteres."),!1):this.formInfo.email.length>50?(this.$emit("open-modal","O email n\xE3o pode exceder 50 caracteres."),!1):this.formInfo.morada.length>200?(this.$emit("open-modal","A morada n\xE3o pode exceder 200 caracteres."),!1):this.formInfo.contacto.length>13||this.formInfo.contacto.length<9?(this.$emit("open-modal","Introduza um contacto v\xE1lido."),!1):!(this.formInfo.email.includes("@")&&this.formInfo.email.includes("."))||this.formInfo.email.length<8?(this.$emit("open-modal","Introduza um email v\xE1lido."),!1):this.formInfo.nif.length!=9?(this.$emit("open-modal","Introduza um NIF v\xE1lido."),!1):!0},alterarFornecedor(){this.verifyFornecedorData()&&this.$emit("alter-fornecedor",this.formInfo)},reset(){this.formInfo={...this.info}}},watch:{info:function(o){this.formInfo={...o}}}},w=o=>(C("data-v-e3e1fec4"),o=o(),M(),o),re={class:"modal fade",id:"kt_modal_alter_fornecedor",ref:"alterFornecedorModalRef",tabindex:"-1","aria-hidden":"true"},le={class:"modal-dialog modal-dialog-centered mw-650px"},ne={class:"modal-content"},de={class:"modal-header",id:"kt_modal_alter_fornecedor_header"},ie=w(()=>t("h2",{class:"fw-bold"},"Alterar Fornecedor",-1)),ce={id:"kt_modal_alter_fornecedor_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},me={class:"modal-body py-10 px-lg-17"},fe={class:"scroll-y me-n7 pe-7",id:"kt_modal_alter_fornecedor_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_customer_header","data-kt-scroll-wrappers":"#kt_modal_add_customer_scroll","data-kt-scroll-offset":"300px"},he={class:"fv-row mb-8"},_e=w(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Nome",-1)),pe={class:"fv-row mb-8"},ue=w(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Email",-1)),ge={class:"fv-row mb-8"},be=w(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Contacto",-1)),ve={class:"fv-row mb-8"},ke=w(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Morada",-1)),$e={class:"fv-row mb-8"},Ie=w(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"NIF",-1)),ye={class:"modal-footer flex-center"};function Fe(o,e,s,p,l,n){const h=c("KTIcon"),m=c("el-input"),f=c("el-form-item"),v=c("el-form");return g(),b("div",re,[t("div",le,[t("div",ne,[t("div",de,[ie,t("div",ce,[a(h,{"icon-name":"cross","icon-class":"fs-1"})])]),a(v,{model:l.formInfo,ref:"formRef"},{default:i(()=>[t("div",me,[t("div",fe,[t("div",he,[_e,a(f,{prop:"nome"},{default:i(()=>[a(m,{modelValue:l.formInfo.nome,"onUpdate:modelValue":e[0]||(e[0]=r=>l.formInfo.nome=r),type:"text"},null,8,["modelValue"])]),_:1})]),t("div",pe,[ue,a(f,{prop:"email"},{default:i(()=>[a(m,{modelValue:l.formInfo.email,"onUpdate:modelValue":e[1]||(e[1]=r=>l.formInfo.email=r),type:"email"},null,8,["modelValue"])]),_:1})]),t("div",ge,[be,a(f,{prop:"contacto"},{default:i(()=>[a(m,{modelValue:l.formInfo.contacto,"onUpdate:modelValue":e[2]||(e[2]=r=>l.formInfo.contacto=r),type:"number"},null,8,["modelValue"])]),_:1})]),t("div",ve,[ke,a(f,{prop:"morada"},{default:i(()=>[a(m,{modelValue:l.formInfo.morada,"onUpdate:modelValue":e[3]||(e[3]=r=>l.formInfo.morada=r),type:"text"},null,8,["modelValue"])]),_:1})]),t("div",$e,[Ie,a(f,{prop:"nif"},{default:i(()=>[a(m,{modelValue:l.formInfo.nif,"onUpdate:modelValue":e[4]||(e[4]=r=>l.formInfo.nif=r),type:"number"},null,8,["modelValue"])]),_:1})])])]),t("div",ye,[t("div",{onClick:e[5]||(e[5]=(...r)=>n.reset&&n.reset(...r)),class:"btn btn-light me-3"}," Repor "),t("div",{id:"kt_modal_add_customer_cancel",class:"btn btn-lg btn-primary",onClick:e[6]||(e[6]=(...r)=>n.alterarFornecedor&&n.alterarFornecedor(...r))},[_(" Alterar "),a(h,{"icon-name":"arrow-right","icon-class":"fs-2 me-2 me-0",class:"override-mr0"})])])]),_:1},8,["model"])])])],512)}const we=F(ae,[["render",Fe],["__scopeId","data-v-e3e1fec4"]]);const Ae={name:"AddPessoaModal",data(){return{formInfo:{nome:"",email:"",contacto:"",cargo:""}}},methods:{verifyPessoaData(){return this.formInfo.nome.length==0||this.formInfo.email.length==0||this.formInfo.contacto.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.nome.length>100?(this.$emit("open-modal","O nome n\xE3o pode exceder 100 caracteres."),!1):this.formInfo.email.length>50?(this.$emit("open-modal","O email n\xE3o pode exceder 50 caracteres."),!1):this.formInfo.cargo.length>50?(this.$emit("open-modal","O cargo n\xE3o pode exceder 50 caracteres."),!1):this.formInfo.contacto.length>13||this.formInfo.contacto.length<9?(this.$emit("open-modal","Introduza um contacto v\xE1lido."),!1):!(this.formInfo.email.includes("@")&&this.formInfo.email.includes("."))||this.formInfo.email.length<8?(this.$emit("open-modal","Introduza um email v\xE1lido."),!1):!0},createPessoa(){this.verifyPessoaData()&&(this.$emit("create-pessoa",this.formInfo),this.formInfo={nome:"",email:"",contacto:"",cargo:""})},close(o){o.target.id=="modalWrapper"&&this.$emit("close-create-pessoa")},closeCross(){this.$emit("close-create-pessoa")}}},A=o=>(C("data-v-9f218ffb"),o=o(),M(),o),Ce={class:"modal-header"},Me=A(()=>t("h2",{class:"fw-bold"},"Criar Pessoa de Contacto",-1)),xe={class:"btn btn-icon btn-sm btn-active-icon-primary"},Pe={class:"modal-body py-10 px-lg-17"},Ve={class:"scroll-y me-n7 pe-7 input-wrapper",id:"kt_modal_add_fornecedor_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_customer_header","data-kt-scroll-wrappers":"#kt_modal_add_customer_scroll","data-kt-scroll-offset":"300px"},Oe={class:"fv-row mb-8"},Ee=A(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Nome",-1)),Te={class:"fv-row mb-8"},Ue=A(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Email",-1)),Ne={class:"fv-row mb-8"},Le=A(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Contacto",-1)),qe={class:"fv-row mb-8"},ze=A(()=>t("label",{class:"fs-6 fw-semobold mb-2"},"Cargo",-1)),Re={class:"modal-footer flex-center"},De=A(()=>t("button",{type:"reset",class:"btn btn-light me-3"}," Limpar ",-1));function Se(o,e,s,p,l,n){const h=c("KTIcon"),m=c("el-input"),f=c("el-form-item"),v=c("el-form");return g(),b("div",{onClick:e[5]||(e[5]=(...r)=>n.close&&n.close(...r)),class:"modal-wrapper",id:"modalWrapper"},[t("div",null,[t("div",Ce,[Me,t("div",xe,[a(h,{onClick:n.closeCross,"icon-name":"cross","icon-class":"fs-1"},null,8,["onClick"])])]),a(v,{model:l.formInfo,ref:"formRef"},{default:i(()=>[t("div",Pe,[t("div",Ve,[t("div",Oe,[Ee,a(f,{prop:"nome"},{default:i(()=>[a(m,{modelValue:l.formInfo.nome,"onUpdate:modelValue":e[0]||(e[0]=r=>l.formInfo.nome=r),type:"text",placeholder:"Nome"},null,8,["modelValue"])]),_:1})]),t("div",Te,[Ue,a(f,{prop:"email"},{default:i(()=>[a(m,{modelValue:l.formInfo.email,"onUpdate:modelValue":e[1]||(e[1]=r=>l.formInfo.email=r),type:"email",placeholder:"Email"},null,8,["modelValue"])]),_:1})]),t("div",Ne,[Le,a(f,{prop:"contacto"},{default:i(()=>[a(m,{modelValue:l.formInfo.contacto,"onUpdate:modelValue":e[2]||(e[2]=r=>l.formInfo.contacto=r),type:"number",placeholder:"Contacto"},null,8,["modelValue"])]),_:1})]),t("div",qe,[ze,a(f,{prop:"cargo"},{default:i(()=>[a(m,{modelValue:l.formInfo.cargo,"onUpdate:modelValue":e[3]||(e[3]=r=>l.formInfo.cargo=r),type:"text",placeholder:"Cargo"},null,8,["modelValue"])]),_:1})])])]),t("div",Re,[De,t("div",{class:"btn btn-lg btn-primary",onClick:e[4]||(e[4]=(...r)=>n.createPessoa&&n.createPessoa(...r))},[_(" Criar "),a(h,{"icon-name":"arrow-right","icon-class":"fs-2 me-2 me-0",class:"override-mr0"})])])]),_:1},8,["model"])])])}const We=F(Ae,[["render",Se],["__scopeId","data-v-9f218ffb"]]);const Be={name:"AddPessoaModal",data(){return{formInfo:{nome:"",email:"",contacto:"",cargo:""}}},props:{info:{type:Object,required:!0}},methods:{verifyPessoaData(){return this.formInfo.nome.length==0||this.formInfo.email.length==0||this.formInfo.contacto.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.nome.length>100?(this.$emit("open-modal","O nome n\xE3o pode exceder 100 caracteres."),!1):this.formInfo.email.length>50?(this.$emit("open-modal","O email n\xE3o pode exceder 50 caracteres."),!1):this.formInfo.cargo.length>50?(this.$emit("open-modal","O cargo n\xE3o pode exceder 50 caracteres."),!1):this.formInfo.contacto.length>13||this.formInfo.contacto.length<9?(this.$emit("open-modal","Introduza um contacto v\xE1lido."),!1):!(this.formInfo.email.includes("@")&&this.formInfo.email.includes("."))||this.formInfo.email.length<8?(this.$emit("open-modal","Introduza um email v\xE1lido."),!1):!0},alterPessoa(){this.verifyPessoaData()&&this.$emit("alter-pessoa",this.formInfo)},close(o){o.target.id=="modalWrapper"&&this.$emit("close-alter-pessoa")},closeCross(){this.$emit("close-alter-pessoa")},reset(){this.formInfo={...this.info}}},watch:{info:function(o){this.formInfo={...o}}}},x=o=>(C("data-v-66c4de0c"),o=o(),M(),o),Ke={class:"modal-header"},He=x(()=>t("h2",{class:"fw-bold"},"Alterar Pessoa de Contacto",-1)),je={class:"btn btn-icon btn-sm btn-active-icon-primary"},Je={class:"modal-body py-10 px-lg-17"},Ge={class:"scroll-y me-n7 pe-7 input-wrapper",id:"kt_modal_add_fornecedor_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_customer_header","data-kt-scroll-wrappers":"#kt_modal_add_customer_scroll","data-kt-scroll-offset":"300px"},Qe={class:"fv-row mb-8"},Xe=x(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Nome",-1)),Ye={class:"fv-row mb-8"},Ze=x(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Email",-1)),eo={class:"fv-row mb-8"},oo=x(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Contacto",-1)),to={class:"fv-row mb-8"},so=x(()=>t("label",{class:"fs-6 fw-semobold mb-2"},"Cargo",-1)),ao={class:"modal-footer flex-center"};function ro(o,e,s,p,l,n){const h=c("KTIcon"),m=c("el-input"),f=c("el-form-item"),v=c("el-form");return g(),b("div",{onClick:e[6]||(e[6]=(...r)=>n.close&&n.close(...r)),class:"modal-wrapper",id:"modalWrapper"},[t("div",null,[t("div",Ke,[He,t("div",je,[a(h,{onClick:n.closeCross,"icon-name":"cross","icon-class":"fs-1"},null,8,["onClick"])])]),a(v,{model:l.formInfo,ref:"formRef"},{default:i(()=>[t("div",Je,[t("div",Ge,[t("div",Qe,[Xe,a(f,{prop:"nome"},{default:i(()=>[a(m,{modelValue:l.formInfo.nome,"onUpdate:modelValue":e[0]||(e[0]=r=>l.formInfo.nome=r),type:"text",placeholder:"Nome"},null,8,["modelValue"])]),_:1})]),t("div",Ye,[Ze,a(f,{prop:"email"},{default:i(()=>[a(m,{modelValue:l.formInfo.email,"onUpdate:modelValue":e[1]||(e[1]=r=>l.formInfo.email=r),type:"email",placeholder:"Email"},null,8,["modelValue"])]),_:1})]),t("div",eo,[oo,a(f,{prop:"contacto"},{default:i(()=>[a(m,{modelValue:l.formInfo.contacto,"onUpdate:modelValue":e[2]||(e[2]=r=>l.formInfo.contacto=r),type:"number",placeholder:"Contacto"},null,8,["modelValue"])]),_:1})]),t("div",to,[so,a(f,{prop:"cargo"},{default:i(()=>[a(m,{modelValue:l.formInfo.cargo,"onUpdate:modelValue":e[3]||(e[3]=r=>l.formInfo.cargo=r),type:"text",placeholder:"Cargo"},null,8,["modelValue"])]),_:1})])])]),t("div",ao,[t("button",{onClick:e[4]||(e[4]=(...r)=>n.reset&&n.reset(...r)),type:"reset",class:"btn btn-light me-3"}," Repor "),t("div",{class:"btn btn-lg btn-primary",onClick:e[5]||(e[5]=(...r)=>n.alterPessoa&&n.alterPessoa(...r))},[_(" Alterar "),a(h,{"icon-name":"arrow-right","icon-class":"fs-2 me-2 me-0",class:"override-mr0"})])])]),_:1},8,["model"])])])}const lo=F(Be,[["render",ro],["__scopeId","data-v-66c4de0c"]]);const no={name:"PersonListModal",components:{Datatable:T,AddPessoaModal:We,AlterPessoaModal:lo},props:{idFornecedor:{type:String,required:!0},info:{type:Object,required:!0}},data(){return{tableHeader:[],pessoas:[],createModalOpen:!1,alterModalOpen:!1,editPessoa:{id:"",nome:"",email:"",cargo:"",contacto:""}}},mounted(){let o=[{columnName:"Nome",columnLabel:"nome",sortEnabled:!0,columnWidth:135},{columnName:"Email",columnLabel:"email",sortEnabled:!0,columnWidth:200},{columnName:"Cargo",columnLabel:"cargo",sortEnabled:!0,columnWidth:135},{columnName:"Contacto",columnLabel:"contacto",sortEnabled:!0,columnWidth:130},{columnName:"Estado",columnLabel:"estado",sortEnabled:!0,columnWidth:80}];this.$store.getters.getUser.tipo!="user"&&o.push({columnName:"Actions",columnLabel:"actions",sortEnabled:!1,columnWidth:100}),this.tableHeader=E(o)},methods:{sort(o){switch(o.label){case"nome":o.order=="asc"?this.pessoas.sort((e,s)=>e.nome>s.nome?1:s.nome>e.nome?-1:0):this.pessoas.sort((e,s)=>e.nome<s.nome?1:s.nome<e.nome?-1:0);break;case"email":o.order=="asc"?this.pessoas.sort((e,s)=>e.email>s.email?1:s.email>e.email?-1:0):this.pessoas.sort((e,s)=>e.email<s.email?1:s.email<e.email?-1:0);break;case"cargo":o.order=="asc"?this.pessoas.sort((e,s)=>e.cargo>s.cargo?1:s.cargo>e.cargo?-1:0):this.pessoas.sort((e,s)=>e.cargo<s.cargo?1:s.cargo<e.cargo?-1:0);break;case"contacto":o.order=="asc"?this.pessoas.sort((e,s)=>e.contacto>s.contacto?1:s.contacto>e.contacto?-1:0):this.pessoas.sort((e,s)=>e.contacto<s.contacto?1:s.contacto<e.contacto?-1:0);break;case"estado":o.order=="asc"?this.pessoas.sort((e,s)=>e.estado>s.estado?1:s.estado>e.estado?-1:0):this.pessoas.sort((e,s)=>e.estado<s.estado?1:s.estado<e.estado?-1:0);break}},getPessoaToEdit(o){this.alterModalOpen=!0,this.pessoas.forEach(e=>{e.id==o&&(this.editPessoa=e,this.editPessoa.idFornecedor=this.idFornecedor)})},createPessoa(o){o.idFornecedor=this.idFornecedor,$({method:"post",url:"http://64.225.109.57:3000/api/pessoas/",headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken},data:o}).then(e=>{e.data.access_token&&this.$store.commit("setAccessToken",e.data.access_token),this.$emit("refresh-pessoas"),this.$emit("open-modal","Pessoa de contacto criada com sucesso."),this.createModalOpen=!1}).catch(e=>{e.code?(console.log(e.response.data),this.$emit("open-modal",e.response.data.message),e.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(e)})},togglePessoa(o,e){$({method:"put",url:`http://64.225.109.57:3000/api/pessoas/${o}/toggle`,headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken},data:{estado:e}}).then(s=>{s.data.access_token&&this.$store.commit("setAccessToken",s.data.access_token),this.$emit("refresh-pessoas")}).catch(s=>{s.code?(console.log(s.response.data),this.$emit("open-modal",s.response.data.message),s.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(s)})},alterPessoa(o){$({method:"put",url:`http://64.225.109.57:3000/api/pessoas/${o.id}`,headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken},data:o}).then(e=>{e.data.access_token&&this.$store.commit("setAccessToken",e.data.access_token),this.$emit("refresh-pessoas"),this.$emit("open-modal","Pessoa de contacto alterada com sucesso."),this.alterModalOpen=!1}).catch(e=>{e.code?(console.log(e.response.data),this.$emit("open-modal",e.response.data.message),e.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(e)})},openModal(o){this.$emit("open-modal",o)}},watch:{info:function(o){this.pessoas=[...o]}}},io=o=>(C("data-v-8e449b37"),o=o(),M(),o),co={class:"modal fade",id:"kt_modal_pessoas",ref:"pessoasModalRef",tabindex:"-1","aria-hidden":"true"},mo={class:"modal-dialog modal-dialog-centered person-list-size"},fo={class:"modal-content"},ho={class:"modal-header",id:"kt_modal_pessoas_header"},_o=io(()=>t("h2",{class:"fw-bold"},"Lista de Pessoas de Contacto",-1)),po={id:"kt_modal_pessoas_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},uo={key:0,class:"card-toolbar modal-add-btn"},go={class:"d-flex justify-content-end","data-kt-customer-table-toolbar":"base"},bo={class:"modal-body"},vo={class:"scroll-y me-n7 pe-7",id:"kt_modal_pessoas_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_customer_header","data-kt-scroll-wrappers":"#kt_modal_add_customer_scroll","data-kt-scroll-offset":"300px"},ko={class:"card-body pt-0"},$o=["onClick"],Io=["onClick"],yo=["onClick"];function Fo(o,e,s,p,l,n){const h=c("KTIcon"),m=c("Datatable"),f=c("el-form"),v=c("AddPessoaModal"),r=c("AlterPessoaModal");return g(),b("div",co,[t("div",mo,[t("div",fo,[t("div",ho,[_o,t("div",po,[a(h,{"icon-name":"cross","icon-class":"fs-1"})])]),this.$store.getters.getUser.tipo!="user"?(g(),b("div",uo,[t("div",go,[t("button",{type:"button",class:"btn btn-primary",onClick:e[0]||(e[0]=d=>this.createModalOpen=!0)},[a(h,{"icon-name":"plus","icon-class":"fs-2"}),_(" Adicionar Pessoa de Contacto ")])])])):k("",!0),a(f,{model:o.formInfo,ref:"formRef"},{default:i(()=>[t("div",bo,[t("div",vo,[t("div",ko,[a(m,{onOnSort:n.sort,data:this.pessoas,header:l.tableHeader,"enable-items-per-page-dropdown":!0,class:"datatable"},{nome:i(({row:d})=>[_(u(d.nome),1)]),email:i(({row:d})=>[_(u(d.email),1)]),cargo:i(({row:d})=>[_(u(d.cargo),1)]),contacto:i(({row:d})=>[_(u(d.contacto),1)]),estado:i(({row:d})=>[_(u(d.estado),1)]),actions:i(({row:d})=>[this.$store.getters.getUser.tipo!="user"?(g(),b("span",{key:0,title:"Alterar Pessoa de Contacto",onClick:y=>n.getPessoaToEdit(d.id),class:"material-icons"},"edit",8,$o)):k("",!0),d.estado=="Inativo"&&this.$store.getters.getUser.tipo!="user"?(g(),b("span",{key:1,title:"Ativar Pessoa de Contacto",onClick:y=>n.togglePessoa(d.id,"Ativo"),class:"material-icons"},"check_circle",8,Io)):k("",!0),d.estado=="Ativo"&&this.$store.getters.getUser.tipo!="user"?(g(),b("span",{key:2,title:"Desativar Pessoa de Contacto",onClick:y=>n.togglePessoa(d.id,"Inativo"),class:"material-icons"},"cancel",8,yo)):k("",!0)]),_:1},8,["onOnSort","data","header"])])])])]),_:1},8,["model"])])]),a(v,{class:P({show:this.createModalOpen}),onCreatePessoa:n.createPessoa,onOpenModal:n.openModal,onCloseCreatePessoa:e[1]||(e[1]=d=>this.createModalOpen=!1)},null,8,["class","onCreatePessoa","onOpenModal"]),a(r,{class:P({show:this.alterModalOpen}),onAlterPessoa:n.alterPessoa,onOpenModal:n.openModal,onCloseAlterPessoa:e[2]||(e[2]=d=>this.alterModalOpen=!1),info:this.editPessoa},null,8,["class","onAlterPessoa","onOpenModal","info"])],512)}const wo=F(no,[["render",Fo],["__scopeId","data-v-8e449b37"]]);const Ao={name:"Fornecedores",components:{Datatable:T,AddFornecedorModal:se,AlterFornecedorModal:we,PersonListModal:wo},data(){return{fornecedores:[],fornecedoresFiltered:[],fornPessId:"",pessoas:[],stateOpen:!1,state:"Estado",createModalOpen:!1,alterModalOpen:!1,pessoasModalOpen:!1,editFornecedor:{id:"",nome:"",email:"",contacto:"",nif:"",morada:""}}},setup(){return{tableHeader:E([{columnName:"Fornecedor",columnLabel:"nome",sortEnabled:!0,columnWidth:135},{columnName:"Email",columnLabel:"email",sortEnabled:!0,columnWidth:170},{columnName:"Morada",columnLabel:"morada",sortEnabled:!0,columnWidth:135},{columnName:"Contacto",columnLabel:"contacto",sortEnabled:!0,columnWidth:130},{columnName:"NIF",columnLabel:"nif",sortEnabled:!0,columnWidth:130},{columnName:"Estado",columnLabel:"estado",sortEnabled:!0,columnWidth:80},{columnName:"Actions",columnLabel:"actions",sortEnabled:!1,columnWidth:130}])}},created(){this.$store.getters.getUser.id?this.getAllFornecedores():this.$router.push({name:"login"})},methods:{sort(o){switch(o.label){case"nome":o.order=="asc"?this.fornecedoresFiltered.sort((e,s)=>e.nome>s.nome?1:s.nome>e.nome?-1:0):this.fornecedoresFiltered.sort((e,s)=>e.nome<s.nome?1:s.nome<e.nome?-1:0);break;case"email":o.order=="asc"?this.fornecedoresFiltered.sort((e,s)=>e.email>s.email?1:s.email>e.email?-1:0):this.fornecedoresFiltered.sort((e,s)=>e.email<s.email?1:s.email<e.email?-1:0);break;case"morada":o.order=="asc"?this.fornecedoresFiltered.sort((e,s)=>e.morada>s.morada?1:s.morada>e.morada?-1:0):this.fornecedoresFiltered.sort((e,s)=>e.morada<s.morada?1:s.morada<e.morada?-1:0);break;case"nif":o.order=="asc"?this.fornecedoresFiltered.sort((e,s)=>e.nif>s.nif?1:s.nif>e.nif?-1:0):this.fornecedoresFiltered.sort((e,s)=>e.nif<s.nif?1:s.nif<e.nif?-1:0);break;case"contacto":o.order=="asc"?this.fornecedoresFiltered.sort((e,s)=>e.contacto>s.contacto?1:s.contacto>e.contacto?-1:0):this.fornecedoresFiltered.sort((e,s)=>e.contacto<s.contacto?1:s.contacto<e.contacto?-1:0);break;case"estado":o.order=="asc"?this.fornecedoresFiltered.sort((e,s)=>e.estado>s.estado?1:s.estado>e.estado?-1:0):this.fornecedoresFiltered.sort((e,s)=>e.estado<s.estado?1:s.estado<e.estado?-1:0);break}},searchFilter(){this.fornecedoresFiltered=[];let o=this.$refs.searchBar.value;o!=""?this.fornecedores.forEach(e=>{(e.nome.includes(o)||e.nif.includes(o)||e.morada.includes(o)||e.contacto.includes(o)||e.email.includes(o))&&this.fornecedoresFiltered.push(e)}):this.fornecedores.forEach(e=>this.fornecedoresFiltered.push(e)),this.state!="Estado"&&(this.fornecedoresFiltered=this.fornecedoresFiltered.filter(e=>e.estado==this.state))},selectState(o){this.state=o,this.stateOpen=!1,this.searchFilter()},getFornecedorToEdit(o){this.alterModalOpen=!0,this.fornecedores.forEach(e=>{e.id==o&&(this.editFornecedor=e)})},openPessoas(o,e){this.pessoasModalOpen=!0,this.fornPessId=o,this.pessoas=[],e.forEach(s=>{this.pessoas.push(s)})},getAllFornecedores(){this.fornecedores=[],this.fornecedoresFiltered=[],this.state="Estado",$({method:"get",url:"http://64.225.109.57:3000/api/fornecedores",headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken}}).then(o=>{o.data.access_token&&this.$store.commit("setAccessToken",o.data.access_token),o.data.fornecedores.forEach(e=>this.fornecedores.push(e)),o.data.fornecedores.forEach(e=>this.fornecedoresFiltered.push(e)),this.fornecedores.forEach(e=>{e.pessoas.sort((s,p)=>s.id>p.id?1:p.id>s.id?-1:0),e.id==this.fornPessId&&(this.pessoas=[...e.pessoas])})}).catch(o=>{o.code?(console.log(o.response.data),this.$emit("open-modal",o.response.data.message),o.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(o)})},createFornecedor(o){this.createModalOpen=!1,this.$refs.hidemodal1.click(),$({method:"post",url:"http://64.225.109.57:3000/api/fornecedores",headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken},data:o}).then(e=>{e.data.access_token&&this.$store.commit("setAccessToken",e.data.access_token),this.getAllFornecedores(),this.$emit("open-modal","Fornecedor criado com sucesso.")}).catch(e=>{e.code?(console.log(e.response.data),this.$emit("open-modal",e.response.data.message),e.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(e)})},toggleFornecedor(o,e){$({method:"put",url:`http://64.225.109.57:3000/api/fornecedores/${o}/toggle`,headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken},data:{estado:e}}).then(s=>{s.data.access_token&&this.$store.commit("setAccessToken",s.data.access_token),this.fornecedores.forEach(p=>{p.id==o&&(p.estado=e)}),this.fornecedoresFiltered.forEach(p=>{p.id==o&&(p.estado=e)})}).catch(s=>{s.code?(console.log(s.response.data),this.$emit("open-modal",s.response.data.message),s.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(s)})},alterFornecedor(o){this.createModalOpen=!1,this.$refs.hidemodal2.click(),$({method:"put",url:`http://64.225.109.57:3000/api/fornecedores/${o.id}`,headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken},data:o}).then(e=>{e.data.access_token&&this.$store.commit("setAccessToken",e.data.access_token),this.getAllFornecedores(),this.$emit("open-modal","Fornecedor alterado com sucesso.")}).catch(e=>{e.code?(console.log(e.response.data),this.$emit("open-modal",e.response.data.message),e.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(e)})},openModal(o){this.$emit("open-modal",o)}}},Co={class:"card"},Mo={class:"card-header border-0 pt-6"},xo={class:"card-title"},Po={class:"d-flex align-items-center position-relative my-1"},Vo={class:"d-flex align-items-center position-relative my-1"},Oo={class:"custom-select"},Eo={key:0,class:"card-toolbar"},To={class:"d-flex justify-content-end","data-kt-customer-table-toolbar":"base"},Uo={class:"card-body pt-0"},No={href:"#",class:"text-gray-600 text-hover-primary mb-1"},Lo=["onClick"],qo=["onClick"],zo=["onClick"],Ro=["onClick"],Do={ref:"hidemodal1",style:{display:"none"},"data-bs-toggle":"modal","data-bs-target":"#kt_modal_add_fornecedor"},So={ref:"hidemodal2",style:{display:"none"},"data-bs-toggle":"modal","data-bs-target":"#kt_modal_alter_fornecedor"},Wo={ref:"hidemodal3",style:{display:"none"},"data-bs-toggle":"modal","data-bs-target":"#kt_modal_pessoas"};function Bo(o,e,s,p,l,n){const h=c("KTIcon"),m=c("Datatable"),f=c("AddFornecedorModal"),v=c("AlterFornecedorModal"),r=c("PersonListModal");return g(),b("div",Co,[t("div",Mo,[t("div",xo,[t("div",Po,[a(h,{"icon-name":"magnifier","icon-class":"fs-1 position-absolute ms-6"}),t("input",{type:"text",onInput:e[0]||(e[0]=(...d)=>n.searchFilter&&n.searchFilter(...d)),ref:"searchBar",class:"form-control form-control-solid w-250px ps-15",placeholder:"Procurar fornecedores"},null,544)]),t("div",Vo,[t("div",Oo,[t("div",{class:P(["selected",{open:l.stateOpen}]),onClick:e[1]||(e[1]=d=>l.stateOpen=!l.stateOpen)},u(this.state),3),t("div",{class:P(["items",{selectHide:!l.stateOpen}])},[t("div",{onClick:e[2]||(e[2]=d=>n.selectState("Ativo"))},u("Ativo")),t("div",{onClick:e[3]||(e[3]=d=>n.selectState("Inativo"))},u("Inativo"))],2)])])]),this.$store.getters.getUser.tipo!="user"?(g(),b("div",Eo,[t("div",To,[t("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#kt_modal_add_fornecedor","data-backdrop":"false",onClick:e[4]||(e[4]=d=>this.createModalOpen=!0)},[a(h,{"icon-name":"plus","icon-class":"fs-2"}),_(" Adicionar Fornecedor ")])])])):k("",!0)]),t("div",Uo,[a(m,{onOnSort:n.sort,data:this.fornecedoresFiltered,header:p.tableHeader,"enable-items-per-page-dropdown":!0,class:"datatable"},{nome:i(({row:d})=>[_(u(d.nome),1)]),email:i(({row:d})=>[t("a",No,u(d.email),1)]),morada:i(({row:d})=>[_(u(d.morada),1)]),contacto:i(({row:d})=>[_(u(d.contacto),1)]),nif:i(({row:d})=>[_(u(d.nif),1)]),estado:i(({row:d})=>[_(u(d.estado),1)]),actions:i(({row:d})=>[this.$store.getters.getUser.tipo!="user"?(g(),b("span",{key:0,title:"Alterar Fornecedor",onClick:y=>n.getFornecedorToEdit(d.id),"data-bs-toggle":"modal","data-bs-target":"#kt_modal_alter_fornecedor",class:"material-icons"},"edit",8,Lo)):k("",!0),d.estado=="Inativo"&&this.$store.getters.getUser.tipo!="user"?(g(),b("span",{key:1,title:"Ativar Fornecedor",onClick:y=>n.toggleFornecedor(d.id,"Ativo"),class:"material-icons"},"check_circle",8,qo)):k("",!0),d.estado=="Ativo"&&this.$store.getters.getUser.tipo!="user"?(g(),b("span",{key:2,title:"Desativar Fornecedor",onClick:y=>n.toggleFornecedor(d.id,"Inativo"),class:"material-icons"},"cancel",8,zo)):k("",!0),t("span",{title:"Ver Pessoas de Contacto",onClick:y=>n.openPessoas(d.id,d.pessoas),"data-bs-toggle":"modal","data-bs-target":"#kt_modal_pessoas",class:"material-icons"},"group",8,Ro)]),_:1},8,["onOnSort","data","header"])]),V(a(f,{onCreateFornecedor:n.createFornecedor,onOpenModal:n.openModal},null,8,["onCreateFornecedor","onOpenModal"]),[[O,this.createModalOpen]]),V(a(v,{info:this.editFornecedor,onAlterFornecedor:n.alterFornecedor,onOpenModal:n.openModal},null,8,["info","onAlterFornecedor","onOpenModal"]),[[O,this.alterModalOpen]]),V(a(r,{onOpenModal:n.openModal,onRefreshPessoas:n.getAllFornecedores,info:this.pessoas,idFornecedor:this.fornPessId},null,8,["onOpenModal","onRefreshPessoas","info","idFornecedor"]),[[O,this.pessoasModalOpen]]),t("button",Do,null,512),t("button",So,null,512),t("button",Wo,null,512)])}const Jo=F(Ao,[["render",Bo],["__scopeId","data-v-a86c92a7"]]);export{Jo as default};
