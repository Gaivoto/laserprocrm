import{_ as F,j as c,k as g,l as b,m as t,A as r,w as i,J as p,a7 as A,a8 as M,r as E,z as k,v as I,x as u,p as P,a4 as V,af as O}from"./index.6a223682.js";import{D as U}from"./KTDataTable.a5e5f51e.js";import"./assets.7d1727ea.js";const T={name:"AddFornecedorModal",components:{},data(){return{formInfo:{nome:"",email:"",contacto:"",nif:"",morada:""}}},methods:{verifyFornecedorData(){return this.formInfo.nome.length==0||this.formInfo.email.length==0||this.formInfo.contacto.length==0||this.formInfo.nif.length==0||this.formInfo.morada.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.nome.length>50?(this.$emit("open-modal","O nome n\xE3o pode exceder 50 caracteres."),!1):this.formInfo.email.length>50?(this.$emit("open-modal","O email n\xE3o pode exceder 50 caracteres."),!1):this.formInfo.morada.length>200?(this.$emit("open-modal","A morada n\xE3o pode exceder 200 caracteres."),!1):this.formInfo.contacto.length>13||this.formInfo.contacto.length<9?(this.$emit("open-modal","Introduza um contacto v\xE1lido."),!1):!(this.formInfo.email.includes("@")&&this.formInfo.email.includes("."))||this.formInfo.email.length<8?(this.$emit("open-modal","Introduza um email v\xE1lido."),!1):this.formInfo.nif.length!=9?(this.$emit("open-modal","Introduza um NIF v\xE1lido."),!1):!0},createFornecedor(){this.verifyFornecedorData()&&(this.$emit("create-fornecedor",this.formInfo),this.formInfo={nome:"",email:"",contacto:"",nif:"",morada:""})},reset(o){(o.target.id=="kt_modal_add_fornecedor"||o.target.id=="kt_modal_add_fornecedor_close"||o.target.id=="kt_modal_add_fornecedor_close_btn"||o.target.parentElement.id=="kt_modal_add_fornecedor_close_btn")&&(this.formInfo={nome:"",email:"",contacto:"",nif:"",morada:""})}}},$=o=>(A("data-v-f77cc603"),o=o(),M(),o),N={class:"modal-dialog modal-dialog-centered mw-650px"},L={class:"modal-content"},q={class:"modal-header",id:"kt_modal_add_fornecedor_header"},z=$(()=>t("h2",{class:"fw-bold"},"Criar Fornecedor",-1)),R={class:"modal-body py-10 px-lg-17"},D={class:"scroll-y me-n7 pe-7",id:"kt_modal_add_fornecedor_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_customer_header","data-kt-scroll-wrappers":"#kt_modal_add_customer_scroll","data-kt-scroll-offset":"300px"},S={class:"fv-row mb-8"},W=$(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Nome",-1)),B={class:"fv-row mb-8"},K=$(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Email",-1)),H={class:"fv-row mb-8"},j=$(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Contacto",-1)),J={class:"fv-row mb-8"},G=$(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Morada",-1)),Q={class:"fv-row mb-8"},X=$(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"NIF",-1)),Y={class:"modal-footer flex-center"},Z=$(()=>t("button",{type:"reset",id:"kt_modal_add_customer_cancel",class:"btn btn-light me-3"}," Limpar ",-1));function ee(o,e,s,_,n,l){const h=c("KTIcon"),m=c("el-input"),f=c("el-form-item"),v=c("el-form");return g(),b("div",{class:"modal fade",id:"kt_modal_add_fornecedor",ref:"addFornecedorModalRef",tabindex:"-1","aria-hidden":"true",onClick:e[9]||(e[9]=(...a)=>l.reset&&l.reset(...a))},[t("div",N,[t("div",L,[t("div",q,[z,t("div",{id:"kt_modal_add_fornecedor_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary",onClick:e[0]||(e[0]=(...a)=>l.reset&&l.reset(...a))},[r(h,{id:"kt_modal_add_fornecedor_close_btn","icon-name":"cross","icon-class":"fs-1"})])]),r(v,{model:n.formInfo,ref:"formRef"},{default:i(()=>[t("div",R,[t("div",D,[t("div",S,[W,r(f,{prop:"nome"},{default:i(()=>[r(m,{modelValue:n.formInfo.nome,"onUpdate:modelValue":e[1]||(e[1]=a=>n.formInfo.nome=a),type:"text",placeholder:"Nome",onInput:e[2]||(e[2]=a=>this.formInfo.nome=this.formInfo.nome.toUpperCase())},null,8,["modelValue"])]),_:1})]),t("div",B,[K,r(f,{prop:"email"},{default:i(()=>[r(m,{modelValue:n.formInfo.email,"onUpdate:modelValue":e[3]||(e[3]=a=>n.formInfo.email=a),type:"email",placeholder:"Email"},null,8,["modelValue"])]),_:1})]),t("div",H,[j,r(f,{prop:"contacto"},{default:i(()=>[r(m,{modelValue:n.formInfo.contacto,"onUpdate:modelValue":e[4]||(e[4]=a=>n.formInfo.contacto=a),type:"number",placeholder:"Contacto"},null,8,["modelValue"])]),_:1})]),t("div",J,[G,r(f,{prop:"morada"},{default:i(()=>[r(m,{modelValue:n.formInfo.morada,"onUpdate:modelValue":e[5]||(e[5]=a=>n.formInfo.morada=a),type:"text",placeholder:"Morada",onInput:e[6]||(e[6]=a=>this.formInfo.morada=this.formInfo.morada.toUpperCase())},null,8,["modelValue"])]),_:1})]),t("div",Q,[X,r(f,{prop:"nif"},{default:i(()=>[r(m,{modelValue:n.formInfo.nif,"onUpdate:modelValue":e[7]||(e[7]=a=>n.formInfo.nif=a),type:"number",placeholder:"NIF"},null,8,["modelValue"])]),_:1})])])]),t("div",Y,[Z,t("div",{id:"kt_modal_add_customer_cancel",class:"btn btn-lg btn-primary",onClick:e[8]||(e[8]=(...a)=>l.createFornecedor&&l.createFornecedor(...a))},[p(" Criar "),r(h,{"icon-name":"arrow-right","icon-class":"fs-2 me-2 me-0",class:"override-mr0"})])])]),_:1},8,["model"])])])],512)}const oe=F(T,[["render",ee],["__scopeId","data-v-f77cc603"]]);const te={name:"AlterFornecedorModal",components:{},props:{info:{type:Object,required:!0}},data(){return{formInfo:{nome:"",email:"",contacto:"",nif:"",morada:""}}},mounted(){this.formInfo=this.info},methods:{verifyFornecedorData(){return this.formInfo.nome.length==0||this.formInfo.email.length==0||this.formInfo.contacto.length==0||this.formInfo.nif.length==0||this.formInfo.morada.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.nome.length>50?(this.$emit("open-modal","O nome n\xE3o pode exceder 50 caracteres."),!1):this.formInfo.email.length>50?(this.$emit("open-modal","O email n\xE3o pode exceder 50 caracteres."),!1):this.formInfo.morada.length>200?(this.$emit("open-modal","A morada n\xE3o pode exceder 200 caracteres."),!1):this.formInfo.contacto.length>13||this.formInfo.contacto.length<9?(this.$emit("open-modal","Introduza um contacto v\xE1lido."),!1):!(this.formInfo.email.includes("@")&&this.formInfo.email.includes("."))||this.formInfo.email.length<8?(this.$emit("open-modal","Introduza um email v\xE1lido."),!1):this.formInfo.nif.length!=9?(this.$emit("open-modal","Introduza um NIF v\xE1lido."),!1):!0},alterarFornecedor(){this.verifyFornecedorData()&&this.$emit("alter-fornecedor",this.formInfo)},reset(){this.formInfo={...this.info}}},watch:{info:function(o){this.formInfo={...o}}}},w=o=>(A("data-v-3b6fb375"),o=o(),M(),o),se={class:"modal fade",id:"kt_modal_alter_fornecedor",ref:"alterFornecedorModalRef",tabindex:"-1","aria-hidden":"true"},ae={class:"modal-dialog modal-dialog-centered mw-650px"},re={class:"modal-content"},ne={class:"modal-header",id:"kt_modal_alter_fornecedor_header"},le=w(()=>t("h2",{class:"fw-bold"},"Alterar Fornecedor",-1)),de={id:"kt_modal_alter_fornecedor_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},ie={class:"modal-body py-10 px-lg-17"},ce={class:"scroll-y me-n7 pe-7",id:"kt_modal_alter_fornecedor_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_customer_header","data-kt-scroll-wrappers":"#kt_modal_add_customer_scroll","data-kt-scroll-offset":"300px"},me={class:"fv-row mb-8"},fe=w(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Nome",-1)),he={class:"fv-row mb-8"},pe=w(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Email",-1)),_e={class:"fv-row mb-8"},ue=w(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Contacto",-1)),ge={class:"fv-row mb-8"},be=w(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Morada",-1)),ve={class:"fv-row mb-8"},Ie=w(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"NIF",-1)),ke={class:"modal-footer flex-center"};function $e(o,e,s,_,n,l){const h=c("KTIcon"),m=c("el-input"),f=c("el-form-item"),v=c("el-form");return g(),b("div",se,[t("div",ae,[t("div",re,[t("div",ne,[le,t("div",de,[r(h,{"icon-name":"cross","icon-class":"fs-1"})])]),r(v,{model:n.formInfo,ref:"formRef"},{default:i(()=>[t("div",ie,[t("div",ce,[t("div",me,[fe,r(f,{prop:"nome"},{default:i(()=>[r(m,{modelValue:n.formInfo.nome,"onUpdate:modelValue":e[0]||(e[0]=a=>n.formInfo.nome=a),type:"text",onInput:e[1]||(e[1]=a=>this.formInfo.nome=this.formInfo.nome.toUpperCase())},null,8,["modelValue"])]),_:1})]),t("div",he,[pe,r(f,{prop:"email"},{default:i(()=>[r(m,{modelValue:n.formInfo.email,"onUpdate:modelValue":e[2]||(e[2]=a=>n.formInfo.email=a),type:"email"},null,8,["modelValue"])]),_:1})]),t("div",_e,[ue,r(f,{prop:"contacto"},{default:i(()=>[r(m,{modelValue:n.formInfo.contacto,"onUpdate:modelValue":e[3]||(e[3]=a=>n.formInfo.contacto=a),type:"number"},null,8,["modelValue"])]),_:1})]),t("div",ge,[be,r(f,{prop:"morada"},{default:i(()=>[r(m,{modelValue:n.formInfo.morada,"onUpdate:modelValue":e[4]||(e[4]=a=>n.formInfo.morada=a),type:"text",onInput:e[5]||(e[5]=a=>this.formInfo.morada=this.formInfo.morada.toUpperCase())},null,8,["modelValue"])]),_:1})]),t("div",ve,[Ie,r(f,{prop:"nif"},{default:i(()=>[r(m,{modelValue:n.formInfo.nif,"onUpdate:modelValue":e[6]||(e[6]=a=>n.formInfo.nif=a),type:"number"},null,8,["modelValue"])]),_:1})])])]),t("div",ke,[t("div",{onClick:e[7]||(e[7]=(...a)=>l.reset&&l.reset(...a)),class:"btn btn-light me-3"}," Repor "),t("div",{id:"kt_modal_add_customer_cancel",class:"btn btn-lg btn-primary",onClick:e[8]||(e[8]=(...a)=>l.alterarFornecedor&&l.alterarFornecedor(...a))},[p(" Alterar "),r(h,{"icon-name":"arrow-right","icon-class":"fs-2 me-2 me-0",class:"override-mr0"})])])]),_:1},8,["model"])])])],512)}const ye=F(te,[["render",$e],["__scopeId","data-v-3b6fb375"]]);const Fe={name:"AddPessoaModal",data(){return{formInfo:{nome:"",email:"",contacto:"",cargo:""}}},methods:{verifyPessoaData(){return this.formInfo.nome.length==0||this.formInfo.email.length==0||this.formInfo.contacto.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.nome.length>100?(this.$emit("open-modal","O nome n\xE3o pode exceder 100 caracteres."),!1):this.formInfo.email.length>50?(this.$emit("open-modal","O email n\xE3o pode exceder 50 caracteres."),!1):this.formInfo.cargo.length>50?(this.$emit("open-modal","O cargo n\xE3o pode exceder 50 caracteres."),!1):this.formInfo.contacto.length>13||this.formInfo.contacto.length<9?(this.$emit("open-modal","Introduza um contacto v\xE1lido."),!1):!(this.formInfo.email.includes("@")&&this.formInfo.email.includes("."))||this.formInfo.email.length<8?(this.$emit("open-modal","Introduza um email v\xE1lido."),!1):!0},createPessoa(){this.verifyPessoaData()&&(this.$emit("create-pessoa",this.formInfo),this.reset())},reset(){this.formInfo={nome:"",email:"",contacto:"",cargo:""}},close(o){o.target.id=="modalWrapper"&&(this.$emit("close-create-pessoa"),this.reset())},closeCross(){this.$emit("close-create-pessoa"),this.reset()}}},C=o=>(A("data-v-6c8d7eaa"),o=o(),M(),o),we={class:"modal-header"},Ce=C(()=>t("h2",{class:"fw-bold"},"Criar Pessoa de Contacto",-1)),Ae={class:"btn btn-icon btn-sm btn-active-icon-primary"},Me={class:"modal-body py-10 px-lg-17"},xe={class:"scroll-y me-n7 pe-7 input-wrapper",id:"kt_modal_add_fornecedor_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_customer_header","data-kt-scroll-wrappers":"#kt_modal_add_customer_scroll","data-kt-scroll-offset":"300px"},Pe={class:"fv-row mb-8"},Ve=C(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Nome",-1)),Oe={class:"fv-row mb-8"},Ee=C(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Email",-1)),Ue={class:"fv-row mb-8"},Te=C(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Contacto",-1)),Ne={class:"fv-row mb-8"},Le=C(()=>t("label",{class:"fs-6 fw-semobold mb-2"},"Cargo",-1)),qe={class:"modal-footer flex-center"},ze=C(()=>t("button",{type:"reset",class:"btn btn-light me-3"}," Limpar ",-1));function Re(o,e,s,_,n,l){const h=c("KTIcon"),m=c("el-input"),f=c("el-form-item"),v=c("el-form");return g(),b("div",{onClick:e[7]||(e[7]=(...a)=>l.close&&l.close(...a)),class:"modal-wrapper",id:"modalWrapper"},[t("div",null,[t("div",we,[Ce,t("div",Ae,[r(h,{onClick:l.closeCross,"icon-name":"cross","icon-class":"fs-1"},null,8,["onClick"])])]),r(v,{model:n.formInfo,ref:"formRef"},{default:i(()=>[t("div",Me,[t("div",xe,[t("div",Pe,[Ve,r(f,{prop:"nome"},{default:i(()=>[r(m,{modelValue:n.formInfo.nome,"onUpdate:modelValue":e[0]||(e[0]=a=>n.formInfo.nome=a),type:"text",placeholder:"Nome",onInput:e[1]||(e[1]=a=>this.formInfo.nome=this.formInfo.nome.toUpperCase())},null,8,["modelValue"])]),_:1})]),t("div",Oe,[Ee,r(f,{prop:"email"},{default:i(()=>[r(m,{modelValue:n.formInfo.email,"onUpdate:modelValue":e[2]||(e[2]=a=>n.formInfo.email=a),type:"email",placeholder:"Email"},null,8,["modelValue"])]),_:1})]),t("div",Ue,[Te,r(f,{prop:"contacto"},{default:i(()=>[r(m,{modelValue:n.formInfo.contacto,"onUpdate:modelValue":e[3]||(e[3]=a=>n.formInfo.contacto=a),type:"number",placeholder:"Contacto"},null,8,["modelValue"])]),_:1})]),t("div",Ne,[Le,r(f,{prop:"cargo"},{default:i(()=>[r(m,{modelValue:n.formInfo.cargo,"onUpdate:modelValue":e[4]||(e[4]=a=>n.formInfo.cargo=a),type:"text",placeholder:"Cargo",onInput:e[5]||(e[5]=a=>this.formInfo.cargo=this.formInfo.cargo.toUpperCase())},null,8,["modelValue"])]),_:1})])])]),t("div",qe,[ze,t("div",{class:"btn btn-lg btn-primary",onClick:e[6]||(e[6]=(...a)=>l.createPessoa&&l.createPessoa(...a))},[p(" Criar "),r(h,{"icon-name":"arrow-right","icon-class":"fs-2 me-2 me-0",class:"override-mr0"})])])]),_:1},8,["model"])])])}const De=F(Fe,[["render",Re],["__scopeId","data-v-6c8d7eaa"]]);const Se={name:"AddPessoaModal",data(){return{formInfo:{nome:"",email:"",contacto:"",cargo:""}}},props:{info:{type:Object,required:!0}},methods:{verifyPessoaData(){return this.formInfo.nome.length==0||this.formInfo.email.length==0||this.formInfo.contacto.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.nome.length>100?(this.$emit("open-modal","O nome n\xE3o pode exceder 100 caracteres."),!1):this.formInfo.email.length>50?(this.$emit("open-modal","O email n\xE3o pode exceder 50 caracteres."),!1):this.formInfo.cargo.length>50?(this.$emit("open-modal","O cargo n\xE3o pode exceder 50 caracteres."),!1):this.formInfo.contacto.length>13||this.formInfo.contacto.length<9?(this.$emit("open-modal","Introduza um contacto v\xE1lido."),!1):!(this.formInfo.email.includes("@")&&this.formInfo.email.includes("."))||this.formInfo.email.length<8?(this.$emit("open-modal","Introduza um email v\xE1lido."),!1):!0},alterPessoa(){this.verifyPessoaData()&&this.$emit("alter-pessoa",this.formInfo)},close(o){o.target.id=="modalWrapper"&&this.$emit("close-alter-pessoa")},closeCross(){this.$emit("close-alter-pessoa")},reset(){this.formInfo={...this.info}}},watch:{info:function(o){this.formInfo={...o}}}},x=o=>(A("data-v-e457365b"),o=o(),M(),o),We={class:"modal-header"},Be=x(()=>t("h2",{class:"fw-bold"},"Alterar Pessoa de Contacto",-1)),Ke={class:"btn btn-icon btn-sm btn-active-icon-primary"},He={class:"modal-body py-10 px-lg-17"},je={class:"scroll-y me-n7 pe-7 input-wrapper",id:"kt_modal_add_fornecedor_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_customer_header","data-kt-scroll-wrappers":"#kt_modal_add_customer_scroll","data-kt-scroll-offset":"300px"},Je={class:"fv-row mb-8"},Ge=x(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Nome",-1)),Qe={class:"fv-row mb-8"},Xe=x(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Email",-1)),Ye={class:"fv-row mb-8"},Ze=x(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Contacto",-1)),eo={class:"fv-row mb-8"},oo=x(()=>t("label",{class:"fs-6 fw-semobold mb-2"},"Cargo",-1)),to={class:"modal-footer flex-center"};function so(o,e,s,_,n,l){const h=c("KTIcon"),m=c("el-input"),f=c("el-form-item"),v=c("el-form");return g(),b("div",{onClick:e[8]||(e[8]=(...a)=>l.close&&l.close(...a)),class:"modal-wrapper",id:"modalWrapper"},[t("div",null,[t("div",We,[Be,t("div",Ke,[r(h,{onClick:l.closeCross,"icon-name":"cross","icon-class":"fs-1"},null,8,["onClick"])])]),r(v,{model:n.formInfo,ref:"formRef"},{default:i(()=>[t("div",He,[t("div",je,[t("div",Je,[Ge,r(f,{prop:"nome"},{default:i(()=>[r(m,{modelValue:n.formInfo.nome,"onUpdate:modelValue":e[0]||(e[0]=a=>n.formInfo.nome=a),type:"text",placeholder:"Nome",onInput:e[1]||(e[1]=a=>this.formInfo.nome=this.formInfo.nome.toUpperCase())},null,8,["modelValue"])]),_:1})]),t("div",Qe,[Xe,r(f,{prop:"email"},{default:i(()=>[r(m,{modelValue:n.formInfo.email,"onUpdate:modelValue":e[2]||(e[2]=a=>n.formInfo.email=a),type:"email",placeholder:"Email"},null,8,["modelValue"])]),_:1})]),t("div",Ye,[Ze,r(f,{prop:"contacto"},{default:i(()=>[r(m,{modelValue:n.formInfo.contacto,"onUpdate:modelValue":e[3]||(e[3]=a=>n.formInfo.contacto=a),type:"number",placeholder:"Contacto"},null,8,["modelValue"])]),_:1})]),t("div",eo,[oo,r(f,{prop:"cargo"},{default:i(()=>[r(m,{modelValue:n.formInfo.cargo,"onUpdate:modelValue":e[4]||(e[4]=a=>n.formInfo.cargo=a),type:"text",placeholder:"Cargo",onInput:e[5]||(e[5]=a=>this.formInfo.cargo=this.formInfo.cargo.toUpperCase())},null,8,["modelValue"])]),_:1})])])]),t("div",to,[t("button",{onClick:e[6]||(e[6]=(...a)=>l.reset&&l.reset(...a)),type:"reset",class:"btn btn-light me-3"}," Repor "),t("div",{class:"btn btn-lg btn-primary",onClick:e[7]||(e[7]=(...a)=>l.alterPessoa&&l.alterPessoa(...a))},[p(" Alterar "),r(h,{"icon-name":"arrow-right","icon-class":"fs-2 me-2 me-0",class:"override-mr0"})])])]),_:1},8,["model"])])])}const ao=F(Se,[["render",so],["__scopeId","data-v-e457365b"]]);const ro={name:"PersonListModal",components:{Datatable:U,AddPessoaModal:De,AlterPessoaModal:ao},props:{idFornecedor:{type:String,required:!0},info:{type:Object,required:!0}},data(){return{tableHeader:[],pessoas:[],createModalOpen:!1,alterModalOpen:!1,editPessoa:{id:"",nome:"",email:"",cargo:"",contacto:""}}},mounted(){let o=[{columnName:"Nome",columnLabel:"nome",sortEnabled:!0,columnWidth:135},{columnName:"Email",columnLabel:"email",sortEnabled:!0,columnWidth:200},{columnName:"Cargo",columnLabel:"cargo",sortEnabled:!0,columnWidth:135},{columnName:"Contacto",columnLabel:"contacto",sortEnabled:!0,columnWidth:130},{columnName:"Estado",columnLabel:"estado",sortEnabled:!0,columnWidth:80}];this.$store.getters.getUser.tipo!="user"&&o.push({columnName:"Actions",columnLabel:"actions",sortEnabled:!1,columnWidth:100}),this.tableHeader=E(o)},methods:{sort(o){switch(o.label){case"nome":o.order=="asc"?this.pessoas.sort((e,s)=>e.nome>s.nome?1:s.nome>e.nome?-1:0):this.pessoas.sort((e,s)=>e.nome<s.nome?1:s.nome<e.nome?-1:0);break;case"email":o.order=="asc"?this.pessoas.sort((e,s)=>e.email>s.email?1:s.email>e.email?-1:0):this.pessoas.sort((e,s)=>e.email<s.email?1:s.email<e.email?-1:0);break;case"cargo":o.order=="asc"?this.pessoas.sort((e,s)=>e.cargo>s.cargo?1:s.cargo>e.cargo?-1:0):this.pessoas.sort((e,s)=>e.cargo<s.cargo?1:s.cargo<e.cargo?-1:0);break;case"contacto":o.order=="asc"?this.pessoas.sort((e,s)=>e.contacto>s.contacto?1:s.contacto>e.contacto?-1:0):this.pessoas.sort((e,s)=>e.contacto<s.contacto?1:s.contacto<e.contacto?-1:0);break;case"estado":o.order=="asc"?this.pessoas.sort((e,s)=>e.estado>s.estado?1:s.estado>e.estado?-1:0):this.pessoas.sort((e,s)=>e.estado<s.estado?1:s.estado<e.estado?-1:0);break}},getPessoaToEdit(o){this.alterModalOpen=!0,this.pessoas.forEach(e=>{e.id==o&&(this.editPessoa=e,this.editPessoa.idFornecedor=this.idFornecedor)})},createPessoa(o){o.idFornecedor=this.idFornecedor,k({method:"post",url:"http://64.225.109.57:4000/api/pessoas/",headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken},data:o}).then(e=>{e.data.access_token&&this.$store.commit("setAccessToken",e.data.access_token),this.$emit("refresh-pessoas"),this.$emit("open-modal","Pessoa de contacto criada com sucesso."),this.createModalOpen=!1}).catch(e=>{e.code?(console.log(e.response.data),this.$emit("open-modal",e.response.data.message),e.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(e)})},togglePessoa(o,e){k({method:"put",url:`http://64.225.109.57:4000/api/pessoas/${o}/toggle`,headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken},data:{estado:e}}).then(s=>{s.data.access_token&&this.$store.commit("setAccessToken",s.data.access_token),this.$emit("refresh-pessoas")}).catch(s=>{s.code?(console.log(s.response.data),this.$emit("open-modal",s.response.data.message),s.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(s)})},alterPessoa(o){k({method:"put",url:`http://64.225.109.57:4000/api/pessoas/${o.id}`,headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken},data:o}).then(e=>{e.data.access_token&&this.$store.commit("setAccessToken",e.data.access_token),this.$emit("refresh-pessoas"),this.$emit("open-modal","Pessoa de contacto alterada com sucesso."),this.alterModalOpen=!1}).catch(e=>{e.code?(console.log(e.response.data),this.$emit("open-modal",e.response.data.message),e.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(e)})},openModal(o){this.$emit("open-modal",o)}},watch:{info:function(o){this.pessoas=[...o]}}},no=o=>(A("data-v-8e449b37"),o=o(),M(),o),lo={class:"modal fade",id:"kt_modal_pessoas",ref:"pessoasModalRef",tabindex:"-1","aria-hidden":"true"},io={class:"modal-dialog modal-dialog-centered person-list-size"},co={class:"modal-content"},mo={class:"modal-header",id:"kt_modal_pessoas_header"},fo=no(()=>t("h2",{class:"fw-bold"},"Lista de Pessoas de Contacto",-1)),ho={id:"kt_modal_pessoas_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},po={key:0,class:"card-toolbar modal-add-btn"},_o={class:"d-flex justify-content-end","data-kt-customer-table-toolbar":"base"},uo={class:"modal-body"},go={class:"scroll-y me-n7 pe-7",id:"kt_modal_pessoas_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_customer_header","data-kt-scroll-wrappers":"#kt_modal_add_customer_scroll","data-kt-scroll-offset":"300px"},bo={class:"card-body pt-0"},vo=["onClick"],Io=["onClick"],ko=["onClick"];function $o(o,e,s,_,n,l){const h=c("KTIcon"),m=c("Datatable"),f=c("el-form"),v=c("AddPessoaModal"),a=c("AlterPessoaModal");return g(),b("div",lo,[t("div",io,[t("div",co,[t("div",mo,[fo,t("div",ho,[r(h,{"icon-name":"cross","icon-class":"fs-1"})])]),this.$store.getters.getUser.tipo!="user"?(g(),b("div",po,[t("div",_o,[t("button",{type:"button",class:"btn btn-primary",onClick:e[0]||(e[0]=d=>this.createModalOpen=!0)},[r(h,{"icon-name":"plus","icon-class":"fs-2"}),p(" Adicionar Pessoa de Contacto ")])])])):I("",!0),r(f,{model:o.formInfo,ref:"formRef"},{default:i(()=>[t("div",uo,[t("div",go,[t("div",bo,[r(m,{onOnSort:l.sort,data:this.pessoas,header:n.tableHeader,"enable-items-per-page-dropdown":!0,class:"datatable"},{nome:i(({row:d})=>[p(u(d.nome),1)]),email:i(({row:d})=>[p(u(d.email),1)]),cargo:i(({row:d})=>[p(u(d.cargo),1)]),contacto:i(({row:d})=>[p(u(d.contacto),1)]),estado:i(({row:d})=>[p(u(d.estado),1)]),actions:i(({row:d})=>[this.$store.getters.getUser.tipo!="user"?(g(),b("span",{key:0,title:"Alterar Pessoa de Contacto",onClick:y=>l.getPessoaToEdit(d.id),class:"material-icons"},"edit",8,vo)):I("",!0),d.estado=="Inativo"&&this.$store.getters.getUser.tipo!="user"?(g(),b("span",{key:1,title:"Ativar Pessoa de Contacto",onClick:y=>l.togglePessoa(d.id,"Ativo"),class:"material-icons"},"check_circle",8,Io)):I("",!0),d.estado=="Ativo"&&this.$store.getters.getUser.tipo!="user"?(g(),b("span",{key:2,title:"Desativar Pessoa de Contacto",onClick:y=>l.togglePessoa(d.id,"Inativo"),class:"material-icons"},"cancel",8,ko)):I("",!0)]),_:1},8,["onOnSort","data","header"])])])])]),_:1},8,["model"])])]),r(v,{class:P({show:this.createModalOpen}),onCreatePessoa:l.createPessoa,onOpenModal:l.openModal,onCloseCreatePessoa:e[1]||(e[1]=d=>this.createModalOpen=!1)},null,8,["class","onCreatePessoa","onOpenModal"]),r(a,{class:P({show:this.alterModalOpen}),onAlterPessoa:l.alterPessoa,onOpenModal:l.openModal,onCloseAlterPessoa:e[2]||(e[2]=d=>this.alterModalOpen=!1),info:this.editPessoa},null,8,["class","onAlterPessoa","onOpenModal","info"])],512)}const yo=F(ro,[["render",$o],["__scopeId","data-v-8e449b37"]]);const Fo={name:"Fornecedores",components:{Datatable:U,AddFornecedorModal:oe,AlterFornecedorModal:ye,PersonListModal:yo},data(){return{fornecedores:[],fornecedoresFiltered:[],fornPessId:"",pessoas:[],stateOpen:!1,state:"Estado",createModalOpen:!1,alterModalOpen:!1,pessoasModalOpen:!1,editFornecedor:{id:"",nome:"",email:"",contacto:"",nif:"",morada:""}}},setup(){return{tableHeader:E([{columnName:"Fornecedor",columnLabel:"nome",sortEnabled:!0,columnWidth:135},{columnName:"Email",columnLabel:"email",sortEnabled:!0,columnWidth:170},{columnName:"Morada",columnLabel:"morada",sortEnabled:!0,columnWidth:135},{columnName:"Contacto",columnLabel:"contacto",sortEnabled:!0,columnWidth:130},{columnName:"NIF",columnLabel:"nif",sortEnabled:!0,columnWidth:130},{columnName:"Estado",columnLabel:"estado",sortEnabled:!0,columnWidth:80},{columnName:"Actions",columnLabel:"actions",sortEnabled:!1,columnWidth:130}])}},created(){this.$store.getters.getUser.id?this.getAllFornecedores():this.$router.push({name:"login"})},methods:{sort(o){switch(o.label){case"nome":o.order=="asc"?this.fornecedoresFiltered.sort((e,s)=>e.nome>s.nome?1:s.nome>e.nome?-1:0):this.fornecedoresFiltered.sort((e,s)=>e.nome<s.nome?1:s.nome<e.nome?-1:0);break;case"email":o.order=="asc"?this.fornecedoresFiltered.sort((e,s)=>e.email>s.email?1:s.email>e.email?-1:0):this.fornecedoresFiltered.sort((e,s)=>e.email<s.email?1:s.email<e.email?-1:0);break;case"morada":o.order=="asc"?this.fornecedoresFiltered.sort((e,s)=>e.morada>s.morada?1:s.morada>e.morada?-1:0):this.fornecedoresFiltered.sort((e,s)=>e.morada<s.morada?1:s.morada<e.morada?-1:0);break;case"nif":o.order=="asc"?this.fornecedoresFiltered.sort((e,s)=>e.nif>s.nif?1:s.nif>e.nif?-1:0):this.fornecedoresFiltered.sort((e,s)=>e.nif<s.nif?1:s.nif<e.nif?-1:0);break;case"contacto":o.order=="asc"?this.fornecedoresFiltered.sort((e,s)=>e.contacto>s.contacto?1:s.contacto>e.contacto?-1:0):this.fornecedoresFiltered.sort((e,s)=>e.contacto<s.contacto?1:s.contacto<e.contacto?-1:0);break;case"estado":o.order=="asc"?this.fornecedoresFiltered.sort((e,s)=>e.estado>s.estado?1:s.estado>e.estado?-1:0):this.fornecedoresFiltered.sort((e,s)=>e.estado<s.estado?1:s.estado<e.estado?-1:0);break}},searchFilter(){this.fornecedoresFiltered=[];let o=this.$refs.searchBar.value;o!=""?this.fornecedores.forEach(e=>{(e.nome.includes(o)||e.nif.includes(o)||e.morada.includes(o)||e.contacto.includes(o)||e.email.includes(o))&&this.fornecedoresFiltered.push(e)}):this.fornecedores.forEach(e=>this.fornecedoresFiltered.push(e)),this.state!="Estado"&&this.state!="Todos"&&(this.fornecedoresFiltered=this.fornecedoresFiltered.filter(e=>e.estado==this.state))},selectState(o){this.state=o,this.stateOpen=!1,this.searchFilter()},getFornecedorToEdit(o){this.alterModalOpen=!0,this.fornecedores.forEach(e=>{e.id==o&&(this.editFornecedor=e)})},openPessoas(o,e){this.pessoasModalOpen=!0,this.fornPessId=o,this.pessoas=[],e.forEach(s=>{this.pessoas.push(s)})},getAllFornecedores(){this.fornecedores=[],this.fornecedoresFiltered=[],this.state="Estado",k({method:"get",url:"http://64.225.109.57:4000/api/fornecedores",headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken}}).then(o=>{o.data.access_token&&this.$store.commit("setAccessToken",o.data.access_token),o.data.fornecedores.forEach(e=>this.fornecedores.push(e)),o.data.fornecedores.forEach(e=>this.fornecedoresFiltered.push(e)),this.fornecedores.forEach(e=>{e.pessoas.sort((s,_)=>s.id>_.id?1:_.id>s.id?-1:0),e.id==this.fornPessId&&(this.pessoas=[...e.pessoas])})}).catch(o=>{o.code?(console.log(o.response.data),this.$emit("open-modal",o.response.data.message),o.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(o)})},createFornecedor(o){this.createModalOpen=!1,this.$refs.hidemodal1.click(),k({method:"post",url:"http://64.225.109.57:4000/api/fornecedores",headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken},data:o}).then(e=>{e.data.access_token&&this.$store.commit("setAccessToken",e.data.access_token),this.getAllFornecedores(),this.$emit("open-modal","Fornecedor criado com sucesso.")}).catch(e=>{e.code?(console.log(e.response.data),this.$emit("open-modal",e.response.data.message),e.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(e)})},toggleFornecedor(o,e){k({method:"put",url:`http://64.225.109.57:4000/api/fornecedores/${o}/toggle`,headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken},data:{estado:e}}).then(s=>{s.data.access_token&&this.$store.commit("setAccessToken",s.data.access_token),this.fornecedores.forEach(_=>{_.id==o&&(_.estado=e)}),this.fornecedoresFiltered.forEach(_=>{_.id==o&&(_.estado=e)})}).catch(s=>{s.code?(console.log(s.response.data),this.$emit("open-modal",s.response.data.message),s.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(s)})},alterFornecedor(o){this.createModalOpen=!1,this.$refs.hidemodal2.click(),k({method:"put",url:`http://64.225.109.57:4000/api/fornecedores/${o.id}`,headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken},data:o}).then(e=>{e.data.access_token&&this.$store.commit("setAccessToken",e.data.access_token),this.getAllFornecedores(),this.$emit("open-modal","Fornecedor alterado com sucesso.")}).catch(e=>{e.code?(console.log(e.response.data),this.$emit("open-modal",e.response.data.message),e.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(e)})},openModal(o){this.$emit("open-modal",o)}}},wo={class:"card"},Co={class:"card-header border-0 pt-6"},Ao={class:"card-title"},Mo={class:"d-flex align-items-center position-relative my-1"},xo={class:"d-flex align-items-center position-relative my-1"},Po={class:"custom-select"},Vo={key:0,class:"card-toolbar"},Oo={class:"d-flex justify-content-end","data-kt-customer-table-toolbar":"base"},Eo={class:"card-body pt-0"},Uo={href:"#",class:"text-gray-600 text-hover-primary mb-1"},To=["onClick"],No=["onClick"],Lo=["onClick"],qo=["onClick"],zo={ref:"hidemodal1",style:{display:"none"},"data-bs-toggle":"modal","data-bs-target":"#kt_modal_add_fornecedor"},Ro={ref:"hidemodal2",style:{display:"none"},"data-bs-toggle":"modal","data-bs-target":"#kt_modal_alter_fornecedor"},Do={ref:"hidemodal3",style:{display:"none"},"data-bs-toggle":"modal","data-bs-target":"#kt_modal_pessoas"};function So(o,e,s,_,n,l){const h=c("KTIcon"),m=c("Datatable"),f=c("AddFornecedorModal"),v=c("AlterFornecedorModal"),a=c("PersonListModal");return g(),b("div",wo,[t("div",Co,[t("div",Ao,[t("div",Mo,[r(h,{"icon-name":"magnifier","icon-class":"fs-1 position-absolute ms-6"}),t("input",{type:"text",onInput:e[0]||(e[0]=(...d)=>l.searchFilter&&l.searchFilter(...d)),ref:"searchBar",class:"form-control form-control-solid w-250px ps-15",placeholder:"Procurar fornecedores"},null,544)]),t("div",xo,[t("div",Po,[t("div",{class:P(["selected",{open:n.stateOpen}]),onClick:e[1]||(e[1]=d=>n.stateOpen=!n.stateOpen)},u(this.state),3),t("div",{class:P(["items",{selectHide:!n.stateOpen}])},[t("div",{onClick:e[2]||(e[2]=d=>l.selectState("Todos"))},u("Todos")),t("div",{onClick:e[3]||(e[3]=d=>l.selectState("Ativo"))},u("Ativo")),t("div",{onClick:e[4]||(e[4]=d=>l.selectState("Inativo"))},u("Inativo"))],2),n.stateOpen?(g(),b("div",{key:0,class:"select-closer",onClick:e[5]||(e[5]=d=>n.stateOpen=!1)})):I("",!0)])])]),this.$store.getters.getUser.tipo!="user"?(g(),b("div",Vo,[t("div",Oo,[t("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#kt_modal_add_fornecedor","data-backdrop":"false",onClick:e[6]||(e[6]=d=>this.createModalOpen=!0)},[r(h,{"icon-name":"plus","icon-class":"fs-2"}),p(" Adicionar Fornecedor ")])])])):I("",!0)]),t("div",Eo,[r(m,{onOnSort:l.sort,data:this.fornecedoresFiltered,header:_.tableHeader,"enable-items-per-page-dropdown":!0,class:"datatable"},{nome:i(({row:d})=>[p(u(d.nome),1)]),email:i(({row:d})=>[t("a",Uo,u(d.email),1)]),morada:i(({row:d})=>[p(u(d.morada),1)]),contacto:i(({row:d})=>[p(u(d.contacto),1)]),nif:i(({row:d})=>[p(u(d.nif),1)]),estado:i(({row:d})=>[p(u(d.estado),1)]),actions:i(({row:d})=>[this.$store.getters.getUser.tipo!="user"?(g(),b("span",{key:0,title:"Alterar Fornecedor",onClick:y=>l.getFornecedorToEdit(d.id),"data-bs-toggle":"modal","data-bs-target":"#kt_modal_alter_fornecedor",class:"material-icons"},"edit",8,To)):I("",!0),d.estado=="Inativo"&&this.$store.getters.getUser.tipo!="user"?(g(),b("span",{key:1,title:"Ativar Fornecedor",onClick:y=>l.toggleFornecedor(d.id,"Ativo"),class:"material-icons"},"check_circle",8,No)):I("",!0),d.estado=="Ativo"&&this.$store.getters.getUser.tipo!="user"?(g(),b("span",{key:2,title:"Desativar Fornecedor",onClick:y=>l.toggleFornecedor(d.id,"Inativo"),class:"material-icons"},"cancel",8,Lo)):I("",!0),t("span",{title:"Ver Pessoas de Contacto",onClick:y=>l.openPessoas(d.id,d.pessoas),"data-bs-toggle":"modal","data-bs-target":"#kt_modal_pessoas",class:"material-icons"},"group",8,qo)]),_:1},8,["onOnSort","data","header"])]),V(r(f,{onCreateFornecedor:l.createFornecedor,onOpenModal:l.openModal},null,8,["onCreateFornecedor","onOpenModal"]),[[O,this.createModalOpen]]),V(r(v,{info:this.editFornecedor,onAlterFornecedor:l.alterFornecedor,onOpenModal:l.openModal},null,8,["info","onAlterFornecedor","onOpenModal"]),[[O,this.alterModalOpen]]),V(r(a,{onOpenModal:l.openModal,onRefreshPessoas:l.getAllFornecedores,info:this.pessoas,idFornecedor:this.fornPessId},null,8,["onOpenModal","onRefreshPessoas","info","idFornecedor"]),[[O,this.pessoasModalOpen]]),t("button",zo,null,512),t("button",Ro,null,512),t("button",Do,null,512)])}const Ho=F(Fo,[["render",So],["__scopeId","data-v-3c9eef38"]]);export{Ho as default};
