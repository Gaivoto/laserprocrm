import{_ as E,j as b,k as r,l,m as o,A as d,w as h,a6 as S,x as f,p as I,F as k,n as v,v as p,J as A,a7 as L,a8 as B,r as D,z as U,a4 as M,af as C}from"./index.6a223682.js";import{D as y}from"./KTDataTable.a5e5f51e.js";import"./assets.7d1727ea.js";const N={name:"AddMaterialModal",components:{},data(){return{formInfo:{produto:"CHAPA",material:"",tipo:"",subtipo:"",liga:"",comprimento:"",largura:"",espessura:"",altura:"",dimensaoA:"",dimensaoB:""},produtosSearchOpen:!1,materiaisSearchOpen:!1,tiposSearchOpen:!1,subtiposSearchOpen:!1,ligasSearchOpen:!1,materialInfo:[{produto:"CHAPA",materiais:[{material:"A\xC7O",tipos:[{tipo:"BRUTO",ligas:["S235","S275","S355","OUTRO"]},{tipo:"ZINCOR",ligas:[]},{tipo:"GALVA",ligas:[]},{tipo:"LACADO",ligas:[]},{tipo:"ANTIDERRAPANTE",ligas:[]},{tipo:"OUTRO",ligas:[]}]},{material:"INOX",tipos:[{tipo:"2B",ligas:["304","316","OUTRO"]},{tipo:"L\xC2MINA A QUENTE",ligas:["304","316","OUTRO"]},{tipo:"ESCOVADO",ligas:["304","316","OUTRO"]},{tipo:"POLIDO",ligas:["304","316","OUTRO"]}]},{material:"ALUM\xCDNIO",tipos:[{tipo:"BRUTO",ligas:["1050","1754"]},{tipo:"LACADO",ligas:[]},{tipo:"ANTIDERRAPANTE",ligas:[]}]}]},{produto:"PERFIL",materiais:[{material:"A\xC7O",tipos:[{tipo:"IPE",ligas:["S235","S275","S355","OUTRO"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]},{tipo:"HEA",ligas:["S235","S275","S355","OUTRO"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]},{tipo:"HEB",ligas:["S235","S275","S355","OUTRO"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]},{tipo:"HEM",ligas:["S235","S275","S355","OUTRO"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]},{tipo:"UPN",ligas:["S235","S275","S355","OUTRO"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]}]}]},{produto:"CANTONEIRA",materiais:[{material:"A\xC7O",tipos:[{tipo:"ABAS IGUAIS",ligas:["S235","S275","S355","OUTRO"]},{tipo:"ABAS DESIGUAIS",ligas:["S235","S275","S355","OUTRO"]}]}]},{produto:"TUBULAR",materiais:[{material:"A\xC7O",tipos:[{tipo:"BRUTO",ligas:["S235","S275","S355","OUTRO"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]},{tipo:"GALVA",ligas:[],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]}]},{material:"INOX",tipos:[{tipo:"BRUTO",ligas:["304","316","OUTRO"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]},{tipo:"ESCOVADO",ligas:["304","316","OUTRO"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]},{tipo:"POLIDO",ligas:["304","316","OUTRO"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]}]}]}]}},computed:{getProdutos(){let t=[];return this.materialInfo.forEach(e=>t.push(e.produto)),t},getMateriais(){let t=[];return this.materialInfo.forEach(e=>{e.produto==this.formInfo.produto&&e.materiais.forEach(i=>t.push(i.material))}),t},getTipos(){let t=[];return this.materialInfo.forEach(e=>{e.produto==this.formInfo.produto&&e.materiais.forEach(i=>{i.material==this.formInfo.material&&i.tipos.forEach(m=>t.push(m.tipo))})}),t},getLigas(){let t=[];return this.materialInfo.forEach(e=>{e.produto==this.formInfo.produto&&e.materiais.forEach(i=>{i.material==this.formInfo.material&&i.tipos.forEach(m=>{m.tipo==this.formInfo.tipo&&m.ligas.forEach(a=>t.push(a))})})}),t},getSubtipos(){let t=[];return this.materialInfo.forEach(e=>{e.produto==this.formInfo.produto&&(this.formInfo.produto=="TUBULAR"||this.formInfo.produto=="PERFIL")&&e.materiais.forEach(i=>{i.material==this.formInfo.material&&i.tipos.forEach(m=>{m.tipo==this.formInfo.tipo&&m.subtipos.forEach(a=>t.push(a))})})}),t}},methods:{verifyMaterialData(){if(this.formInfo.produto.length==0||this.formInfo.material.length==0||this.formInfo.tipo.length==0||this.formInfo.liga.length==0&&this.getLigas.length>0)return this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1;switch(this.formInfo.produto){case"CANTONEIRA":return this.formInfo.comprimento.length==0||this.formInfo.dimensaoA.length==0||this.formInfo.espessura.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.dimensaoA<=0||this.formInfo.dimensaoB<=0&&this.formInfo.dimensaoB!=""||this.formInfo.espessura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0;case"PERFIL":return this.formInfo.comprimento.length==0||this.formInfo.altura.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.altura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0;case"CHAPA":return this.formInfo.comprimento.length==0||this.formInfo.espessura.length==0||this.formInfo.largura.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.largura<=0||this.formInfo.espessura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0;case"TUBULAR":return this.formInfo.comprimento.length==0||this.formInfo.dimensaoA.length==0||this.formInfo.espessura.length==0||this.formInfo.subtipo.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.dimensaoA<=0||this.formInfo.dimensaoB<=0&&this.formInfo.dimensaoB!=""||this.formInfo.espessura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0}},createMaterial(){switch(this.formInfo.produto){case"CANTONEIRA":this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.dimensaoA,this.formInfo.dimensaoB!=""&&(this.formInfo.dimensoes+="x"+this.formInfo.dimensaoB),this.formInfo.dimensoes+="x"+this.formInfo.espessura;break;case"TUBULAR":this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.dimensaoA,this.formInfo.dimensaoB!=""&&(this.formInfo.dimensoes+="x"+this.formInfo.dimensaoB),this.formInfo.dimensoes+="x"+this.formInfo.espessura;break;case"CHAPA":this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.largura+"x"+this.formInfo.espessura;break;case"PERFIL":this.formInfo.altura=this.formInfo.subtipo,this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.altura;break}this.verifyMaterialData()&&(this.$emit("create-material",this.formInfo),this.formInfo={produto:"CHAPA",material:"",tipo:"",subtipo:"",liga:"",comprimento:"",largura:"",espessura:"",altura:"",dimensaoA:"",dimensaoB:""},this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.ligasSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1)},chooseProduto(t){this.formInfo.produto=t,this.produtosSearchOpen=!1,this.formInfo.material="",this.formInfo.tipo="",this.formInfo.subtipo="",this.formInfo.liga="",this.formInfo.espessura="",this.formInfo.largura="",this.formInfo.comprimento="",this.formInfo.altura="",this.formInfo.dimensaoA="",this.formInfo.dimensaoB=""},chooseMaterial(t){this.formInfo.material=t,this.materiaisSearchOpen=!1,this.formInfo.tipo="",this.formInfo.subtipo="",this.formInfo.liga=""},chooseTipo(t){this.formInfo.tipo=t,this.tiposSearchOpen=!1,this.formInfo.subtipo="",this.formInfo.liga="",(t!="ABAS DESIGUAIS"||t!="RETANGULO"||t!="OUTRO")&&(this.formInfo.dimensaoB="")},chooseSubtipo(t){this.formInfo.subtipo=t,this.subtiposSearchOpen=!1},chooseLiga(t){this.formInfo.liga=t,this.ligasSearchOpen=!1},reset(t){(t.target.id=="kt_modal_add_material"||t.target.id=="kt_modal_add_material_close"||t.target.id=="kt_modal_add_material_close_btn"||t.target.parentElement.id=="kt_modal_add_material_close_btn")&&(this.formInfo={produto:"CHAPA",material:"",tipo:"",subtipo:"",liga:"",comprimento:"",largura:"",espessura:"",altura:"",dimensaoA:"",dimensaoB:""},this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.ligasSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1)},openProdutos(){this.produtosSearchOpen=!0,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!1},openMateriais(){this.produtosSearchOpen=!1,this.materiaisSearchOpen=!0,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!1},openTipos(){this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!0,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!1},openSubtipos(){this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!0,this.ligasSearchOpen=!1},openLigas(){this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!0}}},g=t=>(L("data-v-e92927df"),t=t(),B(),t),$={class:"modal-dialog modal-dialog-centered mw-650px"},w={class:"modal-header",id:"kt_modal_add_material_header"},P=g(()=>o("h2",{class:"fw-bold"},"Criar Material",-1)),x={class:"modal-body py-10 px-lg-17"},V={class:"scroll-y me-n7 pe-7",id:"kt_modal_add_material_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_customer_header","data-kt-scroll-wrappers":"#kt_modal_add_customer_scroll","data-kt-scroll-offset":"300px"},F={class:"fv-row mb-8"},G=g(()=>o("label",{class:"required fs-6 fw-semobold mb-2"},"Produto",-1)),H={class:"searchbar"},q=["onClick"],z={class:"fv-row mb-8"},Q=g(()=>o("label",{class:"required fs-6 fw-semobold mb-2"},"Material",-1)),W={class:"searchbar"},K=["onClick"],X={class:"fv-row mb-8"},j=g(()=>o("label",{class:"required fs-6 fw-semobold mb-2"},"Tipo",-1)),Z={class:"searchbar"},J=["onClick"],Y={key:0,class:"fv-row mb-8"},ee=g(()=>o("label",{class:"required fs-6 fw-semobold mb-2"},"Subtipo",-1)),se={class:"searchbar"},te=["onClick"],oe={key:1,class:"fv-row mb-8"},ie=g(()=>o("label",{class:"required fs-6 fw-semobold mb-2"},"Liga",-1)),ae={class:"searchbar"},re=["onClick"],le={class:"fv-row mb-8"},ne=g(()=>o("label",{class:"required fs-6 fw-semobold mb-2"},"Comprimento (mm)",-1)),me={key:2,class:"fv-row mb-8"},de=g(()=>o("label",{class:"required fs-6 fw-semobold mb-2"},"Largura (mm)",-1)),fe={key:3,class:"fv-row mb-8"},he=g(()=>o("label",{class:"required fs-6 fw-semobold mb-2"},"Dimens\xE3o A (mm)",-1)),pe={key:4,class:"fv-row mb-8"},ce=g(()=>o("label",{class:"required fs-6 fw-semobold mb-2"},"Dimens\xE3o B (mm)",-1)),ue={key:5,class:"fv-row mb-8"},Oe=g(()=>o("label",{class:"required fs-6 fw-semobold mb-2"},"Espessura (mm)",-1)),Ie={class:"modal-footer flex-center"},be=g(()=>o("button",{type:"reset",id:"kt_modal_add_customer_cancel",class:"btn btn-light me-3"}," Limpar ",-1));function ge(t,e,i,m,a,n){const R=b("KTIcon"),c=b("el-input"),u=b("el-form-item"),T=b("el-form");return r(),l("div",{class:"modal fade",id:"kt_modal_add_material",ref:"addMaterialModalRef",tabindex:"-1","aria-hidden":"true",onClick:e[18]||(e[18]=(...s)=>n.reset&&n.reset(...s))},[o("div",$,[o("div",{class:"modal-content",onClick:e[17]||(e[17]=s=>{this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!1})},[o("div",w,[P,o("div",{id:"kt_modal_add_material_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary",onClick:e[0]||(e[0]=(...s)=>n.reset&&n.reset(...s))},[d(R,{id:"kt_modal_add_material_close_btn","icon-name":"cross","icon-class":"fs-1"})])]),d(T,{model:a.formInfo,ref:"formRef"},{default:h(()=>[o("div",x,[o("div",V,[o("div",F,[G,o("div",{class:"searchbar-container",onClick:e[2]||(e[2]=S(()=>{},["stop"]))},[o("div",H,[o("p",{type:"text",ref:"produtosSearchbar",onClick:e[1]||(e[1]=(...s)=>this.openProdutos&&this.openProdutos(...s))},f(this.formInfo.produto),513)]),o("div",{ref:"produtosResults",class:I(["searchbar-results",{"d-none":!a.produtosSearchOpen}])},[(r(!0),l(k,null,v(this.getProdutos,s=>(r(),l("div",{key:s,onClick:O=>n.chooseProduto(s)},f(s),9,q))),128))],2)])]),o("div",z,[Q,o("div",{class:"searchbar-container",onClick:e[4]||(e[4]=S(()=>{},["stop"]))},[o("div",W,[o("p",{type:"text",ref:"materiaisSearchbar",onClick:e[3]||(e[3]=(...s)=>this.openMateriais&&this.openMateriais(...s))},f(this.formInfo.material),513)]),o("div",{ref:"materiaisResults",class:I(["searchbar-results",{"d-none":!a.materiaisSearchOpen}])},[(r(!0),l(k,null,v(this.getMateriais,s=>(r(),l("div",{key:s,onClick:O=>n.chooseMaterial(s)},f(s),9,K))),128))],2)])]),o("div",X,[j,o("div",{class:"searchbar-container",onClick:e[6]||(e[6]=S(()=>{},["stop"]))},[o("div",Z,[o("p",{type:"text",ref:"tiposSearchbar",onClick:e[5]||(e[5]=(...s)=>this.openTipos&&this.openTipos(...s))},f(this.formInfo.tipo),513)]),o("div",{ref:"tiposResults",class:I(["searchbar-results",{"d-none":!a.tiposSearchOpen}])},[(r(!0),l(k,null,v(this.getTipos,s=>(r(),l("div",{key:s,onClick:O=>n.chooseTipo(s)},f(s),9,J))),128))],2)])]),this.formInfo.produto=="TUBULAR"||this.formInfo.produto=="PERFIL"?(r(),l("div",Y,[ee,o("div",{class:"searchbar-container",onClick:e[8]||(e[8]=S(()=>{},["stop"]))},[o("div",se,[o("p",{type:"text",ref:"subtiposSearchbar",onClick:e[7]||(e[7]=(...s)=>this.openSubtipos&&this.openSubtipos(...s))},f(this.formInfo.subtipo),513)]),o("div",{ref:"subtiposResults",class:I(["searchbar-results",{"d-none":!a.subtiposSearchOpen}])},[(r(!0),l(k,null,v(this.getSubtipos,s=>(r(),l("div",{key:s,onClick:O=>n.chooseSubtipo(s)},f(s),9,te))),128))],2)])])):p("",!0),this.getLigas.length>0||this.formInfo.tipo==""?(r(),l("div",oe,[ie,o("div",{class:"searchbar-container",onClick:e[10]||(e[10]=S(()=>{},["stop"]))},[o("div",ae,[o("p",{type:"text",ref:"ligasSearchbar",onClick:e[9]||(e[9]=(...s)=>this.openLigas&&this.openLigas(...s))},f(this.formInfo.liga),513)]),o("div",{ref:"ligasResults",class:I(["searchbar-results",{"d-none":!a.ligasSearchOpen}])},[(r(!0),l(k,null,v(this.getLigas,s=>(r(),l("div",{key:s,onClick:O=>n.chooseLiga(s)},f(s),9,re))),128))],2)])])):p("",!0),o("div",le,[ne,d(u,{prop:"comprimento"},{default:h(()=>[d(c,{modelValue:a.formInfo.comprimento,"onUpdate:modelValue":e[11]||(e[11]=s=>a.formInfo.comprimento=s),type:"number",placeholder:"Comprimento"},null,8,["modelValue"])]),_:1})]),this.formInfo.produto=="CHAPA"?(r(),l("div",me,[de,d(u,{prop:"largura"},{default:h(()=>[d(c,{modelValue:a.formInfo.largura,"onUpdate:modelValue":e[12]||(e[12]=s=>a.formInfo.largura=s),type:"number",placeholder:"Largura"},null,8,["modelValue"])]),_:1})])):p("",!0),this.formInfo.produto=="TUBULAR"||this.formInfo.produto=="CANTONEIRA"?(r(),l("div",fe,[he,d(u,{prop:"dimensaoA"},{default:h(()=>[d(c,{modelValue:a.formInfo.dimensaoA,"onUpdate:modelValue":e[13]||(e[13]=s=>a.formInfo.dimensaoA=s),type:"number",placeholder:"Dimens\xE3o A"},null,8,["modelValue"])]),_:1})])):p("",!0),this.formInfo.produto=="TUBULAR"&&this.formInfo.subtipo=="RETANGULO"||this.formInfo.produto=="TUBULAR"&&this.formInfo.subtipo=="OUTRO"||this.formInfo.produto=="CANTONEIRA"&&this.formInfo.tipo=="ABAS DESIGUAIS"?(r(),l("div",pe,[ce,d(u,{prop:"dimensaoB"},{default:h(()=>[d(c,{modelValue:a.formInfo.dimensaoB,"onUpdate:modelValue":e[14]||(e[14]=s=>a.formInfo.dimensaoB=s),type:"number",placeholder:"Dimens\xE3o B"},null,8,["modelValue"])]),_:1})])):p("",!0),this.formInfo.produto!="PERFIL"?(r(),l("div",ue,[Oe,d(u,{prop:"espessura"},{default:h(()=>[d(c,{modelValue:a.formInfo.espessura,"onUpdate:modelValue":e[15]||(e[15]=s=>a.formInfo.espessura=s),type:"number",placeholder:"Espessura"},null,8,["modelValue"])]),_:1})])):p("",!0)])]),o("div",Ie,[be,o("div",{id:"kt_modal_add_customer_cancel",class:"btn btn-lg btn-primary",onClick:e[16]||(e[16]=(...s)=>n.createMaterial&&n.createMaterial(...s))},[A(" Criar "),d(R,{"icon-name":"arrow-right","icon-class":"fs-2 me-2 me-0",class:"override-mr0"})])])]),_:1},8,["model"])])])],512)}const _e=E(N,[["render",ge],["__scopeId","data-v-e92927df"]]);const Ae={name:"AlterMaterialModal",components:{},props:{info:{type:Object,required:!0}},data(){return{formInfo:{produto:"",material:"",tipo:"",subtipo:"",liga:"",comprimento:"",largura:"",espessura:"",altura:"",dimensaoA:"",dimensaoB:""},produtosSearchOpen:!1,materiaisSearchOpen:!1,tiposSearchOpen:!1,subtiposSearchOpen:!1,ligasSearchOpen:!1,materialInfo:[{produto:"CHAPA",materiais:[{material:"A\xC7O",tipos:[{tipo:"BRUTO",ligas:["S235","S275","S355","OUTRO"]},{tipo:"ZINCOR",ligas:[]},{tipo:"GALVA",ligas:[]},{tipo:"LACADO",ligas:[]},{tipo:"ANTIDERRAPANTE",ligas:[]},{tipo:"OUTRO",ligas:[]}]},{material:"INOX",tipos:[{tipo:"2B",ligas:["304","316","OUTRO"]},{tipo:"L\xC2MINA A QUENTE",ligas:["304","316","OUTRO"]},{tipo:"ESCOVADO",ligas:["304","316","OUTRO"]},{tipo:"POLIDO",ligas:["304","316","OUTRO"]}]},{material:"ALUM\xCDNIO",tipos:[{tipo:"BRUTO",ligas:["1050","1754"]},{tipo:"LACADO",ligas:[]},{tipo:"ANTIDERRAPANTE",ligas:[]}]}]},{produto:"PERFIL",materiais:[{material:"A\xC7O",tipos:[{tipo:"IPE",ligas:["S235","S275","S355","OUTRO"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]},{tipo:"HEA",ligas:["S235","S275","S355","OUTRO"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]},{tipo:"HEB",ligas:["S235","S275","S355","OUTRO"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]},{tipo:"HEM",ligas:["S235","S275","S355","OUTRO"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]},{tipo:"UPN",ligas:["S235","S275","S355","OUTRO"],subtipos:["80","100","120","140","160","180","200","220","240","270","300","330","360","400","450","500","550","600","OUTRO"]}]}]},{produto:"CANTONEIRA",materiais:[{material:"A\xC7O",tipos:[{tipo:"ABAS IGUAIS",ligas:["S235","S275","S355","OUTRO"]},{tipo:"ABAS DESIGUAIS",ligas:["S235","S275","S355","OUTRO"]}]}]},{produto:"TUBULAR",materiais:[{material:"A\xC7O",tipos:[{tipo:"BRUTO",ligas:["S235","S275","S355","OUTRO"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]},{tipo:"GALVA",ligas:[],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]}]},{material:"INOX",tipos:[{tipo:"BRUTO",ligas:["304","316","OUTRO"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]},{tipo:"ESCOVADO",ligas:["304","316","OUTRO"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]},{tipo:"POLIDO",ligas:["304","316","OUTRO"],subtipos:["QUADRADO","REDONDO","RETANGULO","OUTRO"]}]}]}]}},mounted(){this.formInfo=this.info},computed:{getProdutos(){let t=[];return this.materialInfo.forEach(e=>t.push(e.produto)),t},getMateriais(){let t=[];return this.materialInfo.forEach(e=>{e.produto==this.formInfo.produto&&e.materiais.forEach(i=>t.push(i.material))}),t},getTipos(){let t=[];return this.materialInfo.forEach(e=>{e.produto==this.formInfo.produto&&e.materiais.forEach(i=>{i.material==this.formInfo.material&&i.tipos.forEach(m=>t.push(m.tipo))})}),t},getLigas(){let t=[];return this.materialInfo.forEach(e=>{e.produto==this.formInfo.produto&&e.materiais.forEach(i=>{i.material==this.formInfo.material&&i.tipos.forEach(m=>{m.tipo==this.formInfo.tipo&&m.ligas.forEach(a=>t.push(a))})})}),t},getSubtipos(){let t=[];return this.materialInfo.forEach(e=>{e.produto==this.formInfo.produto&&(this.formInfo.produto=="TUBULAR"||this.formInfo.produto=="PERFIL")&&e.materiais.forEach(i=>{i.material==this.formInfo.material&&i.tipos.forEach(m=>{m.tipo==this.formInfo.tipo&&m.subtipos.forEach(a=>t.push(a))})})}),t}},methods:{verifyMaterialData(){if(this.formInfo.produto.length==0||this.formInfo.material.length==0||this.formInfo.tipo.length==0||this.formInfo.liga.length==0&&this.getLigas.length>0)return this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1;switch(this.formInfo.produto){case"CANTONEIRA":return this.formInfo.comprimento.length==0||this.formInfo.dimensaoA.length==0||this.formInfo.espessura.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.dimensaoA<=0||this.formInfo.dimensaoB<=0&&this.formInfo.dimensaoB!=""||this.formInfo.espessura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0;case"PERFIL":return this.formInfo.comprimento.length==0||this.formInfo.altura.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.altura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0;case"CHAPA":return this.formInfo.comprimento.length==0||this.formInfo.espessura.length==0||this.formInfo.largura.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.largura<=0||this.formInfo.espessura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0;case"TUBULAR":return this.formInfo.comprimento.length==0||this.formInfo.dimensaoA.length==0||this.formInfo.espessura.length==0||this.formInfo.subtipo.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.dimensaoA<=0||this.formInfo.dimensaoB<=0&&this.formInfo.dimensaoB!=""||this.formInfo.espessura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0}},alterarMaterial(){switch(this.formInfo.produto){case"CANTONEIRA":this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.dimensaoA,this.formInfo.dimensaoB!=""&&(this.formInfo.dimensoes+="x"+this.formInfo.dimensaoB),this.formInfo.dimensoes+="x"+this.formInfo.espessura;break;case"TUBULAR":this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.dimensaoA,this.formInfo.dimensaoB!=""&&(this.formInfo.dimensoes+="x"+this.formInfo.dimensaoB),this.formInfo.dimensoes+="x"+this.formInfo.espessura;break;case"CHAPA":this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.largura+"x"+this.formInfo.espessura;break;case"PERFIL":this.formInfo.altura=this.formInfo.subtipo,this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.altura;break}this.verifyMaterialData()&&(this.$emit("alter-material",this.formInfo),this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.ligasSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1)},chooseProduto(t){this.formInfo.produto=t,this.produtosSearchOpen=!1,this.formInfo.material="",this.formInfo.tipo="",this.formInfo.subtipo="",this.formInfo.liga="",this.formInfo.espessura="",this.formInfo.largura="",this.formInfo.comprimento="",this.formInfo.altura="",this.formInfo.dimensaoA="",this.formInfo.dimensaoB=""},chooseMaterial(t){this.formInfo.material=t,this.materiaisSearchOpen=!1,this.formInfo.tipo="",this.formInfo.subtipo="",this.formInfo.liga=""},chooseTipo(t){this.formInfo.tipo=t,this.tiposSearchOpen=!1,this.formInfo.subtipo="",this.formInfo.liga="",(t!="ABAS DESIGUAIS"||t!="RETANGULO"||t!="OUTRO")&&(this.formInfo.dimensaoB="")},chooseSubtipo(t){this.formInfo.subtipo=t,this.subtiposSearchOpen=!1},chooseLiga(t){this.formInfo.liga=t,this.ligasSearchOpen=!1},reset(t){(t.target.id=="kt_modal_alter_material"||t.target.id=="kt_modal_alter_material_close"||t.target.id=="kt_modal_alter_material_close_btn"||t.target.parentElement.id=="kt_modal_alter_material_close_btn"||t.target.id=="alter_material_reset_btn")&&(this.formInfo={...this.info},this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.ligasSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1)},openProdutos(){this.produtosSearchOpen=!0,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!1},openMateriais(){this.produtosSearchOpen=!1,this.materiaisSearchOpen=!0,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!1},openTipos(){this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!0,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!1},openSubtipos(){this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!0,this.ligasSearchOpen=!1},openLigas(){this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!0}},watch:{info:function(t){this.formInfo={...t}}}},_=t=>(L("data-v-9bb74912"),t=t(),B(),t),Se={class:"modal-dialog modal-dialog-centered mw-650px"},ke={class:"modal-header",id:"kt_modal_alter_material_header"},ve=_(()=>o("h2",{class:"fw-bold"},"Alterar Material",-1)),Re={class:"modal-body py-10 px-lg-17"},Te={class:"scroll-y me-n7 pe-7",id:"kt_modal_alter_material_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_customer_header","data-kt-scroll-wrappers":"#kt_modal_add_customer_scroll","data-kt-scroll-offset":"300px"},Ue={class:"fv-row mb-8"},Ee=_(()=>o("label",{class:"required fs-6 fw-semobold mb-2"},"Produto",-1)),Me={class:"searchbar"},Ce=["onClick"],Le={class:"fv-row mb-8"},Be=_(()=>o("label",{class:"required fs-6 fw-semobold mb-2"},"Material",-1)),De={class:"searchbar"},ye=["onClick"],Ne={class:"fv-row mb-8"},$e=_(()=>o("label",{class:"required fs-6 fw-semobold mb-2"},"Tipo",-1)),we={class:"searchbar"},Pe=["onClick"],xe={key:0,class:"fv-row mb-8"},Ve=_(()=>o("label",{class:"required fs-6 fw-semobold mb-2"},"Subtipo",-1)),Fe={class:"searchbar"},Ge=["onClick"],He={key:1,class:"fv-row mb-8"},qe=_(()=>o("label",{class:"required fs-6 fw-semobold mb-2"},"Liga",-1)),ze={class:"searchbar"},Qe=["onClick"],We={class:"fv-row mb-8"},Ke=_(()=>o("label",{class:"required fs-6 fw-semobold mb-2"},"Comprimento (mm)",-1)),Xe={key:2,class:"fv-row mb-8"},je=_(()=>o("label",{class:"required fs-6 fw-semobold mb-2"},"Largura (mm)",-1)),Ze={key:3,class:"fv-row mb-8"},Je=_(()=>o("label",{class:"required fs-6 fw-semobold mb-2"},"Dimens\xE3o A (mm)",-1)),Ye={key:4,class:"fv-row mb-8"},es=_(()=>o("label",{class:"required fs-6 fw-semobold mb-2"},"Dimens\xE3o B (mm)",-1)),ss={key:5,class:"fv-row mb-8"},ts=_(()=>o("label",{class:"required fs-6 fw-semobold mb-2"},"Espessura (mm)",-1)),os={class:"modal-footer flex-center"};function is(t,e,i,m,a,n){const R=b("KTIcon"),c=b("el-input"),u=b("el-form-item"),T=b("el-form");return r(),l("div",{class:"modal fade",id:"kt_modal_alter_material",ref:"alterMaterialModalRef",tabindex:"-1","aria-hidden":"true",onClick:e[19]||(e[19]=(...s)=>n.reset&&n.reset(...s))},[o("div",Se,[o("div",{class:"modal-content",onClick:e[18]||(e[18]=s=>{this.produtosSearchOpen=!1,this.materiaisSearchOpen=!1,this.tiposSearchOpen=!1,this.subtiposSearchOpen=!1,this.ligasSearchOpen=!1})},[o("div",ke,[ve,o("div",{id:"kt_modal_alter_material_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary",onClick:e[0]||(e[0]=(...s)=>n.reset&&n.reset(...s))},[d(R,{"icon-name":"cross","icon-class":"fs-1"})])]),d(T,{model:a.formInfo,ref:"formRef"},{default:h(()=>[o("div",Re,[o("div",Te,[o("div",Ue,[Ee,o("div",{class:"searchbar-container",onClick:e[2]||(e[2]=S(()=>{},["stop"]))},[o("div",Me,[o("p",{type:"text",ref:"produtosSearchbar",onClick:e[1]||(e[1]=(...s)=>this.openProdutos&&this.openProdutos(...s))},f(this.formInfo.produto),513)]),o("div",{ref:"produtosResults",class:I(["searchbar-results",{"d-none":!a.produtosSearchOpen}])},[(r(!0),l(k,null,v(this.getProdutos,s=>(r(),l("div",{key:s,onClick:O=>n.chooseProduto(s)},f(s),9,Ce))),128))],2)])]),o("div",Le,[Be,o("div",{class:"searchbar-container",onClick:e[4]||(e[4]=S(()=>{},["stop"]))},[o("div",De,[o("p",{type:"text",ref:"materiaisSearchbar",onClick:e[3]||(e[3]=(...s)=>this.openMateriais&&this.openMateriais(...s))},f(this.formInfo.material),513)]),o("div",{ref:"materiaisResults",class:I(["searchbar-results",{"d-none":!a.materiaisSearchOpen}])},[(r(!0),l(k,null,v(this.getMateriais,s=>(r(),l("div",{key:s,onClick:O=>n.chooseMaterial(s)},f(s),9,ye))),128))],2)])]),o("div",Ne,[$e,o("div",{class:"searchbar-container",onClick:e[6]||(e[6]=S(()=>{},["stop"]))},[o("div",we,[o("p",{type:"text",ref:"tiposSearchbar",onClick:e[5]||(e[5]=(...s)=>this.openTipos&&this.openTipos(...s))},f(this.formInfo.tipo),513)]),o("div",{ref:"tiposResults",class:I(["searchbar-results",{"d-none":!a.tiposSearchOpen}])},[(r(!0),l(k,null,v(this.getTipos,s=>(r(),l("div",{key:s,onClick:O=>n.chooseTipo(s)},f(s),9,Pe))),128))],2)])]),this.formInfo.produto=="TUBULAR"||this.formInfo.produto=="PERFIL"?(r(),l("div",xe,[Ve,o("div",{class:"searchbar-container",onClick:e[8]||(e[8]=S(()=>{},["stop"]))},[o("div",Fe,[o("p",{type:"text",ref:"subtiposSearchbar",onClick:e[7]||(e[7]=(...s)=>this.openSubtipos&&this.openSubtipos(...s))},f(this.formInfo.subtipo),513)]),o("div",{ref:"subtiposResults",class:I(["searchbar-results",{"d-none":!a.subtiposSearchOpen}])},[(r(!0),l(k,null,v(this.getSubtipos,s=>(r(),l("div",{key:s,onClick:O=>n.chooseSubtipo(s)},f(s),9,Ge))),128))],2)])])):p("",!0),this.getLigas.length>0||this.formInfo.tipo==""?(r(),l("div",He,[qe,o("div",{class:"searchbar-container",onClick:e[10]||(e[10]=S(()=>{},["stop"]))},[o("div",ze,[o("p",{type:"text",ref:"ligasSearchbar",onClick:e[9]||(e[9]=(...s)=>this.openLigas&&this.openLigas(...s))},f(this.formInfo.liga),513)]),o("div",{ref:"ligasResults",class:I(["searchbar-results",{"d-none":!a.ligasSearchOpen}])},[(r(!0),l(k,null,v(this.getLigas,s=>(r(),l("div",{key:s,onClick:O=>n.chooseLiga(s)},f(s),9,Qe))),128))],2)])])):p("",!0),o("div",We,[Ke,d(u,{prop:"comprimento"},{default:h(()=>[d(c,{modelValue:a.formInfo.comprimento,"onUpdate:modelValue":e[11]||(e[11]=s=>a.formInfo.comprimento=s),type:"number",placeholder:"Comprimento"},null,8,["modelValue"])]),_:1})]),this.formInfo.produto=="CHAPA"?(r(),l("div",Xe,[je,d(u,{prop:"largura"},{default:h(()=>[d(c,{modelValue:a.formInfo.largura,"onUpdate:modelValue":e[12]||(e[12]=s=>a.formInfo.largura=s),type:"number",placeholder:"Largura"},null,8,["modelValue"])]),_:1})])):p("",!0),this.formInfo.produto=="TUBULAR"||this.formInfo.produto=="CANTONEIRA"?(r(),l("div",Ze,[Je,d(u,{prop:"dimensaoA"},{default:h(()=>[d(c,{modelValue:a.formInfo.dimensaoA,"onUpdate:modelValue":e[13]||(e[13]=s=>a.formInfo.dimensaoA=s),type:"number",placeholder:"Dimens\xE3o A"},null,8,["modelValue"])]),_:1})])):p("",!0),this.formInfo.produto=="TUBULAR"&&this.formInfo.subtipo=="RETANGULO"||this.formInfo.produto=="TUBULAR"&&this.formInfo.subtipo=="OUTRO"||this.formInfo.produto=="CANTONEIRA"&&this.formInfo.tipo=="ABAS DESIGUAIS"?(r(),l("div",Ye,[es,d(u,{prop:"dimensaoB"},{default:h(()=>[d(c,{modelValue:a.formInfo.dimensaoB,"onUpdate:modelValue":e[14]||(e[14]=s=>a.formInfo.dimensaoB=s),type:"number",placeholder:"Dimens\xE3o B"},null,8,["modelValue"])]),_:1})])):p("",!0),this.formInfo.produto!="PERFIL"?(r(),l("div",ss,[ts,d(u,{prop:"espessura"},{default:h(()=>[d(c,{modelValue:a.formInfo.espessura,"onUpdate:modelValue":e[15]||(e[15]=s=>a.formInfo.espessura=s),type:"number",placeholder:"Espessura"},null,8,["modelValue"])]),_:1})])):p("",!0)])]),o("div",os,[o("div",{id:"alter_material_reset_btn",onClick:e[16]||(e[16]=(...s)=>n.reset&&n.reset(...s)),class:"btn btn-light me-3"}," Repor "),o("div",{id:"kt_modal_add_customer_cancel",class:"btn btn-lg btn-primary",onClick:e[17]||(e[17]=(...s)=>n.alterarMaterial&&n.alterarMaterial(...s))},[A(" Alterar "),d(R,{"icon-name":"arrow-right","icon-class":"fs-2 me-2 me-0",class:"override-mr0"})])])]),_:1},8,["model"])])])],512)}const as=E(Ae,[["render",is],["__scopeId","data-v-9bb74912"]]);const rs={name:"Materiais",components:{Datatable:y,AddMaterialModal:_e,AlterMaterialModal:as},data(){return{materiais:[],materiaisFiltered:[],stateOpen:!1,state:"Estado",createModalOpen:!1,alterModalOpen:!1,editMaterial:{id:"",liga:"",dimensoes:"",tipo:"",subtipo:"",material:"",produto:""},tableHeader:[]}},created(){this.$store.getters.getUser.id?this.getAllMateriais():this.$router.push({name:"login"})},mounted(){let t=[{columnName:"Produto",columnLabel:"produto",sortEnabled:!0,columnWidth:140},{columnName:"Material",columnLabel:"material",sortEnabled:!0,columnWidth:140},{columnName:"Tipo",columnLabel:"tipo",sortEnabled:!0,columnWidth:140},{columnName:"Subtipo",columnLabel:"subtipo",sortEnabled:!0,columnWidth:140},{columnName:"Liga",columnLabel:"liga",sortEnabled:!0,columnWidth:140},{columnName:"Dimens\xF5es",columnLabel:"dimensoes",sortEnabled:!1,columnWidth:170},{columnName:"Estado",columnLabel:"estado",sortEnabled:!0,columnWidth:80}];this.$store.getters.getUser.tipo!="user"&&t.push({columnName:"Actions",columnLabel:"actions",sortEnabled:!1,columnWidth:160}),this.tableHeader=D(t)},methods:{sort(t){switch(t.label){case"produto":t.order=="asc"?this.materiaisFiltered.sort((e,i)=>e.produto>i.produto?1:i.produto>e.produto?-1:0):this.materiaisFiltered.sort((e,i)=>e.produto<i.produto?1:i.produto<e.produto?-1:0);break;case"material":t.order=="asc"?this.materiaisFiltered.sort((e,i)=>e.material>i.material?1:i.material>e.material?-1:0):this.materiaisFiltered.sort((e,i)=>e.material<i.material?1:i.material<e.material?-1:0);break;case"tipo":t.order=="asc"?this.materiaisFiltered.sort((e,i)=>e.tipo>i.tipo?1:i.tipo>e.tipo?-1:0):this.materiaisFiltered.sort((e,i)=>e.tipo<i.tipo?1:i.tipo<e.tipo?-1:0);break;case"liga":t.order=="asc"?this.materiaisFiltered.sort((e,i)=>e.liga>i.liga?1:i.liga>e.liga?-1:0):this.materiaisFiltered.sort((e,i)=>e.liga<i.liga?1:i.liga<e.liga?-1:0);break;case"subtipo":t.order=="asc"?this.materiaisFiltered.sort((e,i)=>e.subtipo>i.subtipo?1:i.subtipo>e.subtipo?-1:0):this.materiaisFiltered.sort((e,i)=>e.subtipo<i.subtipo?1:i.subtipo<e.subtipo?-1:0);break;case"estado":t.order=="asc"?this.materiaisFiltered.sort((e,i)=>e.estado>i.estado?1:i.estado>e.estado?-1:0):this.materiaisFiltered.sort((e,i)=>e.estado<i.estado?1:i.estado<e.estado?-1:0);break}},searchFilter(){this.materiaisFiltered=[];let t=this.$refs.searchBar.value.split(" ");t!=""?this.materiais.forEach(e=>{let i=!1;t.forEach(m=>{(e.tipo.includes(m)||e.liga.includes(m)||e.subtipo.includes(m)||e.dimensoes.includes(m)||e.material.includes(m)||e.produto.includes(m))&&(i=!0)}),i&&this.materiaisFiltered.push(e)}):this.materiais.forEach(e=>this.materiaisFiltered.push(e)),this.state!="Estado"&&this.state!="Todos"&&(this.materiaisFiltered=this.materiaisFiltered.filter(e=>e.estado==this.state))},selectState(t){this.state=t,this.stateOpen=!1,this.searchFilter()},getMaterialToEdit(t){this.alterModalOpen=!0,this.materiais.forEach(e=>{if(e.id==t){this.editMaterial=e;let i=this.editMaterial.dimensoes.split("x");switch(this.editMaterial.produto){case"TUBULAR":i.length==3?(this.editMaterial.comprimento=i[0],this.editMaterial.dimensaoA=i[1],this.editMaterial.espessura=i[2]):(this.editMaterial.comprimento=i[0],this.editMaterial.dimensaoA=i[1],this.editMaterial.dimensaoB=i[2],this.editMaterial.espessura=i[3]);break;case"CHAPA":this.editMaterial.comprimento=i[0],this.editMaterial.largura=i[1],this.editMaterial.espessura=i[2];break;case"CANTONEIRA":i.length==3?(this.editMaterial.comprimento=i[0],this.editMaterial.dimensaoA=i[1],this.editMaterial.espessura=i[2]):(this.editMaterial.comprimento=i[0],this.editMaterial.dimensaoA=i[1],this.editMaterial.dimensaoB=i[2],this.editMaterial.espessura=i[3]);break;case"PERFIL":this.editMaterial.comprimento=i[0],this.editMaterial.altura=i[1];break}}})},getAllMateriais(){this.materiais=[],this.materiaisFiltered=[],this.state="Estado",U({method:"get",url:"http://64.225.109.57:4000/api/materiais",headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken}}).then(t=>{t.data.access_token&&this.$store.commit("setAccessToken",t.data.access_token),t.data.materiais.forEach(e=>this.materiais.push(e)),t.data.materiais.forEach(e=>this.materiaisFiltered.push(e))}).catch(t=>{t.code?(console.log(t.response.data),this.$emit("open-modal",t.response.data.message),t.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(t)})},createMaterial(t){this.createModalOpen=!1,this.$refs.hidemodal1.click(),U({method:"post",url:"http://64.225.109.57:4000/api/materiais",headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken},data:t}).then(e=>{e.data.access_token&&this.$store.commit("setAccessToken",e.data.access_token),this.getAllMateriais(),this.$emit("open-modal","Material criado com sucesso.")}).catch(e=>{e.code?(console.log(e.response.data),this.$emit("open-modal",e.response.data.message),e.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(e)})},toggleMaterial(t,e){U({method:"put",url:`http://64.225.109.57:4000/api/materiais/${t}/toggle`,headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken},data:{estado:e}}).then(i=>{i.data.access_token&&this.$store.commit("setAccessToken",i.data.access_token),this.materiais.forEach(m=>{m.id==t&&(m.estado=e)}),this.materiaisFiltered.forEach(m=>{m.id==t&&(m.estado=e)})}).catch(i=>{i.code?(console.log(i.response.data),this.$emit("open-modal",i.response.data.message),i.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(i)})},alterMaterial(t){this.createModalOpen=!1,this.$refs.hidemodal2.click(),U({method:"put",url:`http://64.225.109.57:4000/api/materiais/${t.id}`,headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken},data:t}).then(e=>{e.data.access_token&&this.$store.commit("setAccessToken",e.data.access_token),this.getAllMateriais(),this.$emit("open-modal","Material alterado com sucesso.")}).catch(e=>{e.code?(console.log(e.response.data),this.$emit("open-modal",e.response.data.message),e.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(e)})},openModal(t){this.$emit("open-modal",t)}}},ls={class:"card"},ns={class:"card-header border-0 pt-6"},ms={class:"card-title"},ds={class:"d-flex align-items-center position-relative my-1"},fs={class:"d-flex align-items-center position-relative my-1"},hs={class:"custom-select"},ps={key:0,class:"card-toolbar"},cs={class:"d-flex justify-content-end","data-kt-customer-table-toolbar":"base"},us={class:"card-body pt-0"},Os=["onClick"],Is=["onClick"],bs=["onClick"],gs={ref:"hidemodal1",style:{display:"none"},"data-bs-toggle":"modal","data-bs-target":"#kt_modal_add_material"},_s={ref:"hidemodal2",style:{display:"none"},"data-bs-toggle":"modal","data-bs-target":"#kt_modal_alter_material"};function As(t,e,i,m,a,n){const R=b("KTIcon"),c=b("Datatable"),u=b("AddMaterialModal"),T=b("AlterMaterialModal");return r(),l("div",ls,[o("div",ns,[o("div",ms,[o("div",ds,[d(R,{"icon-name":"magnifier","icon-class":"fs-1 position-absolute ms-6"}),o("input",{type:"text",onInput:e[0]||(e[0]=(...s)=>n.searchFilter&&n.searchFilter(...s)),ref:"searchBar",class:"form-control form-control-solid w-250px ps-15",placeholder:"Procurar materiais"},null,544)]),o("div",fs,[o("div",hs,[o("div",{class:I(["selected",{open:a.stateOpen}]),onClick:e[1]||(e[1]=s=>a.stateOpen=!a.stateOpen)},f(this.state),3),o("div",{class:I(["items",{selectHide:!a.stateOpen}])},[o("div",{onClick:e[2]||(e[2]=s=>n.selectState("Todos"))},f("Todos")),o("div",{onClick:e[3]||(e[3]=s=>n.selectState("Ativo"))},f("Ativo")),o("div",{onClick:e[4]||(e[4]=s=>n.selectState("Inativo"))},f("Inativo"))],2),a.stateOpen?(r(),l("div",{key:0,class:"select-closer",onClick:e[5]||(e[5]=s=>a.stateOpen=!1)})):p("",!0)])])]),this.$store.getters.getUser.tipo!="user"?(r(),l("div",ps,[o("div",cs,[o("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#kt_modal_add_material","data-backdrop":"false",onClick:e[6]||(e[6]=s=>this.createModalOpen=!0)},[d(R,{"icon-name":"plus","icon-class":"fs-2"}),A(" Adicionar Material ")])])])):p("",!0)]),o("div",us,[d(c,{onOnSort:n.sort,data:this.materiaisFiltered,header:a.tableHeader,"enable-items-per-page-dropdown":!0,class:"datatable"},{produto:h(({row:s})=>[A(f(s.produto),1)]),material:h(({row:s})=>[A(f(s.material),1)]),tipo:h(({row:s})=>[A(f(s.tipo),1)]),subtipo:h(({row:s})=>[A(f(s.subtipo),1)]),liga:h(({row:s})=>[A(f(s.liga),1)]),dimensoes:h(({row:s})=>[A(f(s.dimensoes)+"mm ",1)]),estado:h(({row:s})=>[A(f(s.estado),1)]),actions:h(({row:s})=>[this.$store.getters.getUser.tipo!="user"?(r(),l("span",{key:0,title:"Alterar Material",onClick:O=>n.getMaterialToEdit(s.id),"data-bs-toggle":"modal","data-bs-target":"#kt_modal_alter_material",class:"material-icons"},"edit",8,Os)):p("",!0),s.estado=="Inativo"&&this.$store.getters.getUser.tipo!="user"?(r(),l("span",{key:1,title:"Ativar Material",onClick:O=>n.toggleMaterial(s.id,"Ativo"),class:"material-icons"},"check_circle",8,Is)):p("",!0),s.estado=="Ativo"&&this.$store.getters.getUser.tipo!="user"?(r(),l("span",{key:2,title:"Desativar Material",onClick:O=>n.toggleMaterial(s.id,"Inativo"),class:"material-icons"},"cancel",8,bs)):p("",!0)]),_:1},8,["onOnSort","data","header"])]),M(d(u,{onCreateMaterial:n.createMaterial,onOpenModal:n.openModal},null,8,["onCreateMaterial","onOpenModal"]),[[C,this.createModalOpen]]),M(d(T,{info:this.editMaterial,onAlterMaterial:n.alterMaterial,onOpenModal:n.openModal},null,8,["info","onAlterMaterial","onOpenModal"]),[[C,this.alterModalOpen]]),o("button",gs,null,512),o("button",_s,null,512)])}const Rs=E(rs,[["render",As],["__scopeId","data-v-c783b785"]]);export{Rs as default};
