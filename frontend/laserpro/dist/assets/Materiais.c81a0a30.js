import{_ as $,j as b,k as f,l as p,m as t,A as r,w as n,a6 as U,x as I,p as M,v as u,J as g,a7 as x,a8 as V,r as B,z as k,a4 as w,af as y}from"./index.ce57f93c.js";import{D as T}from"./KTDataTable.7689e812.js";import"./assets.64907595.js";const O={name:"AddMaterialModal",components:{},data(){return{formInfo:{produto:"CHAPA",material:"",tipo:"",subtipo:"",liga:"",comprimento:"",largura:"",espessura:"",altura:"",dimensaoA:"",dimensaoB:""},produtosSearchOpen:!1}},methods:{verifyMaterialData(){if(this.formInfo.produto.length==0||this.formInfo.material.length==0||this.formInfo.liga.length==0||this.formInfo.tipo.length==0)return this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1;if(this.formInfo.material.length>50)return this.$emit("open-modal","O tipo n\xE3o pode exceder 50 caracteres."),!1;if(this.formInfo.tipo.length>50)return this.$emit("open-modal","O tipo n\xE3o pode exceder 50 caracteres."),!1;if(this.formInfo.subtipo.length>50)return this.$emit("open-modal","O tipo n\xE3o pode exceder 50 caracteres."),!1;if(this.formInfo.liga.length>200)return this.$emit("open-modal","A liga n\xE3o pode exceder 200 caracteres."),!1;switch(this.formInfo.produto){case"CANTONEIRA":return this.formInfo.comprimento.length==0||this.formInfo.dimensaoA.length==0||this.formInfo.espessura.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.dimensaoA<=0||this.formInfo.dimensaoB<=0&&this.formInfo.dimensaoB!=""||this.formInfo.espessura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0;case"PERFIL":return this.formInfo.comprimento.length==0||this.formInfo.altura.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.altura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0;case"CHAPA":return this.formInfo.comprimento.length==0||this.formInfo.espessura.length==0||this.formInfo.largura.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.largura<=0||this.formInfo.espessura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0;case"TUBULAR":return this.formInfo.comprimento.length==0||this.formInfo.dimensaoA.length==0||this.formInfo.espessura.length==0||this.formInfo.subtipo.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.dimensaoA<=0||this.formInfo.dimensaoB<=0&&this.formInfo.dimensaoB!=""||this.formInfo.espessura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0}},createMaterial(){switch(this.formInfo.produto){case"CANTONEIRA":this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.dimensaoA,this.formInfo.dimensaoB!=""&&(this.formInfo.dimensoes+="x"+this.formInfo.dimensaoB),this.formInfo.dimensoes+="x"+this.formInfo.espessura;break;case"TUBULAR":this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.dimensaoA,this.formInfo.dimensaoB!=""&&(this.formInfo.dimensoes+="x"+this.formInfo.dimensaoB),this.formInfo.dimensoes+="x"+this.formInfo.espessura;break;case"CHAPA":this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.largura+"x"+this.formInfo.espessura;break;case"PERFIL":this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.altura;break}this.verifyMaterialData()&&(this.$emit("create-material",this.formInfo),this.formInfo={produto:"CHAPA",material:"",tipo:"",subtipo:"",liga:"",comprimento:"",largura:"",espessura:"",altura:"",dimensaoA:"",dimensaoB:""},this.produtosSearchOpen=!1)},chooseProduto(a){this.formInfo.produto=a,this.produtosSearchOpen=!1,this.formInfo.espessura="",this.formInfo.largura="",this.formInfo.comprimento="",this.formInfo.altura="",this.formInfo.dimensaoA="",this.formInfo.dimensaoB=""},reset(a){(a.target.id=="kt_modal_add_material"||a.target.id=="kt_modal_add_material_close"||a.target.id=="kt_modal_add_material_close_btn"||a.target.parentElement.id=="kt_modal_add_material_close_btn")&&(this.formInfo={produto:"CHAPA",material:"",tipo:"",subtipo:"",liga:"",comprimento:"",largura:"",espessura:"",altura:"",dimensaoA:"",dimensaoB:""},this.produtosSearchOpen=!1)}}},h=a=>(x("data-v-8af7fba3"),a=a(),V(),a),E={class:"modal-dialog modal-dialog-centered mw-650px"},P={class:"modal-header",id:"kt_modal_add_material_header"},R=h(()=>t("h2",{class:"fw-bold"},"Criar Material",-1)),L={class:"modal-body py-10 px-lg-17"},F={class:"scroll-y me-n7 pe-7",id:"kt_modal_add_material_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_customer_header","data-kt-scroll-wrappers":"#kt_modal_add_customer_scroll","data-kt-scroll-offset":"300px"},N={class:"fv-row mb-8"},S=h(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Produto",-1)),q={class:"searchbar"},D=h(()=>t("p",null,"CHAPA",-1)),H=[D],z=h(()=>t("p",null,"PERFIL",-1)),W=[z],K=h(()=>t("p",null,"CANTONEIRA",-1)),j=[K],J=h(()=>t("p",null,"TUBULAR",-1)),G=[J],Q={class:"fv-row mb-8"},X=h(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Material",-1)),Y={class:"fv-row mb-8"},Z=h(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Tipo",-1)),ee={key:0,class:"fv-row mb-8"},oe=h(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Subtipo",-1)),te={class:"fv-row mb-8"},se=h(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Liga",-1)),ae={class:"fv-row mb-8"},ie=h(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Comprimento (mm)",-1)),re={key:1,class:"fv-row mb-8"},le=h(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Largura (mm)",-1)),ne={key:2,class:"fv-row mb-8"},me=h(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Dimens\xE3o A (mm)",-1)),de={key:3,class:"fv-row mb-8"},fe=h(()=>t("label",{class:"fs-6 fw-semobold mb-2"},"Dimens\xE3o B (mm)",-1)),pe={key:4,class:"fv-row mb-8"},ue=h(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Espessura (mm)",-1)),he={key:5,class:"fv-row mb-8"},ce=h(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Altura (mm)",-1)),_e={class:"modal-footer flex-center"},Ie=h(()=>t("button",{type:"reset",id:"kt_modal_add_customer_cancel",class:"btn btn-light me-3"}," Limpar ",-1));function be(a,e,s,_,i,l){const v=b("KTIcon"),m=b("el-input"),d=b("el-form-item"),A=b("el-form");return f(),p("div",{class:"modal fade",id:"kt_modal_add_material",ref:"addMaterialModalRef",tabindex:"-1","aria-hidden":"true",onClick:e[23]||(e[23]=(...o)=>l.reset&&l.reset(...o))},[t("div",E,[t("div",{class:"modal-content",onClick:e[22]||(e[22]=o=>this.produtosSearchOpen=!1)},[t("div",P,[R,t("div",{id:"kt_modal_add_material_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary",onClick:e[0]||(e[0]=(...o)=>l.reset&&l.reset(...o))},[r(v,{id:"kt_modal_add_material_close_btn","icon-name":"cross","icon-class":"fs-1"})])]),r(A,{model:i.formInfo,ref:"formRef"},{default:n(()=>[t("div",L,[t("div",F,[t("div",N,[S,t("div",{class:"searchbar-container",onClick:e[6]||(e[6]=U(()=>{},["stop"]))},[t("div",q,[t("p",{type:"text",ref:"produtosSearchbar",onClick:e[1]||(e[1]=o=>this.produtosSearchOpen=!0),placeholder:"Produto"},I(this.formInfo.produto),513)]),t("div",{ref:"produtosResults",class:M(["searchbar-results",{"d-none":!i.produtosSearchOpen}])},[t("div",{onClick:e[2]||(e[2]=o=>l.chooseProduto("CHAPA"))},H),t("div",{onClick:e[3]||(e[3]=o=>l.chooseProduto("PERFIL"))},W),t("div",{onClick:e[4]||(e[4]=o=>l.chooseProduto("CANTONEIRA"))},j),t("div",{onClick:e[5]||(e[5]=o=>l.chooseProduto("TUBULAR"))},G)],2)])]),t("div",Q,[X,r(d,{prop:"material"},{default:n(()=>[r(m,{modelValue:i.formInfo.material,"onUpdate:modelValue":e[7]||(e[7]=o=>i.formInfo.material=o),type:"text",placeholder:"Material",onInput:e[8]||(e[8]=o=>this.formInfo.material=this.formInfo.material.toUpperCase())},null,8,["modelValue"])]),_:1})]),t("div",Y,[Z,r(d,{prop:"tipo"},{default:n(()=>[r(m,{modelValue:i.formInfo.tipo,"onUpdate:modelValue":e[9]||(e[9]=o=>i.formInfo.tipo=o),type:"text",placeholder:"Tipo",onInput:e[10]||(e[10]=o=>this.formInfo.tipo=this.formInfo.tipo.toUpperCase())},null,8,["modelValue"])]),_:1})]),this.formInfo.produto=="TUBULAR"?(f(),p("div",ee,[oe,r(d,{prop:"subtipo"},{default:n(()=>[r(m,{modelValue:i.formInfo.subtipo,"onUpdate:modelValue":e[11]||(e[11]=o=>i.formInfo.subtipo=o),type:"text",placeholder:"Subtipo",onInput:e[12]||(e[12]=o=>this.formInfo.subtipo=this.formInfo.subtipo.toUpperCase())},null,8,["modelValue"])]),_:1})])):u("",!0),t("div",te,[se,r(d,{prop:"liga"},{default:n(()=>[r(m,{modelValue:i.formInfo.liga,"onUpdate:modelValue":e[13]||(e[13]=o=>i.formInfo.liga=o),type:"text",placeholder:"Liga",onInput:e[14]||(e[14]=o=>this.formInfo.liga=this.formInfo.liga.toUpperCase())},null,8,["modelValue"])]),_:1})]),t("div",ae,[ie,r(d,{prop:"comprimento"},{default:n(()=>[r(m,{modelValue:i.formInfo.comprimento,"onUpdate:modelValue":e[15]||(e[15]=o=>i.formInfo.comprimento=o),type:"number",placeholder:"Comprimento"},null,8,["modelValue"])]),_:1})]),this.formInfo.produto=="CHAPA"?(f(),p("div",re,[le,r(d,{prop:"largura"},{default:n(()=>[r(m,{modelValue:i.formInfo.largura,"onUpdate:modelValue":e[16]||(e[16]=o=>i.formInfo.largura=o),type:"number",placeholder:"Largura"},null,8,["modelValue"])]),_:1})])):u("",!0),this.formInfo.produto=="TUBULAR"||this.formInfo.produto=="CANTONEIRA"?(f(),p("div",ne,[me,r(d,{prop:"dimensaoA"},{default:n(()=>[r(m,{modelValue:i.formInfo.dimensaoA,"onUpdate:modelValue":e[17]||(e[17]=o=>i.formInfo.dimensaoA=o),type:"number",placeholder:"Dimens\xE3o A"},null,8,["modelValue"])]),_:1})])):u("",!0),this.formInfo.produto=="TUBULAR"||this.formInfo.produto=="CANTONEIRA"?(f(),p("div",de,[fe,r(d,{prop:"dimensaoB"},{default:n(()=>[r(m,{modelValue:i.formInfo.dimensaoB,"onUpdate:modelValue":e[18]||(e[18]=o=>i.formInfo.dimensaoB=o),type:"number",placeholder:"Dimens\xE3o B"},null,8,["modelValue"])]),_:1})])):u("",!0),this.formInfo.produto!="PERFIL"?(f(),p("div",pe,[ue,r(d,{prop:"espessura"},{default:n(()=>[r(m,{modelValue:i.formInfo.espessura,"onUpdate:modelValue":e[19]||(e[19]=o=>i.formInfo.espessura=o),type:"number",placeholder:"Espessura"},null,8,["modelValue"])]),_:1})])):u("",!0),this.formInfo.produto=="PERFIL"?(f(),p("div",he,[ce,r(d,{prop:"altura"},{default:n(()=>[r(m,{modelValue:i.formInfo.altura,"onUpdate:modelValue":e[20]||(e[20]=o=>i.formInfo.altura=o),type:"number",placeholder:"Altura"},null,8,["modelValue"])]),_:1})])):u("",!0)])]),t("div",_e,[Ie,t("div",{id:"kt_modal_add_customer_cancel",class:"btn btn-lg btn-primary",onClick:e[21]||(e[21]=(...o)=>l.createMaterial&&l.createMaterial(...o))},[g(" Criar "),r(v,{"icon-name":"arrow-right","icon-class":"fs-2 me-2 me-0",class:"override-mr0"})])])]),_:1},8,["model"])])])],512)}const ge=$(O,[["render",be],["__scopeId","data-v-8af7fba3"]]);const ve={name:"AlterMaterialModal",components:{},props:{info:{type:Object,required:!0}},data(){return{formInfo:{produto:"",material:"",tipo:"",subtipo:"",liga:"",comprimento:"",largura:"",espessura:"",altura:"",dimensaoA:"",dimensaoB:""},produtosSearchOpen:!1}},mounted(){this.formInfo=this.info},methods:{verifyMaterialData(){if(this.formInfo.produto.length==0||this.formInfo.material.length==0||this.formInfo.liga.length==0||this.formInfo.tipo.length==0)return this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1;if(this.formInfo.material.length>50)return this.$emit("open-modal","O tipo n\xE3o pode exceder 50 caracteres."),!1;if(this.formInfo.tipo.length>50)return this.$emit("open-modal","O tipo n\xE3o pode exceder 50 caracteres."),!1;if(this.formInfo.subtipo.length>50)return this.$emit("open-modal","O tipo n\xE3o pode exceder 50 caracteres."),!1;if(this.formInfo.liga.length>200)return this.$emit("open-modal","A liga n\xE3o pode exceder 200 caracteres."),!1;switch(this.formInfo.produto){case"CANTONEIRA":return this.formInfo.comprimento.length==0||this.formInfo.dimensaoA.length==0||this.formInfo.espessura.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.dimensaoA<=0||this.formInfo.dimensaoB<=0&&this.formInfo.dimensaoB!=""||this.formInfo.espessura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0;case"PERFIL":return this.formInfo.comprimento.length==0||this.formInfo.altura.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.altura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0;case"CHAPA":return this.formInfo.comprimento.length==0||this.formInfo.espessura.length==0||this.formInfo.largura.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.largura<=0||this.formInfo.espessura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0;case"TUBULAR":return this.formInfo.comprimento.length==0||this.formInfo.dimensaoA.length==0||this.formInfo.espessura.length==0||this.formInfo.subtipo.length==0?(this.$emit("open-modal","Preencha todos os campos obrigat\xF3rios."),!1):this.formInfo.comprimento<=0||this.formInfo.dimensaoA<=0||this.formInfo.dimensaoB<=0&&this.formInfo.dimensaoB!=""||this.formInfo.espessura<=0?(this.$emit("open-modal","Introduza valores v\xE1lidos para as dimens\xF5es."),!1):!0}},alterarMaterial(){switch(this.formInfo.produto){case"CANTONEIRA":this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.dimensaoA,this.formInfo.dimensaoB!=""&&(this.formInfo.dimensoes+="x"+this.formInfo.dimensaoB),this.formInfo.dimensoes+="x"+this.formInfo.espessura;break;case"TUBULAR":this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.dimensaoA,this.formInfo.dimensaoB!=""&&(this.formInfo.dimensoes+="x"+this.formInfo.dimensaoB),this.formInfo.dimensoes+="x"+this.formInfo.espessura;break;case"CHAPA":this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.largura+"x"+this.formInfo.espessura;break;case"PERFIL":this.formInfo.dimensoes=this.formInfo.comprimento+"x"+this.formInfo.altura;break}this.verifyMaterialData()&&(this.$emit("create-material",this.formInfo),this.produtosSearchOpen=!1)},chooseProduto(a){this.formInfo.produto=a,this.produtosSearchOpen=!1,this.formInfo.espessura="",this.formInfo.largura="",this.formInfo.comprimento="",this.formInfo.altura="",this.formInfo.dimensaoA="",this.formInfo.dimensaoB=""},reset(){this.formInfo={...this.info}}},watch:{info:function(a){this.formInfo={...a}}}},c=a=>(x("data-v-c95cfa06"),a=a(),V(),a),Ae={class:"modal fade",id:"kt_modal_alter_material",ref:"alterMaterialModalRef",tabindex:"-1","aria-hidden":"true"},ke={class:"modal-dialog modal-dialog-centered mw-650px"},Me={class:"modal-header",id:"kt_modal_alter_material_header"},$e=c(()=>t("h2",{class:"fw-bold"},"Alterar Material",-1)),Ce={id:"kt_modal_alter_material_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},we={class:"modal-body py-10 px-lg-17"},ye={class:"scroll-y me-n7 pe-7",id:"kt_modal_alter_material_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_customer_header","data-kt-scroll-wrappers":"#kt_modal_add_customer_scroll","data-kt-scroll-offset":"300px"},Ue={class:"fv-row mb-8"},xe=c(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Produto",-1)),Ve={class:"searchbar"},Be=c(()=>t("p",null,"CHAPA",-1)),Te=[Be],Oe=c(()=>t("p",null,"PERFIL",-1)),Ee=[Oe],Pe=c(()=>t("p",null,"CANTONEIRA",-1)),Re=[Pe],Le=c(()=>t("p",null,"TUBULAR",-1)),Fe=[Le],Ne={class:"fv-row mb-8"},Se=c(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Material",-1)),qe={class:"fv-row mb-8"},De=c(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Tipo",-1)),He={key:0,class:"fv-row mb-8"},ze=c(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Subtipo",-1)),We={class:"fv-row mb-8"},Ke=c(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Liga",-1)),je={class:"fv-row mb-8"},Je=c(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Comprimento (mm)",-1)),Ge={key:1,class:"fv-row mb-8"},Qe=c(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Largura (mm)",-1)),Xe={key:2,class:"fv-row mb-8"},Ye=c(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Dimens\xE3o A (mm)",-1)),Ze={key:3,class:"fv-row mb-8"},eo=c(()=>t("label",{class:"fs-6 fw-semobold mb-2"},"Dimens\xE3o B (mm)",-1)),oo={key:4,class:"fv-row mb-8"},to=c(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Espessura (mm)",-1)),so={key:5,class:"fv-row mb-8"},ao=c(()=>t("label",{class:"required fs-6 fw-semobold mb-2"},"Altura (mm)",-1)),io={class:"modal-footer flex-center"};function ro(a,e,s,_,i,l){const v=b("KTIcon"),m=b("el-input"),d=b("el-form-item"),A=b("el-form");return f(),p("div",Ae,[t("div",ke,[t("div",{class:"modal-content",onClick:e[22]||(e[22]=o=>this.produtosSearchOpen=!1)},[t("div",Me,[$e,t("div",Ce,[r(v,{"icon-name":"cross","icon-class":"fs-1"})])]),r(A,{model:i.formInfo,ref:"formRef"},{default:n(()=>[t("div",we,[t("div",ye,[t("div",Ue,[xe,t("div",{class:"searchbar-container",onClick:e[5]||(e[5]=U(()=>{},["stop"]))},[t("div",Ve,[t("p",{type:"text",ref:"produtosSearchbar",onClick:e[0]||(e[0]=o=>this.produtosSearchOpen=!0),placeholder:"Produto"},I(this.formInfo.produto),513)]),t("div",{ref:"produtosResults",class:M(["searchbar-results",{"d-none":!i.produtosSearchOpen}])},[t("div",{onClick:e[1]||(e[1]=o=>l.chooseProduto("CHAPA"))},Te),t("div",{onClick:e[2]||(e[2]=o=>l.chooseProduto("PERFIL"))},Ee),t("div",{onClick:e[3]||(e[3]=o=>l.chooseProduto("CANTONEIRA"))},Re),t("div",{onClick:e[4]||(e[4]=o=>l.chooseProduto("TUBULAR"))},Fe)],2)])]),t("div",Ne,[Se,r(d,{prop:"material"},{default:n(()=>[r(m,{modelValue:i.formInfo.material,"onUpdate:modelValue":e[6]||(e[6]=o=>i.formInfo.material=o),type:"text",placeholder:"Material",onInput:e[7]||(e[7]=o=>this.formInfo.material=this.formInfo.material.toUpperCase())},null,8,["modelValue"])]),_:1})]),t("div",qe,[De,r(d,{prop:"tipo"},{default:n(()=>[r(m,{modelValue:i.formInfo.tipo,"onUpdate:modelValue":e[8]||(e[8]=o=>i.formInfo.tipo=o),type:"text",placeholder:"Tipo",onInput:e[9]||(e[9]=o=>this.formInfo.tipo=this.formInfo.tipo.toUpperCase())},null,8,["modelValue"])]),_:1})]),this.formInfo.produto=="TUBULAR"?(f(),p("div",He,[ze,r(d,{prop:"subtipo"},{default:n(()=>[r(m,{modelValue:i.formInfo.subtipo,"onUpdate:modelValue":e[10]||(e[10]=o=>i.formInfo.subtipo=o),type:"text",placeholder:"Subtipo",onInput:e[11]||(e[11]=o=>this.formInfo.subtipo=this.formInfo.subtipo.toUpperCase())},null,8,["modelValue"])]),_:1})])):u("",!0),t("div",We,[Ke,r(d,{prop:"liga"},{default:n(()=>[r(m,{modelValue:i.formInfo.liga,"onUpdate:modelValue":e[12]||(e[12]=o=>i.formInfo.liga=o),type:"text",placeholder:"Liga",onInput:e[13]||(e[13]=o=>this.formInfo.liga=this.formInfo.liga.toUpperCase())},null,8,["modelValue"])]),_:1})]),t("div",je,[Je,r(d,{prop:"comprimento"},{default:n(()=>[r(m,{modelValue:i.formInfo.comprimento,"onUpdate:modelValue":e[14]||(e[14]=o=>i.formInfo.comprimento=o),type:"number",placeholder:"Comprimento"},null,8,["modelValue"])]),_:1})]),this.formInfo.produto=="CHAPA"?(f(),p("div",Ge,[Qe,r(d,{prop:"largura"},{default:n(()=>[r(m,{modelValue:i.formInfo.largura,"onUpdate:modelValue":e[15]||(e[15]=o=>i.formInfo.largura=o),type:"number",placeholder:"Largura"},null,8,["modelValue"])]),_:1})])):u("",!0),this.formInfo.produto=="TUBULAR"||this.formInfo.produto=="CANTONEIRA"?(f(),p("div",Xe,[Ye,r(d,{prop:"dimensaoA"},{default:n(()=>[r(m,{modelValue:i.formInfo.dimensaoA,"onUpdate:modelValue":e[16]||(e[16]=o=>i.formInfo.dimensaoA=o),type:"number",placeholder:"Dimens\xE3o A"},null,8,["modelValue"])]),_:1})])):u("",!0),this.formInfo.produto=="TUBULAR"||this.formInfo.produto=="CANTONEIRA"?(f(),p("div",Ze,[eo,r(d,{prop:"dimensaoB"},{default:n(()=>[r(m,{modelValue:i.formInfo.dimensaoB,"onUpdate:modelValue":e[17]||(e[17]=o=>i.formInfo.dimensaoB=o),type:"number",placeholder:"Dimens\xE3o B"},null,8,["modelValue"])]),_:1})])):u("",!0),this.formInfo.produto!="PERFIL"?(f(),p("div",oo,[to,r(d,{prop:"espessura"},{default:n(()=>[r(m,{modelValue:i.formInfo.espessura,"onUpdate:modelValue":e[18]||(e[18]=o=>i.formInfo.espessura=o),type:"number",placeholder:"Espessura"},null,8,["modelValue"])]),_:1})])):u("",!0),this.formInfo.produto=="PERFIL"?(f(),p("div",so,[ao,r(d,{prop:"altura"},{default:n(()=>[r(m,{modelValue:i.formInfo.altura,"onUpdate:modelValue":e[19]||(e[19]=o=>i.formInfo.altura=o),type:"number",placeholder:"Altura"},null,8,["modelValue"])]),_:1})])):u("",!0)])]),t("div",io,[t("div",{onClick:e[20]||(e[20]=(...o)=>l.reset&&l.reset(...o)),class:"btn btn-light me-3"}," Repor "),t("div",{id:"kt_modal_add_customer_cancel",class:"btn btn-lg btn-primary",onClick:e[21]||(e[21]=(...o)=>l.alterarMaterial&&l.alterarMaterial(...o))},[g(" Alterar "),r(v,{"icon-name":"arrow-right","icon-class":"fs-2 me-2 me-0",class:"override-mr0"})])])]),_:1},8,["model"])])])],512)}const lo=$(ve,[["render",ro],["__scopeId","data-v-c95cfa06"]]);const no={name:"Materiais",components:{Datatable:T,AddMaterialModal:ge,AlterMaterialModal:lo},data(){return{materiais:[],materiaisFiltered:[],stateOpen:!1,state:"Estado",createModalOpen:!1,alterModalOpen:!1,editMaterial:{id:"",liga:"",dimensoes:"",tipo:"",subtipo:"",material:"",produto:""},tableHeader:[]}},created(){this.$store.getters.getUser.id?this.getAllMateriais():this.$router.push({name:"login"})},mounted(){let a=[{columnName:"Produto",columnLabel:"produto",sortEnabled:!0,columnWidth:140},{columnName:"Material",columnLabel:"material",sortEnabled:!0,columnWidth:140},{columnName:"Tipo",columnLabel:"tipo",sortEnabled:!0,columnWidth:140},{columnName:"Subtipo",columnLabel:"subtipo",sortEnabled:!0,columnWidth:140},{columnName:"Liga",columnLabel:"liga",sortEnabled:!0,columnWidth:140},{columnName:"Dimens\xF5es",columnLabel:"dimensoes",sortEnabled:!1,columnWidth:170},{columnName:"Estado",columnLabel:"estado",sortEnabled:!0,columnWidth:80}];this.$store.getters.getUser.tipo!="user"&&a.push({columnName:"Actions",columnLabel:"actions",sortEnabled:!1,columnWidth:160}),this.tableHeader=B(a)},methods:{sort(a){switch(a.label){case"produto":a.order=="asc"?this.materiaisFiltered.sort((e,s)=>e.produto>s.produto?1:s.produto>e.produto?-1:0):this.materiaisFiltered.sort((e,s)=>e.produto<s.produto?1:s.produto<e.produto?-1:0);break;case"material":a.order=="asc"?this.materiaisFiltered.sort((e,s)=>e.material>s.material?1:s.material>e.material?-1:0):this.materiaisFiltered.sort((e,s)=>e.material<s.material?1:s.material<e.material?-1:0);break;case"tipo":a.order=="asc"?this.materiaisFiltered.sort((e,s)=>e.tipo>s.tipo?1:s.tipo>e.tipo?-1:0):this.materiaisFiltered.sort((e,s)=>e.tipo<s.tipo?1:s.tipo<e.tipo?-1:0);break;case"liga":a.order=="asc"?this.materiaisFiltered.sort((e,s)=>e.liga>s.liga?1:s.liga>e.liga?-1:0):this.materiaisFiltered.sort((e,s)=>e.liga<s.liga?1:s.liga<e.liga?-1:0);break;case"subtipo":a.order=="asc"?this.materiaisFiltered.sort((e,s)=>e.subtipo>s.subtipo?1:s.subtipo>e.subtipo?-1:0):this.materiaisFiltered.sort((e,s)=>e.subtipo<s.subtipo?1:s.subtipo<e.subtipo?-1:0);break;case"estado":a.order=="asc"?this.materiaisFiltered.sort((e,s)=>e.estado>s.estado?1:s.estado>e.estado?-1:0):this.materiaisFiltered.sort((e,s)=>e.estado<s.estado?1:s.estado<e.estado?-1:0);break}},searchFilter(){this.materiaisFiltered=[];let a=this.$refs.searchBar.value.split(" ");a!=""?this.materiais.forEach(e=>{let s=!1;a.forEach(_=>{(e.tipo.includes(_)||e.liga.includes(_)||e.subtipo.includes(_)||e.dimensoes.includes(_)||e.material.includes(_)||e.produto.includes(_))&&(s=!0)}),s&&this.materiaisFiltered.push(e)}):this.materiais.forEach(e=>this.materiaisFiltered.push(e)),this.state!="Estado"&&this.state!="Todos"&&(this.materiaisFiltered=this.materiaisFiltered.filter(e=>e.estado==this.state))},selectState(a){this.state=a,this.stateOpen=!1,this.searchFilter()},getMaterialToEdit(a){this.alterModalOpen=!0,this.materiais.forEach(e=>{if(e.id==a){this.editMaterial=e;let s=this.editMaterial.dimensoes.split("x");switch(this.editMaterial.produto){case"TUBULAR":s.length==3?(this.editMaterial.comprimento=s[0],this.editMaterial.dimensaoA=s[1],this.editMaterial.espessura=s[2]):(this.editMaterial.comprimento=s[0],this.editMaterial.dimensaoA=s[1],this.editMaterial.dimensaoB=s[2],this.editMaterial.espessura=s[3]);break;case"CHAPA":this.editMaterial.comprimento=s[0],this.editMaterial.largura=s[1],this.editMaterial.espessura=s[2];break;case"CANTONEIRA":s.length==3?(this.editMaterial.comprimento=s[0],this.editMaterial.dimensaoA=s[1],this.editMaterial.espessura=s[2]):(this.editMaterial.comprimento=s[0],this.editMaterial.dimensaoA=s[1],this.editMaterial.dimensaoB=s[2],this.editMaterial.espessura=s[3]);break;case"PERFIL":this.editMaterial.comprimento=s[0],this.editMaterial.altura=s[1];break}}})},getAllMateriais(){this.materiais=[],this.materiaisFiltered=[],this.state="Estado",k({method:"get",url:"http://64.225.109.57:4000/api/materiais",headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken}}).then(a=>{a.data.access_token&&this.$store.commit("setAccessToken",a.data.access_token),a.data.materiais.forEach(e=>this.materiais.push(e)),a.data.materiais.forEach(e=>this.materiaisFiltered.push(e))}).catch(a=>{a.code?(console.log(a.response.data),this.$emit("open-modal",a.response.data.message),a.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(a)})},createMaterial(a){this.createModalOpen=!1,this.$refs.hidemodal1.click(),k({method:"post",url:"http://64.225.109.57:4000/api/materiais",headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken},data:a}).then(e=>{e.data.access_token&&this.$store.commit("setAccessToken",e.data.access_token),this.getAllMateriais(),this.$emit("open-modal","Material criado com sucesso.")}).catch(e=>{e.code?(console.log(e.response.data),this.$emit("open-modal",e.response.data.message),e.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(e)})},toggleMaterial(a,e){k({method:"put",url:`http://64.225.109.57:4000/api/materiais/${a}/toggle`,headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken},data:{estado:e}}).then(s=>{s.data.access_token&&this.$store.commit("setAccessToken",s.data.access_token),this.materiais.forEach(_=>{_.id==a&&(_.estado=e)}),this.materiaisFiltered.forEach(_=>{_.id==a&&(_.estado=e)})}).catch(s=>{s.code?(console.log(s.response.data),this.$emit("open-modal",s.response.data.message),s.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(s)})},alterMaterial(a){this.createModalOpen=!1,this.$refs.hidemodal2.click(),k({method:"put",url:`http://64.225.109.57:4000/api/materiais/${a.id}`,headers:{Authorization:`Bearer ${this.$store.getters.getAccessToken}`,refreshtoken:this.$store.getters.getRefreshToken},data:a}).then(e=>{e.data.access_token&&this.$store.commit("setAccessToken",e.data.access_token),this.getAllMateriais(),this.$emit("open-modal","Material alterado com sucesso.")}).catch(e=>{e.code?(console.log(e.response.data),this.$emit("open-modal",e.response.data.message),e.response.status==401&&(this.$store.commit("resetUser"),this.$router.push({name:"login"}))):console.log(e)})},openModal(a){this.$emit("open-modal",a)}}},mo={class:"card"},fo={class:"card-header border-0 pt-6"},po={class:"card-title"},uo={class:"d-flex align-items-center position-relative my-1"},ho={class:"d-flex align-items-center position-relative my-1"},co={class:"custom-select"},_o={key:0,class:"card-toolbar"},Io={class:"d-flex justify-content-end","data-kt-customer-table-toolbar":"base"},bo={class:"card-body pt-0"},go=["onClick"],vo=["onClick"],Ao=["onClick"],ko={ref:"hidemodal1",style:{display:"none"},"data-bs-toggle":"modal","data-bs-target":"#kt_modal_add_material"},Mo={ref:"hidemodal2",style:{display:"none"},"data-bs-toggle":"modal","data-bs-target":"#kt_modal_alter_material"};function $o(a,e,s,_,i,l){const v=b("KTIcon"),m=b("Datatable"),d=b("AddMaterialModal"),A=b("AlterMaterialModal");return f(),p("div",mo,[t("div",fo,[t("div",po,[t("div",uo,[r(v,{"icon-name":"magnifier","icon-class":"fs-1 position-absolute ms-6"}),t("input",{type:"text",onInput:e[0]||(e[0]=(...o)=>l.searchFilter&&l.searchFilter(...o)),ref:"searchBar",class:"form-control form-control-solid w-250px ps-15",placeholder:"Procurar materiais"},null,544)]),t("div",ho,[t("div",co,[t("div",{class:M(["selected",{open:i.stateOpen}]),onClick:e[1]||(e[1]=o=>i.stateOpen=!i.stateOpen)},I(this.state),3),t("div",{class:M(["items",{selectHide:!i.stateOpen}])},[t("div",{onClick:e[2]||(e[2]=o=>l.selectState("Todos"))},I("Todos")),t("div",{onClick:e[3]||(e[3]=o=>l.selectState("Ativo"))},I("Ativo")),t("div",{onClick:e[4]||(e[4]=o=>l.selectState("Inativo"))},I("Inativo"))],2),i.stateOpen?(f(),p("div",{key:0,class:"select-closer",onClick:e[5]||(e[5]=o=>i.stateOpen=!1)})):u("",!0)])])]),this.$store.getters.getUser.tipo!="user"?(f(),p("div",_o,[t("div",Io,[t("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#kt_modal_add_material","data-backdrop":"false",onClick:e[6]||(e[6]=o=>this.createModalOpen=!0)},[r(v,{"icon-name":"plus","icon-class":"fs-2"}),g(" Adicionar Material ")])])])):u("",!0)]),t("div",bo,[r(m,{onOnSort:l.sort,data:this.materiaisFiltered,header:i.tableHeader,"enable-items-per-page-dropdown":!0,class:"datatable"},{produto:n(({row:o})=>[g(I(o.produto),1)]),material:n(({row:o})=>[g(I(o.material),1)]),tipo:n(({row:o})=>[g(I(o.tipo),1)]),subtipo:n(({row:o})=>[g(I(o.subtipo),1)]),liga:n(({row:o})=>[g(I(o.liga),1)]),dimensoes:n(({row:o})=>[g(I(o.dimensoes)+"mm ",1)]),estado:n(({row:o})=>[g(I(o.estado),1)]),actions:n(({row:o})=>[this.$store.getters.getUser.tipo!="user"?(f(),p("span",{key:0,title:"Alterar Material",onClick:C=>l.getMaterialToEdit(o.id),"data-bs-toggle":"modal","data-bs-target":"#kt_modal_alter_material",class:"material-icons"},"edit",8,go)):u("",!0),o.estado=="Inativo"&&this.$store.getters.getUser.tipo!="user"?(f(),p("span",{key:1,title:"Ativar Material",onClick:C=>l.toggleMaterial(o.id,"Ativo"),class:"material-icons"},"check_circle",8,vo)):u("",!0),o.estado=="Ativo"&&this.$store.getters.getUser.tipo!="user"?(f(),p("span",{key:2,title:"Desativar Material",onClick:C=>l.toggleMaterial(o.id,"Inativo"),class:"material-icons"},"cancel",8,Ao)):u("",!0)]),_:1},8,["onOnSort","data","header"])]),w(r(d,{onCreateMaterial:l.createMaterial,onOpenModal:l.openModal},null,8,["onCreateMaterial","onOpenModal"]),[[y,this.createModalOpen]]),w(r(A,{info:this.editMaterial,onAlterMaterial:l.alterMaterial,onOpenModal:l.openModal},null,8,["info","onAlterMaterial","onOpenModal"]),[[y,this.alterModalOpen]]),t("button",ko,null,512),t("button",Mo,null,512)])}const Uo=$(no,[["render",$o],["__scopeId","data-v-c783b785"]]);export{Uo as default};
